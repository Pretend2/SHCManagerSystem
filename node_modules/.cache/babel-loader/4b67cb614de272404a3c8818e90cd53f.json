{"ast":null,"code":"import { on, off } from 'evtd';\nimport { computed, defineComponent, h, ref } from 'vue';\nconst HANDLE_SIZE = '12px';\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'Pallete',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    // 0 - 360\n    displayedHue: {\n      type: Number,\n      required: true\n    },\n    displayedSv: {\n      type: Array,\n      required: true\n    },\n    onUpdateSV: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n\n  setup(props) {\n    const palleteRef = ref(null);\n\n    function handleMouseDown(e) {\n      if (!palleteRef.value) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n\n    function handleMouseMove(e) {\n      const {\n        value: palleteEl\n      } = palleteRef;\n      if (!palleteEl) return;\n      const {\n        width,\n        height,\n        left,\n        bottom\n      } = palleteEl.getBoundingClientRect();\n      const newV = (bottom - e.clientY) / height;\n      const newS = (e.clientX - left) / width;\n      const normalizedNewS = 100 * (newS > 1 ? 1 : newS < 0 ? 0 : newS);\n      const normalizedNewV = 100 * (newV > 1 ? 1 : newV < 0 ? 0 : newV);\n      props.onUpdateSV(normalizedNewS, normalizedNewV);\n    }\n\n    function handleMouseUp() {\n      var _a;\n\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n\n    return {\n      palleteRef,\n      handleColor: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`;\n      }),\n      handleMouseDown\n    };\n  },\n\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete`,\n      onMousedown: this.handleMouseDown,\n      ref: \"palleteRef\"\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete__layer`,\n      style: {\n        backgroundImage: `linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`\n      }\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-pallete__layer ${clsPrefix}-color-picker-pallete__layer--shadowed`,\n      style: {\n        backgroundImage: 'linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))'\n      }\n    }), this.rgba && h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS,\n        left: `calc(${this.displayedSv[0]}% - ${RADIUS})`,\n        bottom: `calc(${this.displayedSv[1]}% - ${RADIUS})`\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: this.handleColor,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    })));\n  }\n\n});","map":{"version":3,"names":["on","off","computed","defineComponent","h","ref","HANDLE_SIZE","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","displayedHue","Number","displayedSv","onUpdateSV","Function","onComplete","setup","palleteRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","palleteEl","width","height","left","bottom","getBoundingClientRect","newV","clientY","newS","clientX","normalizedNewS","normalizedNewV","_a","call","handleColor","render","class","onMousedown","style","backgroundImage","borderRadius","backgroundColor"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/color-picker/src/Pallete.js"],"sourcesContent":["import { on, off } from 'evtd';\nimport { computed, defineComponent, h, ref } from 'vue';\nconst HANDLE_SIZE = '12px';\nconst RADIUS = '6px';\nexport default defineComponent({\n    name: 'Pallete',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        rgba: {\n            type: Array,\n            default: null\n        },\n        // 0 - 360\n        displayedHue: {\n            type: Number,\n            required: true\n        },\n        displayedSv: {\n            type: Array,\n            required: true\n        },\n        onUpdateSV: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const palleteRef = ref(null);\n        function handleMouseDown(e) {\n            if (!palleteRef.value)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: palleteEl } = palleteRef;\n            if (!palleteEl)\n                return;\n            const { width, height, left, bottom } = palleteEl.getBoundingClientRect();\n            const newV = (bottom - e.clientY) / height;\n            const newS = (e.clientX - left) / width;\n            const normalizedNewS = 100 * (newS > 1 ? 1 : newS < 0 ? 0 : newS);\n            const normalizedNewV = 100 * (newV > 1 ? 1 : newV < 0 ? 0 : newV);\n            props.onUpdateSV(normalizedNewS, normalizedNewV);\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            palleteRef,\n            handleColor: computed(() => {\n                const { rgba } = props;\n                if (!rgba)\n                    return '';\n                return `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`;\n            }),\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-pallete`, onMousedown: this.handleMouseDown, ref: \"palleteRef\" },\n            h(\"div\", { class: `${clsPrefix}-color-picker-pallete__layer`, style: {\n                    backgroundImage: `linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`\n                } }),\n            h(\"div\", { class: `${clsPrefix}-color-picker-pallete__layer ${clsPrefix}-color-picker-pallete__layer--shadowed`, style: {\n                    backgroundImage: 'linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))'\n                } }),\n            this.rgba && (h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                    width: HANDLE_SIZE,\n                    height: HANDLE_SIZE,\n                    borderRadius: RADIUS,\n                    left: `calc(${this.displayedSv[0]}% - ${RADIUS})`,\n                    bottom: `calc(${this.displayedSv[1]}% - ${RADIUS})`\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                        backgroundColor: this.handleColor,\n                        borderRadius: RADIUS,\n                        width: HANDLE_SIZE,\n                        height: HANDLE_SIZE\n                    } })))));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}