{"ast":null,"code":"import { onBeforeMount, onBeforeUnmount, reactive, readonly, watch } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance } from './utils';\nexport default function useKeyboard(options = {}, enabledRef) {\n  const state = reactive({\n    ctrl: false,\n    command: false,\n    win: false,\n    shift: false,\n    tab: false\n  });\n  const {\n    keydown,\n    keyup\n  } = options;\n\n  const keydownHandler = e => {\n    switch (e.key) {\n      case 'Control':\n        state.ctrl = true;\n        break;\n\n      case 'Meta':\n        state.command = true;\n        state.win = true;\n        break;\n\n      case 'Shift':\n        state.shift = true;\n        break;\n\n      case 'Tab':\n        state.tab = true;\n        break;\n    }\n\n    if (keydown !== undefined) {\n      Object.keys(keydown).forEach(key => {\n        if (key !== e.key) return;\n        const handler = keydown[key];\n\n        if (typeof handler === 'function') {\n          handler(e);\n        } else {\n          const {\n            stop = false,\n            prevent = false\n          } = handler;\n          if (stop) e.stopPropagation();\n          if (prevent) e.preventDefault();\n          handler.handler(e);\n        }\n      });\n    }\n  };\n\n  const keyupHandler = e => {\n    switch (e.key) {\n      case 'Control':\n        state.ctrl = false;\n        break;\n\n      case 'Meta':\n        state.command = false;\n        state.win = false;\n        break;\n\n      case 'Shift':\n        state.shift = false;\n        break;\n\n      case 'Tab':\n        state.tab = false;\n        break;\n    }\n\n    if (keyup !== undefined) {\n      Object.keys(keyup).forEach(key => {\n        if (key !== e.key) return;\n        const handler = keyup[key];\n\n        if (typeof handler === 'function') {\n          handler(e);\n        } else {\n          const {\n            stop = false,\n            prevent = false\n          } = handler;\n          if (stop) e.stopPropagation();\n          if (prevent) e.preventDefault();\n          handler.handler(e);\n        }\n      });\n    }\n  };\n\n  const setup = () => {\n    if (enabledRef === undefined || enabledRef.value) {\n      on('keydown', document, keydownHandler);\n      on('keyup', document, keyupHandler);\n    }\n\n    if (enabledRef !== undefined) {\n      watch(enabledRef, value => {\n        if (value) {\n          on('keydown', document, keydownHandler);\n          on('keyup', document, keyupHandler);\n        } else {\n          off('keydown', document, keydownHandler);\n          off('keyup', document, keyupHandler);\n        }\n      });\n    }\n  };\n\n  if (hasInstance()) {\n    onBeforeMount(setup);\n    onBeforeUnmount(() => {\n      if (enabledRef === undefined || enabledRef.value) {\n        off('keydown', document, keydownHandler);\n        off('keyup', document, keyupHandler);\n      }\n    });\n  } else {\n    setup();\n  }\n\n  return readonly(state);\n}","map":{"version":3,"names":["onBeforeMount","onBeforeUnmount","reactive","readonly","watch","on","off","hasInstance","useKeyboard","options","enabledRef","state","ctrl","command","win","shift","tab","keydown","keyup","keydownHandler","e","key","undefined","Object","keys","forEach","handler","stop","prevent","stopPropagation","preventDefault","keyupHandler","setup","value","document"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/vooks/es/use-keyboard.js"],"sourcesContent":["import { onBeforeMount, onBeforeUnmount, reactive, readonly, watch } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance } from './utils';\nexport default function useKeyboard(options = {}, enabledRef) {\n    const state = reactive({\n        ctrl: false,\n        command: false,\n        win: false,\n        shift: false,\n        tab: false\n    });\n    const { keydown, keyup } = options;\n    const keydownHandler = (e) => {\n        switch (e.key) {\n            case 'Control':\n                state.ctrl = true;\n                break;\n            case 'Meta':\n                state.command = true;\n                state.win = true;\n                break;\n            case 'Shift':\n                state.shift = true;\n                break;\n            case 'Tab':\n                state.tab = true;\n                break;\n        }\n        if (keydown !== undefined) {\n            Object.keys(keydown).forEach(key => {\n                if (key !== e.key)\n                    return;\n                const handler = keydown[key];\n                if (typeof handler === 'function') {\n                    handler(e);\n                }\n                else {\n                    const { stop = false, prevent = false } = handler;\n                    if (stop)\n                        e.stopPropagation();\n                    if (prevent)\n                        e.preventDefault();\n                    handler.handler(e);\n                }\n            });\n        }\n    };\n    const keyupHandler = (e) => {\n        switch (e.key) {\n            case 'Control':\n                state.ctrl = false;\n                break;\n            case 'Meta':\n                state.command = false;\n                state.win = false;\n                break;\n            case 'Shift':\n                state.shift = false;\n                break;\n            case 'Tab':\n                state.tab = false;\n                break;\n        }\n        if (keyup !== undefined) {\n            Object.keys(keyup).forEach(key => {\n                if (key !== e.key)\n                    return;\n                const handler = keyup[key];\n                if (typeof handler === 'function') {\n                    handler(e);\n                }\n                else {\n                    const { stop = false, prevent = false } = handler;\n                    if (stop)\n                        e.stopPropagation();\n                    if (prevent)\n                        e.preventDefault();\n                    handler.handler(e);\n                }\n            });\n        }\n    };\n    const setup = () => {\n        if (enabledRef === undefined || enabledRef.value) {\n            on('keydown', document, keydownHandler);\n            on('keyup', document, keyupHandler);\n        }\n        if (enabledRef !== undefined) {\n            watch(enabledRef, value => {\n                if (value) {\n                    on('keydown', document, keydownHandler);\n                    on('keyup', document, keyupHandler);\n                }\n                else {\n                    off('keydown', document, keydownHandler);\n                    off('keyup', document, keyupHandler);\n                }\n            });\n        }\n    };\n    if (hasInstance()) {\n        onBeforeMount(setup);\n        onBeforeUnmount(() => {\n            if (enabledRef === undefined || enabledRef.value) {\n                off('keydown', document, keydownHandler);\n                off('keyup', document, keyupHandler);\n            }\n        });\n    }\n    else {\n        setup();\n    }\n    return readonly(state);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}