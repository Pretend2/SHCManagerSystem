{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { parseSelectorPath } from './parse';\nimport { isMediaOrSupports } from './utils';\nconst kebabRegex = /[A-Z]/g;\n\nfunction kebabCase(pattern) {\n  return pattern.replace(kebabRegex, match => '-' + match.toLowerCase());\n}\n/** TODO: refine it to solve nested object */\n\n\nfunction unwrapProperty(prop, indent = '  ') {\n  if (typeof prop === 'object' && prop !== null) {\n    return ' {\\n' + Object.entries(prop).map(v => {\n      return indent + `  ${kebabCase(v[0])}: ${v[1]};`;\n    }).join('\\n') + '\\n' + indent + '}';\n  }\n\n  return `: ${prop};`;\n}\n/** unwrap properties */\n\n\nfunction unwrapProperties(props, instance, params) {\n  if (typeof props === 'function') {\n    return props({\n      context: instance.context,\n      props: params\n    });\n  }\n\n  return props;\n}\n\nfunction createStyle(selector, props, instance, params) {\n  if (!props) return ''; // eslint-disable-next-line\n\n  const unwrappedProps = unwrapProperties(props, instance, params);\n  if (!unwrappedProps) return '';\n\n  if (typeof unwrappedProps === 'string') {\n    return `${selector} {\\n${unwrappedProps}\\n}`;\n  }\n\n  const propertyNames = Object.keys(unwrappedProps);\n\n  if (propertyNames.length === 0) {\n    if (instance.config.keepEmptyBlock) return selector + ' {\\n}';\n    return '';\n  }\n\n  const statements = selector ? [selector + ' {'] : [];\n  propertyNames.forEach(propertyName => {\n    const property = unwrappedProps[propertyName];\n\n    if (propertyName === 'raw') {\n      statements.push('\\n' + property + '\\n');\n      return;\n    }\n\n    propertyName = kebabCase(propertyName);\n\n    if (property !== null && property !== undefined) {\n      statements.push(`  ${propertyName}${unwrapProperty(property)}`);\n    }\n  });\n\n  if (selector) {\n    statements.push('}');\n  }\n\n  return statements.join('\\n');\n}\n\nfunction loopCNodeListWithCallback(children, options, callback) {\n  /* istanbul ignore if */\n  if (!children) return;\n  children.forEach(child => {\n    if (Array.isArray(child)) {\n      loopCNodeListWithCallback(child, options, callback);\n    } else if (typeof child === 'function') {\n      const grandChildren = child(options);\n\n      if (Array.isArray(grandChildren)) {\n        loopCNodeListWithCallback(grandChildren, options, callback);\n      } else if (grandChildren) {\n        callback(grandChildren);\n      }\n    } else if (child) {\n      callback(child);\n    }\n  });\n}\n\nfunction traverseCNode(node, selectorPaths, styles, instance, params, styleSheet) {\n  const $ = node.$;\n  let blockSelector = '';\n\n  if (!$ || typeof $ === 'string') {\n    if (isMediaOrSupports($)) {\n      blockSelector = $;\n    } else {\n      // as a string selector\n      selectorPaths.push($);\n    }\n  } else if (typeof $ === 'function') {\n    const selector = $({\n      context: instance.context,\n      props: params\n    });\n\n    if (isMediaOrSupports(selector)) {\n      blockSelector = selector;\n    } else {\n      // as a lazy selector\n      selectorPaths.push(selector);\n    }\n  } else {\n    // as a option selector\n    if ($.before) $.before(instance.context);\n\n    if (!$.$ || typeof $.$ === 'string') {\n      if (isMediaOrSupports($.$)) {\n        blockSelector = $.$;\n      } else {\n        // as a string selector\n        selectorPaths.push($.$);\n      }\n    } else\n      /* istanbul ignore else */\n      if ($.$) {\n        const selector = $.$({\n          context: instance.context,\n          props: params\n        });\n\n        if (isMediaOrSupports(selector)) {\n          blockSelector = selector;\n        } else {\n          // as a lazy selector\n          selectorPaths.push(selector);\n        }\n      }\n  }\n\n  const selector = parseSelectorPath(selectorPaths);\n  const style = createStyle(selector, node.props, instance, params);\n\n  if (blockSelector) {\n    styles.push(`${blockSelector} {`);\n\n    if (styleSheet && style) {\n      styleSheet.insertRule(`${blockSelector} {\\n${style}\\n}\\n`);\n    }\n  } else {\n    if (styleSheet && style) {\n      styleSheet.insertRule(style);\n    }\n\n    if (!styleSheet && style.length) styles.push(style);\n  }\n\n  if (node.children) {\n    loopCNodeListWithCallback(node.children, {\n      context: instance.context,\n      props: params\n    }, childNode => {\n      if (typeof childNode === 'string') {\n        const style = createStyle(selector, {\n          raw: childNode\n        }, instance, params);\n\n        if (styleSheet) {\n          styleSheet.insertRule(style);\n        } else {\n          styles.push(style);\n        }\n      } else {\n        traverseCNode(childNode, selectorPaths, styles, instance, params, styleSheet);\n      }\n    });\n  }\n\n  selectorPaths.pop();\n\n  if (blockSelector) {\n    styles.push('}');\n  }\n\n  if ($ && $.after) $.after(instance.context);\n}\n\nexport function render(node, instance, props, insertRule = false) {\n  const styles = [];\n  traverseCNode(node, [], styles, instance, props, insertRule ? node.instance.__styleSheet : undefined);\n  if (insertRule) return '';\n  return styles.join('\\n\\n');\n}","map":{"version":3,"names":["parseSelectorPath","isMediaOrSupports","kebabRegex","kebabCase","pattern","replace","match","toLowerCase","unwrapProperty","prop","indent","Object","entries","map","v","join","unwrapProperties","props","instance","params","context","createStyle","selector","unwrappedProps","propertyNames","keys","length","config","keepEmptyBlock","statements","forEach","propertyName","property","push","undefined","loopCNodeListWithCallback","children","options","callback","child","Array","isArray","grandChildren","traverseCNode","node","selectorPaths","styles","styleSheet","$","blockSelector","before","style","insertRule","childNode","raw","pop","after","render","__styleSheet"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/css-render/esm/render.js"],"sourcesContent":["import { parseSelectorPath } from './parse';\nimport { isMediaOrSupports } from './utils';\nconst kebabRegex = /[A-Z]/g;\nfunction kebabCase(pattern) {\n    return pattern.replace(kebabRegex, match => '-' + match.toLowerCase());\n}\n/** TODO: refine it to solve nested object */\nfunction unwrapProperty(prop, indent = '  ') {\n    if (typeof prop === 'object' && prop !== null) {\n        return (' {\\n' +\n            Object.entries(prop).map(v => {\n                return indent + `  ${kebabCase(v[0])}: ${v[1]};`;\n            }).join('\\n') +\n            '\\n' + indent + '}');\n    }\n    return `: ${prop};`;\n}\n/** unwrap properties */\nfunction unwrapProperties(props, instance, params) {\n    if (typeof props === 'function') {\n        return props({\n            context: instance.context,\n            props: params\n        });\n    }\n    return props;\n}\nfunction createStyle(selector, props, instance, params) {\n    if (!props)\n        return '';\n    // eslint-disable-next-line\n    const unwrappedProps = unwrapProperties(props, instance, params);\n    if (!unwrappedProps)\n        return '';\n    if (typeof unwrappedProps === 'string') {\n        return `${selector} {\\n${unwrappedProps}\\n}`;\n    }\n    const propertyNames = Object.keys(unwrappedProps);\n    if (propertyNames.length === 0) {\n        if (instance.config.keepEmptyBlock)\n            return selector + ' {\\n}';\n        return '';\n    }\n    const statements = selector\n        ? [\n            selector + ' {'\n        ]\n        : [];\n    propertyNames.forEach(propertyName => {\n        const property = unwrappedProps[propertyName];\n        if (propertyName === 'raw') {\n            statements.push('\\n' + property + '\\n');\n            return;\n        }\n        propertyName = kebabCase(propertyName);\n        if (property !== null && property !== undefined) {\n            statements.push(`  ${propertyName}${unwrapProperty(property)}`);\n        }\n    });\n    if (selector) {\n        statements.push('}');\n    }\n    return statements.join('\\n');\n}\nfunction loopCNodeListWithCallback(children, options, callback) {\n    /* istanbul ignore if */\n    if (!children)\n        return;\n    children.forEach(child => {\n        if (Array.isArray(child)) {\n            loopCNodeListWithCallback(child, options, callback);\n        }\n        else if (typeof child === 'function') {\n            const grandChildren = child(options);\n            if (Array.isArray(grandChildren)) {\n                loopCNodeListWithCallback(grandChildren, options, callback);\n            }\n            else if (grandChildren) {\n                callback(grandChildren);\n            }\n        }\n        else if (child) {\n            callback(child);\n        }\n    });\n}\nfunction traverseCNode(node, selectorPaths, styles, instance, params, styleSheet) {\n    const $ = node.$;\n    let blockSelector = '';\n    if (!$ || typeof $ === 'string') {\n        if (isMediaOrSupports($)) {\n            blockSelector = $;\n        }\n        else {\n            // as a string selector\n            selectorPaths.push($);\n        }\n    }\n    else if (typeof $ === 'function') {\n        const selector = $({\n            context: instance.context,\n            props: params\n        });\n        if (isMediaOrSupports(selector)) {\n            blockSelector = selector;\n        }\n        else {\n            // as a lazy selector\n            selectorPaths.push(selector);\n        }\n    }\n    else { // as a option selector\n        if ($.before)\n            $.before(instance.context);\n        if (!$.$ || typeof $.$ === 'string') {\n            if (isMediaOrSupports($.$)) {\n                blockSelector = $.$;\n            }\n            else {\n                // as a string selector\n                selectorPaths.push($.$);\n            }\n        }\n        else /* istanbul ignore else */ if ($.$) {\n            const selector = $.$({\n                context: instance.context,\n                props: params\n            });\n            if (isMediaOrSupports(selector)) {\n                blockSelector = selector;\n            }\n            else {\n                // as a lazy selector\n                selectorPaths.push(selector);\n            }\n        }\n    }\n    const selector = parseSelectorPath(selectorPaths);\n    const style = createStyle(selector, node.props, instance, params);\n    if (blockSelector) {\n        styles.push(`${blockSelector} {`);\n        if (styleSheet && style) {\n            styleSheet.insertRule(`${blockSelector} {\\n${style}\\n}\\n`);\n        }\n    }\n    else {\n        if (styleSheet && style) {\n            styleSheet.insertRule(style);\n        }\n        if (!styleSheet && style.length)\n            styles.push(style);\n    }\n    if (node.children) {\n        loopCNodeListWithCallback(node.children, {\n            context: instance.context,\n            props: params\n        }, childNode => {\n            if (typeof childNode === 'string') {\n                const style = createStyle(selector, { raw: childNode }, instance, params);\n                if (styleSheet) {\n                    styleSheet.insertRule(style);\n                }\n                else {\n                    styles.push(style);\n                }\n            }\n            else {\n                traverseCNode(childNode, selectorPaths, styles, instance, params, styleSheet);\n            }\n        });\n    }\n    selectorPaths.pop();\n    if (blockSelector) {\n        styles.push('}');\n    }\n    if ($ && $.after)\n        $.after(instance.context);\n}\nexport function render(node, instance, props, insertRule = false) {\n    const styles = [];\n    traverseCNode(node, [], styles, instance, props, insertRule\n        ? node.instance.__styleSheet\n        : undefined);\n    if (insertRule)\n        return '';\n    return styles.join('\\n\\n');\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}