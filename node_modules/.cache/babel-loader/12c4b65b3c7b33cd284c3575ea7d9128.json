{"ast":null,"code":"import { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-679af116\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"body\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 选择业主 \");\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 添加成员 \");\n\nconst _hoisted_4 = {\n  class: \"user-info\"\n};\nconst _hoisted_5 = {\n  class: \"sub-info\"\n};\nconst _hoisted_6 = {\n  class: \"sub-info\"\n};\nconst _hoisted_7 = {\n  class: \"sub-info\"\n};\nconst _hoisted_8 = {\n  class: \"sub-info\"\n};\nconst _hoisted_9 = {\n  class: \"sub-info\"\n};\nconst _hoisted_10 = {\n  class: \"sub-info\"\n};\nconst _hoisted_11 = {\n  class: \"sub-info\"\n};\nconst _hoisted_12 = {\n  class: \"sub-info\"\n};\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"成员ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"名称\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"性别\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"年龄\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"身份证\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"电话\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"备注\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"微信\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"操作\")])], -1));\n\nconst _hoisted_14 = {\n  key: 0\n};\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", {\n  colspan: \"9\",\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \"暂无数据\")], -1));\n\nconst _hoisted_16 = [_hoisted_15];\n\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"修改\");\n\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nconst _hoisted_19 = {\n  key: 0,\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_20 = {\n  class: \"selectOwnerClass\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_createTextVNode(\"搜索\");\n\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"名称\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"性别\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"年龄\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"身份证\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"电话\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"操作\")])], -1));\n\nconst _hoisted_23 = {\n  key: 0\n};\n\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"td\", {\n  colspan: \"6\",\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \"暂无数据\")], -1));\n\nconst _hoisted_25 = [_hoisted_24];\nconst _hoisted_26 = {\n  style: {\n    \"width\": \"60px\"\n  }\n};\n\nconst _hoisted_27 = /*#__PURE__*/_createTextVNode(\"选择\");\n\nconst _hoisted_28 = {\n  key: 0,\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\",\n    \"margin-top\": \"26px\"\n  }\n};\n\nconst _hoisted_29 = /*#__PURE__*/_createTextVNode(\"关闭\");\n\nconst _hoisted_30 = /*#__PURE__*/_createTextVNode(\"取消\");\n\nconst _hoisted_31 = /*#__PURE__*/_createTextVNode(\"保存 \");\n\nconst __default__ = {\n  name: 'OwnerMemberLayout'\n};\nimport { ref, inject } from 'vue'; // 引入 naive-ui 组件\n\nimport { NCard, NLayout, NLayoutSider, NLayoutFooter, NLayoutContent, NLayoutHeader, NGrid, NGridItem, NButton, NSpace, NIcon, NButtonGroup, NPagination, NTable, NEllipsis, NModal, NInputGroup, NInput, useMessage, useDialog, NSpin, NForm, NFormItem, NSelect } from 'naive-ui'; // 引入图标 \n\nimport { Add20Filled as AddIcon, Search16Filled as SearchIcon } from '@vicons/fluent'; // 引入 axios\n\nimport axios from 'axios'; // 引入工具包\n\nimport { mergeObject, createId } from '../../util/BaseUtil';\nimport QueryString from 'qs'; // 读取全局变量\n\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props) {\n    // 引入 vue \n    const global = inject(\"global\"); // 获取消息对戏\n\n    const message = useMessage(); // 获取弹窗对象\n\n    const dialog = useDialog(); // #region ===== 业主选择 =====\n    // 当前选中的业主\n\n    const ownerInfo = ref({\n      \"id\": null,\n      \"ownerNo\": null,\n      \"name\": null,\n      \"gender\": null,\n      \"age\": null,\n      \"phone\": null,\n      \"idCard\": null,\n      \"weCat\": null,\n      \"remark\": null,\n      \"isMember\": null,\n      \"memberNo\": null\n    }); // 当前选中的业主成员\n\n    const ownerMemberInfo = ref(null); // 选择业主模态框\n\n    const showSelectOwnerModel = ref(false); // 业主列表加载\n\n    const ownerLoading = ref(false); // 业主信息\n\n    const ownerData = ref([]); // 当前页码\n\n    const ownerPage = ref(1); // 总页数\n\n    const ownerPages = ref(1); // modal nameInput\n\n    const ownerNameValue = ref(null);\n    /**\r\n     * 打开模态框\r\n     */\n\n    function openSelectOwnerModel() {\n      showSelectOwnerModel.value = true;\n      findOwnerInfo();\n    } // 查询业主信息\n\n\n    function findOwnerInfo(more) {\n      const params = {\n        page: 1,\n        size: 6\n      };\n      mergeObject(params, more);\n      ownerLoading.value = true;\n      axios({\n        method: 'get',\n        url: global.api + '/getAllOwnerByOtherNo',\n        params\n      }).then(res => {\n        // 设置业主数据\n        ownerData.value = res.data.list; // 设置当前页码\n\n        ownerPage.value = res.data.pageNum; // 设置总页数\n\n        ownerPages.value = res.data.pages;\n      }).catch(err => {\n        message.error(\"业主列表加载出现异常！\" + err);\n      }).finally(() => {\n        ownerLoading.value = false;\n      });\n    }\n    /**\r\n     * 选中业主信息\r\n     */\n\n\n    function selectOwnerInfo(owner) {\n      showSelectOwnerModel.value = false;\n      ownerInfo.value = owner;\n      findOwnerMember(1); // 查询业主成员\n    }\n    /**\r\n     * 业主信息页码改变时触发\r\n     */\n\n\n    function ownerPageUpdate(page) {\n      findOwnerInfo({\n        name: ownerNameValue.value,\n        page\n      });\n    } // #endregion\n    // #region ===== 业主成员 =====\n\n\n    const ownerMemberStatus = ref(false); // false 添加 true 修改\n\n    const ownerMemberFormRef = ref(null); // 业主成员 Form 引用\n\n    const showOwnerMemberModal = ref(false); // 模态框是否打开\n    // 表单校验\n\n    const ownerMemberRules = {\n      user: {\n        name: {\n          required: true,\n          message: \"请输入姓名\",\n          trigger: \"blur\"\n        },\n        gender: {\n          required: true,\n          type: \"number\",\n          message: \"请选择性别\",\n          trigger: \"blur\"\n        },\n        age: {\n          required: true,\n          message: \"请输入年龄\",\n          trigger: \"blur\"\n        },\n        phone: {\n          required: true,\n          message: \"请输入手机号码\",\n          trigger: \"blur\"\n        }\n      }\n    }; // 表单输入数据\n\n    const ownerMemberformValue = ref({\n      user: {\n        name: \"\",\n        gender: null,\n        age: \"\",\n        idCard: \"\",\n        phone: \"\",\n        remark: \"\",\n        weCat: \"\",\n        isMember: 0\n      }\n    }); // 表单提交事件\n\n    const ownerMemberSubmit = e => {\n      e.preventDefault();\n      ownerMemberFormRef.value?.validate(errors => {\n        if (!errors) {\n          // 校验通过\n          if (!ownerMemberStatus.value) {\n            // 添加\n            addOwnerMember();\n          } else {\n            // 修改\n            updateOwnerMember(); // 修改\n          }\n        } else {// 校验不通过\n        }\n      });\n    }; // 业主添加加载\n\n\n    const ownerMemberModalLoading = ref(false); // 性别选择框数据\n\n    const ownerMemberGenderOptions = ref([{\n      label: \"男\",\n      value: 1\n    }, {\n      label: \"女\",\n      value: 0\n    }]);\n    /**\r\n     * 打开模态框\r\n     * @param {false 添加 true 修改} status\r\n     */\n\n    const openOwnerMemberModal = (status, item) => {\n      // 清空数据\n      ownerMemberformValue.value = {\n        user: {\n          name: \"\",\n          gender: null,\n          age: \"\",\n          idCard: \"\",\n          phone: \"\",\n          remark: \"\",\n          weCat: \"\",\n          isMember: 1\n        }\n      };\n\n      if (status) {\n        // 如果是修改则填充数据\n        ownerMemberInfo.value = item;\n        ownerMemberformValue.value.user.name = item.name;\n        ownerMemberformValue.value.user.gender = item.gender;\n        ownerMemberformValue.value.user.age = item.age.toString();\n        ownerMemberformValue.value.user.idCard = item.idCard;\n        ownerMemberformValue.value.user.phone = item.phone;\n        ownerMemberformValue.value.user.remark = item.remark;\n        ownerMemberformValue.value.user.weCat = item.weCat;\n        ownerMemberformValue.value.user.isMember = item.isMember;\n      } // 打开模态框\n\n\n      showOwnerMemberModal.value = true;\n      ownerMemberStatus.value = status;\n    };\n    /**\r\n     * 添加业主成员\r\n     */\n\n\n    const addOwnerMember = () => {\n      ownerMemberModalLoading.value = true;\n      ownerMemberformValue.value.user.memberNo = ownerInfo.value.ownerNo;\n      ownerMemberformValue.value.user.ownerNo = createId();\n      axios({\n        method: 'post',\n        url: global.api + '/addMemberOwner',\n        data: QueryString.stringify(ownerMemberformValue.value.user)\n      }).then(res => {\n        if (res.data.success) {\n          message.success(\"添加成功！\");\n          findOwnerMember(ownerMemberPageNo.value); // 刷新业主成员列表\n\n          showOwnerMemberModal.value = false; // 关闭模态框\n        } else {\n          message.warning(\"添加失败！\");\n        }\n      }).catch(err => {\n        message.error(\"添加业主出现异常！\" + err);\n      }).finally(() => {\n        ownerMemberModalLoading.value = false;\n      });\n    };\n    /**\r\n     * 修改业主成员信息\r\n     */\n\n\n    const updateOwnerMember = () => {\n      ownerMemberModalLoading.value = true;\n      ownerMemberformValue.value.user.id = ownerMemberInfo.value.id;\n      ownerMemberformValue.value.user.ownerNo = ownerMemberInfo.value.ownerNo;\n      axios({\n        method: 'post',\n        url: global.api + '/updateOwner',\n        data: QueryString.stringify(ownerMemberformValue.value.user)\n      }).then(res => {\n        if (res.data.success) {\n          message.success(\"修改成功！\");\n          findOwnerMember(ownerMemberPageNo.value); // 刷新业主成员列表\n\n          showOwnerMemberModal.value = false; // 关闭模态框\n        } else {\n          message.warning(\"修改失败！\");\n        }\n      }).catch(err => {\n        message.error(\"修改业主成员出现异常！\" + err);\n      }).finally(() => {\n        ownerMemberModalLoading.value = false;\n      });\n    };\n    /**\r\n     * 删除业主信息\r\n     * @param {*} id  业主编号\r\n     */\n\n\n    const deleteOwnerMember = (id, name) => {\n      dialog.warning({\n        title: \"请确认您的操作!\",\n        content: \"确认是否删除\" + name + \"!\",\n        positiveText: \"确认删除\",\n        negativeText: \"取消\",\n        onPositiveClick: () => {\n          let delLoading = message.loading(\"正在删除\");\n          axios({\n            method: 'delete',\n            url: global.api + '/deleteOwner/' + id\n          }).then(res => {\n            if (res.data.success) {\n              message.success(\"删除成功！\");\n              findOwnerMember(ownerMemberPageNo.value); // 刷新业主成员列表\n            } else {\n              message.warning(\"删除失败！\");\n            }\n          }).catch(err => {\n            message.error(\"删除出现异常！\" + err);\n          }).finally(() => {\n            delLoading.destroy();\n            delLoading = null;\n          });\n        }\n      });\n    }; // 业主成员信息\n\n\n    const ownerMemberData = ref([]); // 业主成员加载\n\n    const ownerMemberLoading = ref(false); // 当前页码\n\n    const ownerMemberPageNo = ref(1); // 总页数\n\n    const ownerMemberPages = ref(1);\n    /**\r\n     * 查询业主成员信息\r\n     */\n\n    const findOwnerMember = page => {\n      ownerMemberLoading.value = true;\n      axios({\n        method: 'get',\n        url: global.api + '/getMemberInfoByOwnerNo',\n        params: {\n          page,\n          size: global.pageSize,\n          ownerNo: ownerInfo.value.ownerNo\n        }\n      }).then(res => {\n        // 设置数据\n        ownerMemberData.value = res.data.list; // 设置当前页码\n\n        ownerMemberPageNo.value = res.data.pageNum; // 设置总页数\n\n        ownerMemberPages.value = res.data.pages;\n      }).catch(err => {\n        message.error('业主成员查询出现异常！' + err);\n      }).finally(() => {\n        ownerMemberLoading.value = false;\n      });\n    };\n    /**\r\n     * 业主成员页码发生变化时触发\r\n     */\n\n\n    const ownerMemberPageUpdate = page => {\n      findOwnerMember(page);\n    }; // #endregion\n\n\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_unref(NCard), {\n        title: \"业主信息\"\n      }, {\n        \"header-extra\": _withCtx(() => [_createVNode(_unref(NSpace), null, {\n          default: _withCtx(() => [_createVNode(_unref(NButton), {\n            onClick: openSelectOwnerModel,\n            type: \"primary\"\n          }, {\n            icon: _withCtx(() => [_createVNode(_unref(NIcon), null, {\n              default: _withCtx(() => [_createVNode(_unref(SearchIcon))]),\n              _: 1\n            })]),\n            default: _withCtx(() => [_hoisted_2]),\n            _: 1\n          }), ownerInfo.value.id != null ? (_openBlock(), _createBlock(_unref(NButton), {\n            key: 0,\n            onClick: _cache[0] || (_cache[0] = $event => openOwnerMemberModal(false)),\n            type: \"primary\"\n          }, {\n            icon: _withCtx(() => [_createVNode(_unref(NIcon), null, {\n              default: _withCtx(() => [_createVNode(_unref(AddIcon))]),\n              _: 1\n            })]),\n            default: _withCtx(() => [_hoisted_3]),\n            _: 1\n          })) : _createCommentVNode(\"\", true)]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_unref(NGrid), {\n          \"y-gap\": 16,\n          style: {\n            \"margin-left\": \"16px\"\n          },\n          cols: \"1 400:2 600:3\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, \" 业主ID：\" + _toDisplayString(ownerInfo.value.ownerNo), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, \" 名称：\" + _toDisplayString(ownerInfo.value.name), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, \" 性别：\" + _toDisplayString(ownerInfo.value.gender === 1 ? '男' : ownerInfo.value.gender === 0 ? '女' : ''), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, \" 年龄：\" + _toDisplayString(ownerInfo.value.age), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, \" 身份证：\" + _toDisplayString(ownerInfo.value.idCard), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_10, \" 联系方式：\" + _toDisplayString(ownerInfo.value.phone), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_11, \" 微信：\" + _toDisplayString(ownerInfo.value.weCat), 1)]),\n            _: 1\n          }), _createVNode(_unref(NGridItem), null, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_12, \" 备注：\" + _toDisplayString(ownerInfo.value.remark), 1)]),\n            _: 1\n          })]),\n          _: 1\n        })])]),\n        _: 1\n      }), _createVNode(_unref(NSpin), {\n        show: ownerMemberLoading.value\n      }, {\n        default: _withCtx(() => [_createVNode(_unref(NTable), {\n          style: {\n            \"margin-top\": \"10px\"\n          },\n          striped: \"\"\n        }, {\n          default: _withCtx(() => [_hoisted_13, ownerMemberData.value.length <= 0 ? (_openBlock(), _createElementBlock(\"tbody\", _hoisted_14, _hoisted_16)) : _createCommentVNode(\"\", true), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ownerMemberData.value, (item, index) => {\n            return _openBlock(), _createElementBlock(\"tr\", {\n              key: index\n            }, [_createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n              style: {\n                \"max-width\": \"160px\"\n              }\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(item.ownerNo), 1)]),\n              _: 2\n            }, 1024)]), _createElementVNode(\"td\", null, _toDisplayString(item.name), 1), _createElementVNode(\"td\", null, _toDisplayString(item.gender === 1 ? '男' : item.gender === 0 ? '女' : ''), 1), _createElementVNode(\"td\", null, _toDisplayString(item.age), 1), _createElementVNode(\"td\", null, _toDisplayString(item.idCard), 1), _createElementVNode(\"td\", null, _toDisplayString(item.phone), 1), _createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n              style: {\n                \"max-width\": \"100px\"\n              }\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(item.remark), 1)]),\n              _: 2\n            }, 1024)]), _createElementVNode(\"td\", null, _toDisplayString(item.weCat), 1), _createElementVNode(\"td\", null, [_createVNode(_unref(NButtonGroup), {\n              size: \"large\"\n            }, {\n              default: _withCtx(() => [_createVNode(_unref(NButton), {\n                size: \"small\",\n                onClick: $event => openOwnerMemberModal(true, item)\n              }, {\n                default: _withCtx(() => [_hoisted_17]),\n                _: 2\n              }, 1032, [\"onClick\"]), _createVNode(_unref(NButton), {\n                type: \"error\",\n                onClick: $event => deleteOwnerMember(item.id, item.name),\n                size: \"small\",\n                strong: \"\",\n                secondary: \"\"\n              }, {\n                default: _withCtx(() => [_hoisted_18]),\n                _: 2\n              }, 1032, [\"onClick\"])]),\n              _: 2\n            }, 1024)])]);\n          }), 128))])]),\n          _: 1\n        }), ownerMemberPages.value > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createVNode(_unref(NPagination), {\n          \"onUpdate:page\": ownerMemberPageUpdate,\n          \"page-count\": ownerMemberPages.value\n        }, null, 8, [\"page-count\"])])) : _createCommentVNode(\"\", true)]),\n        _: 1\n      }, 8, [\"show\"]), _createVNode(_unref(NModal), {\n        \"auto-focus\": false,\n        show: showSelectOwnerModel.value,\n        \"onUpdate:show\": _cache[4] || (_cache[4] = $event => showSelectOwnerModel.value = $event),\n        class: \"custom-card\",\n        preset: \"card\",\n        style: {\n          \"width\": \"800px\"\n        },\n        title: \"选择业主\",\n        \"transform-origin\": \"center\",\n        size: \"huge\",\n        bordered: false,\n        segmented: {\n          content: 'soft',\n          footer: 'soft'\n        }\n      }, {\n        footer: _withCtx(() => [_createVNode(_unref(NSpace), {\n          justify: \"end\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(NButton), {\n            onClick: _cache[3] || (_cache[3] = $event => showSelectOwnerModel.value = false)\n          }, {\n            default: _withCtx(() => [_hoisted_29]),\n            _: 1\n          })]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createVNode(_unref(NSpin), {\n          show: ownerLoading.value\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_20, [_createVNode(_unref(NInputGroup), null, {\n            default: _withCtx(() => [_createVNode(_unref(NInput), {\n              value: ownerNameValue.value,\n              \"onUpdate:value\": _cache[1] || (_cache[1] = $event => ownerNameValue.value = $event),\n              type: \"text\",\n              placeholder: \"请输入业主姓名\"\n            }, null, 8, [\"value\"]), _createVNode(_unref(NButton), {\n              onClick: _cache[2] || (_cache[2] = $event => findOwnerInfo({\n                name: ownerNameValue.value\n              })),\n              type: \"primary\"\n            }, {\n              default: _withCtx(() => [_hoisted_21]),\n              _: 1\n            })]),\n            _: 1\n          })]), _createVNode(_unref(NTable), {\n            style: {\n              \"margin-top\": \"16px\"\n            },\n            striped: \"\"\n          }, {\n            default: _withCtx(() => [_hoisted_22, ownerData.value.length <= 0 ? (_openBlock(), _createElementBlock(\"tbody\", _hoisted_23, _hoisted_25)) : _createCommentVNode(\"\", true), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ownerData.value, (item, index) => {\n              return _openBlock(), _createElementBlock(\"tr\", {\n                key: index\n              }, [_createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n                style: {\n                  \"max-width\": \"100px\"\n                }\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(item.name), 1)]),\n                _: 2\n              }, 1024)]), _createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n                style: {\n                  \"max-width\": \"100px\"\n                }\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(item.gender === 1 ? '男' : '女'), 1)]),\n                _: 2\n              }, 1024)]), _createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n                style: {\n                  \"max-width\": \"100px\"\n                }\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(item.age), 1)]),\n                _: 2\n              }, 1024)]), _createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n                style: {\n                  \"max-width\": \"160px\"\n                }\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(item.idCard), 1)]),\n                _: 2\n              }, 1024)]), _createElementVNode(\"td\", null, [_createVNode(_unref(NEllipsis), {\n                style: {\n                  \"max-width\": \"100px\"\n                }\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString(item.phone), 1)]),\n                _: 2\n              }, 1024)]), _createElementVNode(\"td\", _hoisted_26, [_createVNode(_unref(NButtonGroup), {\n                size: \"large\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NButton), {\n                  onClick: $event => selectOwnerInfo(item),\n                  size: \"small\",\n                  type: \"primary\"\n                }, {\n                  default: _withCtx(() => [_hoisted_27]),\n                  _: 2\n                }, 1032, [\"onClick\"])]),\n                _: 2\n              }, 1024)])]);\n            }), 128))])]),\n            _: 1\n          }), ownerPages.value > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [_createVNode(_unref(NPagination), {\n            \"onUpdate:page\": ownerPageUpdate,\n            \"page-count\": ownerPages.value\n          }, null, 8, [\"page-count\"])])) : _createCommentVNode(\"\", true)]),\n          _: 1\n        }, 8, [\"show\"])]),\n        _: 1\n      }, 8, [\"show\"]), _createVNode(_unref(NModal), {\n        \"auto-focus\": false,\n        show: showOwnerMemberModal.value,\n        \"onUpdate:show\": _cache[13] || (_cache[13] = $event => showOwnerMemberModal.value = $event),\n        class: \"custom-card\",\n        preset: \"card\",\n        style: {\n          \"width\": \"800px\"\n        },\n        title: ownerMemberStatus.value ? '修改' : '添加' + '业主',\n        \"transform-origin\": \"center\",\n        size: \"huge\",\n        bordered: false,\n        segmented: {\n          content: 'soft',\n          footer: 'soft'\n        }\n      }, {\n        footer: _withCtx(() => [_createVNode(_unref(NSpace), {\n          justify: \"end\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(NButton), {\n            onClick: _cache[12] || (_cache[12] = $event => showOwnerMemberModal.value = false)\n          }, {\n            default: _withCtx(() => [_hoisted_30]),\n            _: 1\n          }), _createVNode(_unref(NButton), {\n            loading: ownerMemberModalLoading.value,\n            type: \"primary\",\n            \"attr-type\": \"button\",\n            onClick: ownerMemberSubmit\n          }, {\n            default: _withCtx(() => [_hoisted_31]),\n            _: 1\n          }, 8, [\"loading\"])]),\n          _: 1\n        })]),\n        default: _withCtx(() => [_createVNode(_unref(NForm), {\n          ref_key: \"ownerMemberFormRef\",\n          ref: ownerMemberFormRef,\n          \"label-placement\": \"left\",\n          \"label-width\": 80,\n          model: ownerMemberformValue.value,\n          rules: ownerMemberRules,\n          size: \"medium\"\n        }, {\n          default: _withCtx(() => [_createVNode(_unref(NGrid), {\n            cols: \"1 600:2\"\n          }, {\n            default: _withCtx(() => [_createVNode(_unref(NGridItem), null, {\n              default: _withCtx(() => [_createVNode(_unref(NFormItem), {\n                label: \"姓名\",\n                path: \"user.name\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.name,\n                  \"onUpdate:value\": _cache[5] || (_cache[5] = $event => ownerMemberformValue.value.user.name = $event),\n                  placeholder: \"输入姓名\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              }), _createVNode(_unref(NFormItem), {\n                label: \"性别\",\n                path: \"user.gender\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NSelect), {\n                  value: ownerMemberformValue.value.user.gender,\n                  \"onUpdate:value\": _cache[6] || (_cache[6] = $event => ownerMemberformValue.value.user.gender = $event),\n                  placeholder: \"输入性别\",\n                  options: ownerMemberGenderOptions.value\n                }, null, 8, [\"value\", \"options\"])]),\n                _: 1\n              }), _createVNode(_unref(NFormItem), {\n                label: \"年龄\",\n                path: \"user.age\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.age,\n                  \"onUpdate:value\": _cache[7] || (_cache[7] = $event => ownerMemberformValue.value.user.age = $event),\n                  placeholder: \"输入年龄\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              }), _createVNode(_unref(NFormItem), {\n                label: \"身份证\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.idCard,\n                  \"onUpdate:value\": _cache[8] || (_cache[8] = $event => ownerMemberformValue.value.user.idCard = $event),\n                  placeholder: \"输入身份证\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              })]),\n              _: 1\n            }), _createVNode(_unref(NGridItem), null, {\n              default: _withCtx(() => [_createVNode(_unref(NFormItem), {\n                label: \"手机\",\n                path: \"user.phone\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.phone,\n                  \"onUpdate:value\": _cache[9] || (_cache[9] = $event => ownerMemberformValue.value.user.phone = $event),\n                  placeholder: \"输入手机号码\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              }), _createVNode(_unref(NFormItem), {\n                label: \"备注\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.remark,\n                  \"onUpdate:value\": _cache[10] || (_cache[10] = $event => ownerMemberformValue.value.user.remark = $event),\n                  placeholder: \"输入备注\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              }), _createVNode(_unref(NFormItem), {\n                label: \"微信\"\n              }, {\n                default: _withCtx(() => [_createVNode(_unref(NInput), {\n                  value: ownerMemberformValue.value.user.weCat,\n                  \"onUpdate:value\": _cache[11] || (_cache[11] = $event => ownerMemberformValue.value.user.weCat = $event),\n                  placeholder: \"输入微信\"\n                }, null, 8, [\"value\"])]),\n                _: 1\n              })]),\n              _: 1\n            })]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"model\"])]),\n        _: 1\n      }, 8, [\"show\", \"title\"])]);\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["name","ref","inject","NCard","NLayout","NLayoutSider","NLayoutFooter","NLayoutContent","NLayoutHeader","NGrid","NGridItem","NButton","NSpace","NIcon","NButtonGroup","NPagination","NTable","NEllipsis","NModal","NInputGroup","NInput","useMessage","useDialog","NSpin","NForm","NFormItem","NSelect","Add20Filled","AddIcon","Search16Filled","SearchIcon","axios","mergeObject","createId","QueryString","global","message","dialog","ownerInfo","ownerMemberInfo","showSelectOwnerModel","ownerLoading","ownerData","ownerPage","ownerPages","ownerNameValue","openSelectOwnerModel","value","findOwnerInfo","more","params","page","size","method","url","api","then","res","data","list","pageNum","pages","catch","err","error","finally","selectOwnerInfo","owner","findOwnerMember","ownerPageUpdate","ownerMemberStatus","ownerMemberFormRef","showOwnerMemberModal","ownerMemberRules","user","required","trigger","gender","type","age","phone","ownerMemberformValue","idCard","remark","weCat","isMember","ownerMemberSubmit","e","preventDefault","validate","errors","addOwnerMember","updateOwnerMember","ownerMemberModalLoading","ownerMemberGenderOptions","label","openOwnerMemberModal","status","item","toString","memberNo","ownerNo","stringify","success","ownerMemberPageNo","warning","id","deleteOwnerMember","title","content","positiveText","negativeText","onPositiveClick","delLoading","loading","destroy","ownerMemberData","ownerMemberLoading","ownerMemberPages","pageSize","ownerMemberPageUpdate"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/src/layout/real_estate/OwnerMemberLayout.vue"],"sourcesContent":["<template>\r\n    <div class=\"body\">\r\n        <n-card title=\"业主信息\">\r\n            <template #header-extra>\r\n                <n-space>\r\n                    <n-button @click=\"openSelectOwnerModel\" type=\"primary\">\r\n                        <template #icon>\r\n                            <n-icon>\r\n                                <search-icon />\r\n                            </n-icon>\r\n                        </template>\r\n                        选择业主\r\n                    </n-button>\r\n                    <n-button v-if=\"ownerInfo.id != null\" @click=\"openOwnerMemberModal(false)\" type=\"primary\">\r\n                        <template #icon>\r\n                            <n-icon>\r\n                                <add-icon />\r\n                            </n-icon>\r\n                        </template>\r\n                        添加成员\r\n                    </n-button>\r\n                </n-space>\r\n            </template>\r\n            <div class=\"user-info\">\r\n                <!-- <img class=\"photo\" src=\"../../assets/user/noPhoto.jpg\" /> -->\r\n                <n-grid :y-gap=\"16\" style=\"margin-left: 16px;\" cols=\"1 400:2 600:3\">\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            业主ID：{{ ownerInfo.ownerNo }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            名称：{{ ownerInfo.name }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            性别：{{ ownerInfo.gender === 1 ? '男' : ownerInfo.gender === 0 ? '女' : '' }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            年龄：{{ ownerInfo.age }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            身份证：{{ ownerInfo.idCard }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            联系方式：{{ ownerInfo.phone }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            微信：{{ ownerInfo.weCat }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            备注：{{ ownerInfo.remark }}\r\n                        </div>\r\n                    </n-grid-item>\r\n                </n-grid>\r\n            </div>\r\n        </n-card>\r\n\r\n        <n-spin :show=\"ownerMemberLoading\">\r\n            <n-table style=\"margin-top: 10px\" striped>\r\n                <thead>\r\n                    <tr>\r\n                        <th>成员ID</th>\r\n                        <th>名称</th>\r\n                        <th>性别</th>\r\n                        <th>年龄</th>\r\n                        <th>身份证</th>\r\n                        <th>电话</th>\r\n                        <th>备注</th>\r\n                        <th>微信</th>\r\n                        <th>操作</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody v-if=\"ownerMemberData.length <= 0\">\r\n                    <tr>\r\n                        <td colspan=\"9\" style=\"text-align:center;\">暂无数据</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody>\r\n                    <tr v-for=\"(item, index) in ownerMemberData\" :key=\"index\">\r\n                        <td>\r\n                            <n-ellipsis style=\"max-width: 160px\">\r\n                                {{ item.ownerNo }}\r\n                            </n-ellipsis>\r\n                        </td>\r\n                        <td>{{ item.name }}</td>\r\n                        <td>{{ item.gender === 1 ? '男' : item.gender === 0 ? '女' : '' }}</td>\r\n                        <td>{{ item.age }}</td>\r\n                        <td>{{ item.idCard }}</td>\r\n                        <td>{{ item.phone }}</td>\r\n                        <td>\r\n                            <n-ellipsis style=\"max-width: 100px\">\r\n                                {{ item.remark }}\r\n                            </n-ellipsis>\r\n                        </td>\r\n                        <td>{{ item.weCat }}</td>\r\n                        <td>\r\n                            <n-button-group size=\"large\">\r\n                                <n-button size=\"small\" @click=\"openOwnerMemberModal(true, item)\">修改</n-button>\r\n                                <n-button type=\"error\" @click=\"deleteOwnerMember(item.id,item.name)\" size=\"small\" strong secondary>删除</n-button>\r\n                            </n-button-group>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </n-table>\r\n\r\n            <div v-if=\"ownerMemberPages > 1\"\r\n                style=\"display: flex;justify-content: center;align-items: center;margin-top: 10px;\">\r\n                <n-pagination @update:page=\"ownerMemberPageUpdate\" :page-count=\"ownerMemberPages\" />\r\n            </div>\r\n        </n-spin>\r\n\r\n        <!-- 业主信息模态框 -->\r\n        <n-modal :auto-focus=\"false\" v-model:show=\"showSelectOwnerModel\" class=\"custom-card\" preset=\"card\"\r\n            style=\"width: 800px\" title=\"选择业主\" transform-origin=\"center\" size=\"huge\" :bordered=\"false\"\r\n            :segmented=\"{ content: 'soft', footer: 'soft' }\">\r\n\r\n            <n-spin :show=\"ownerLoading\">\r\n\r\n                <div class=\"selectOwnerClass\">\r\n                    <n-input-group>\r\n                        <n-input v-model:value=\"ownerNameValue\" type=\"text\" placeholder=\"请输入业主姓名\" />\r\n                        <n-button @click=\"findOwnerInfo({ name: ownerNameValue })\" type=\"primary\">搜索</n-button>\r\n                    </n-input-group>\r\n                </div>\r\n\r\n                <n-table style=\"margin-top: 16px\" striped>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>名称</th>\r\n                            <th>性别</th>\r\n                            <th>年龄</th>\r\n                            <th>身份证</th>\r\n                            <th>电话</th>\r\n                            <th>操作</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody v-if=\"ownerData.length <= 0\">\r\n                        <tr>\r\n                            <td colspan=\"6\" style=\"text-align:center;\">暂无数据</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr v-for=\"(item, index) in ownerData\" :key=\"index\">\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.name }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.gender === 1 ? '男' : '女' }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.age }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 160px\">\r\n                                    {{ item.idCard }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.phone }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td style=\"width: 60px\">\r\n                                <n-button-group size=\"large\">\r\n                                    <n-button @click=\"selectOwnerInfo(item)\" size=\"small\" type=\"primary\">选择</n-button>\r\n                                </n-button-group>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </n-table>\r\n\r\n                <div v-if=\"ownerPages > 1\"\r\n                    style=\"display: flex;justify-content: center;align-items: center;margin-top: 26px;\">\r\n                    <n-pagination @update:page=\"ownerPageUpdate\" :page-count=\"ownerPages\" />\r\n                </div>\r\n\r\n            </n-spin>\r\n\r\n\r\n            <template #footer>\r\n                <n-space justify=\"end\">\r\n                    <n-button @click=\"showSelectOwnerModel = false\">关闭</n-button>\r\n                </n-space>\r\n            </template>\r\n        </n-modal>\r\n\r\n        <!-- 业主成员信息模态框 -->\r\n        <n-modal :auto-focus=\"false\" v-model:show=\"showOwnerMemberModal\" class=\"custom-card\" preset=\"card\"\r\n            style=\"width: 800px\" :title=\"ownerMemberStatus ? '修改' : '添加' + '业主'\" transform-origin=\"center\" size=\"huge\"\r\n            :bordered=\"false\" :segmented=\"{ content: 'soft', footer: 'soft' }\">\r\n            <n-form ref=\"ownerMemberFormRef\" label-placement=\"left\" :label-width=\"80\" :model=\"ownerMemberformValue\"\r\n                :rules=\"ownerMemberRules\" size=\"medium\">\r\n                <n-grid cols=\"1 600:2\">\r\n                    <n-grid-item>\r\n                        <n-form-item label=\"姓名\" path=\"user.name\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.name\" placeholder=\"输入姓名\" />\r\n                        </n-form-item>\r\n                        <n-form-item label=\"性别\" path=\"user.gender\">\r\n                            <n-select v-model:value=\"ownerMemberformValue.user.gender\" placeholder=\"输入性别\"\r\n                                :options=\"ownerMemberGenderOptions\" />\r\n                        </n-form-item>\r\n                        <n-form-item label=\"年龄\" path=\"user.age\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.age\" placeholder=\"输入年龄\" />\r\n                        </n-form-item>\r\n                        <n-form-item label=\"身份证\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.idCard\" placeholder=\"输入身份证\" />\r\n                        </n-form-item>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <n-form-item label=\"手机\" path=\"user.phone\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.phone\" placeholder=\"输入手机号码\" />\r\n                        </n-form-item>\r\n                        <n-form-item label=\"备注\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.remark\" placeholder=\"输入备注\" />\r\n                        </n-form-item>\r\n                        <n-form-item label=\"微信\">\r\n                            <n-input v-model:value=\"ownerMemberformValue.user.weCat\" placeholder=\"输入微信\" />\r\n                        </n-form-item>\r\n                    </n-grid-item>\r\n                </n-grid>\r\n            </n-form>\r\n            <template #footer>\r\n                <n-space justify=\"end\">\r\n                    <n-button @click=\"showOwnerMemberModal = false\">取消</n-button>\r\n                    <n-button :loading=\"ownerMemberModalLoading\" type=\"primary\" attr-type=\"button\"\r\n                        @click=\"ownerMemberSubmit\">保存\r\n                    </n-button>\r\n                </n-space>\r\n            </template>\r\n        </n-modal>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n// 引入 vue \r\nimport { ref, inject } from 'vue';\r\n// 引入 naive-ui 组件\r\nimport {\r\n    NCard, NLayout, NLayoutSider, NLayoutFooter,\r\n    NLayoutContent, NLayoutHeader, NGrid, NGridItem,\r\n    NButton, NSpace, NIcon, NButtonGroup, NPagination,\r\n    NTable, NEllipsis, NModal, NInputGroup, NInput,\r\n    useMessage, useDialog, NSpin, NForm, NFormItem,\r\n    NSelect\r\n} from 'naive-ui';\r\n// 引入图标 \r\nimport {\r\n    Add20Filled as AddIcon,\r\n    Search16Filled as SearchIcon\r\n} from '@vicons/fluent'\r\n// 引入 axios\r\nimport axios from 'axios'\r\n// 引入工具包\r\nimport { mergeObject, createId } from '../../util/BaseUtil'\r\nimport QueryString from 'qs'\r\n\r\n// 读取全局变量\r\nconst global = inject(\"global\")\r\n// 获取消息对戏\r\nconst message = useMessage()\r\n// 获取弹窗对象\r\nconst dialog = useDialog()\r\n\r\n// #region ===== 业主选择 =====\r\n// 当前选中的业主\r\nconst ownerInfo = ref({\r\n    \"id\": null,\r\n    \"ownerNo\": null,\r\n    \"name\": null,\r\n    \"gender\": null,\r\n    \"age\": null,\r\n    \"phone\": null,\r\n    \"idCard\": null,\r\n    \"weCat\": null,\r\n    \"remark\": null,\r\n    \"isMember\": null,\r\n    \"memberNo\": null\r\n})\r\n// 当前选中的业主成员\r\nconst ownerMemberInfo = ref(null)\r\n// 选择业主模态框\r\nconst showSelectOwnerModel = ref(false)\r\n// 业主列表加载\r\nconst ownerLoading = ref(false)\r\n// 业主信息\r\nconst ownerData = ref([])\r\n// 当前页码\r\nconst ownerPage = ref(1)\r\n// 总页数\r\nconst ownerPages = ref(1)\r\n// modal nameInput\r\nconst ownerNameValue = ref(null)\r\n/**\r\n * 打开模态框\r\n */\r\nfunction openSelectOwnerModel() {\r\n    showSelectOwnerModel.value = true\r\n    findOwnerInfo()\r\n}\r\n// 查询业主信息\r\nfunction findOwnerInfo(more) {\r\n    const params = {\r\n        page: 1,\r\n        size: 6,\r\n    }\r\n    mergeObject(params, more)\r\n    ownerLoading.value = true\r\n    axios({\r\n        method: 'get',\r\n        url: global.api + '/getAllOwnerByOtherNo',\r\n        params\r\n    }).then(res => {\r\n        // 设置业主数据\r\n        ownerData.value = res.data.list\r\n        // 设置当前页码\r\n        ownerPage.value = res.data.pageNum\r\n        // 设置总页数\r\n        ownerPages.value = res.data.pages\r\n    }).catch(err => {\r\n        message.error(\"业主列表加载出现异常！\" + err)\r\n    }).finally(() => {\r\n        ownerLoading.value = false\r\n    })\r\n}\r\n/**\r\n * 选中业主信息\r\n */\r\nfunction selectOwnerInfo(owner) {\r\n    showSelectOwnerModel.value = false\r\n    ownerInfo.value = owner\r\n    findOwnerMember(1) // 查询业主成员\r\n}\r\n/**\r\n * 业主信息页码改变时触发\r\n */\r\nfunction ownerPageUpdate(page) {\r\n    findOwnerInfo({\r\n        name: ownerNameValue.value,\r\n        page\r\n    })\r\n}\r\n// #endregion\r\n\r\n// #region ===== 业主成员 =====\r\nconst ownerMemberStatus = ref(false); // false 添加 true 修改\r\nconst ownerMemberFormRef = ref(null); // 业主成员 Form 引用\r\nconst showOwnerMemberModal = ref(false) // 模态框是否打开\r\n\r\n// 表单校验\r\nconst ownerMemberRules = {\r\n    user: {\r\n        name: {\r\n            required: true,\r\n            message: \"请输入姓名\",\r\n            trigger: \"blur\"\r\n        },\r\n        gender: {\r\n            required: true,\r\n            type: \"number\",\r\n            message: \"请选择性别\",\r\n            trigger: \"blur\"\r\n        },\r\n        age: {\r\n            required: true,\r\n            message: \"请输入年龄\",\r\n            trigger: \"blur\"\r\n        },\r\n        phone: {\r\n            required: true,\r\n            message: \"请输入手机号码\",\r\n            trigger: \"blur\"\r\n        },\r\n    },\r\n}\r\n// 表单输入数据\r\nconst ownerMemberformValue = ref({\r\n    user: {\r\n        name: \"\",\r\n        gender: null,\r\n        age: \"\",\r\n        idCard: \"\",\r\n        phone: \"\",\r\n        remark: \"\",\r\n        weCat: \"\",\r\n        isMember: 0\r\n    },\r\n})\r\n\r\n// 表单提交事件\r\nconst ownerMemberSubmit = (e) => {\r\n    e.preventDefault();\r\n    ownerMemberFormRef.value?.validate((errors) => {\r\n        if (!errors) {\r\n            // 校验通过\r\n            if (!ownerMemberStatus.value) { // 添加\r\n                addOwnerMember()\r\n            } else { // 修改\r\n                updateOwnerMember() // 修改\r\n            }\r\n        } else {\r\n            // 校验不通过\r\n        }\r\n    });\r\n}\r\n\r\n// 业主添加加载\r\nconst ownerMemberModalLoading = ref(false)\r\n\r\n// 性别选择框数据\r\nconst ownerMemberGenderOptions = ref([\r\n    {\r\n        label: \"男\",\r\n        value: 1\r\n    },\r\n    {\r\n        label: \"女\",\r\n        value: 0\r\n    }\r\n])\r\n\r\n/**\r\n * 打开模态框\r\n * @param {false 添加 true 修改} status\r\n */\r\nconst openOwnerMemberModal = (status, item) => {\r\n    // 清空数据\r\n    ownerMemberformValue.value = {\r\n        user: {\r\n            name: \"\",\r\n            gender: null,\r\n            age: \"\",\r\n            idCard: \"\",\r\n            phone: \"\",\r\n            remark: \"\",\r\n            weCat: \"\",\r\n            isMember: 1\r\n        },\r\n    }\r\n    if (status) { // 如果是修改则填充数据\r\n        ownerMemberInfo.value = item\r\n        ownerMemberformValue.value.user.name = item.name\r\n        ownerMemberformValue.value.user.gender = item.gender\r\n        ownerMemberformValue.value.user.age = item.age.toString()\r\n        ownerMemberformValue.value.user.idCard = item.idCard\r\n        ownerMemberformValue.value.user.phone = item.phone\r\n        ownerMemberformValue.value.user.remark = item.remark\r\n        ownerMemberformValue.value.user.weCat = item.weCat\r\n        ownerMemberformValue.value.user.isMember = item.isMember\r\n    }\r\n    // 打开模态框\r\n    showOwnerMemberModal.value = true;\r\n    ownerMemberStatus.value = status\r\n}\r\n\r\n/**\r\n * 添加业主成员\r\n */\r\nconst addOwnerMember = () => {\r\n    ownerMemberModalLoading.value = true\r\n    ownerMemberformValue.value.user.memberNo = ownerInfo.value.ownerNo\r\n    ownerMemberformValue.value.user.ownerNo = createId()\r\n    axios({\r\n        method: 'post',\r\n        url: global.api + '/addMemberOwner',\r\n        data: QueryString.stringify(ownerMemberformValue.value.user)\r\n    }).then(res => {\r\n        if (res.data.success) {\r\n            message.success(\"添加成功！\")\r\n            findOwnerMember(ownerMemberPageNo.value) // 刷新业主成员列表\r\n            showOwnerMemberModal.value = false // 关闭模态框\r\n        } else {\r\n            message.warning(\"添加失败！\")\r\n        }\r\n    }).catch(err => {\r\n        message.error(\"添加业主出现异常！\" + err)\r\n    }).finally(() => {\r\n        ownerMemberModalLoading.value = false\r\n    })\r\n}\r\n\r\n/**\r\n * 修改业主成员信息\r\n */\r\nconst updateOwnerMember = () => {\r\n    ownerMemberModalLoading.value = true\r\n    ownerMemberformValue.value.user.id = ownerMemberInfo.value.id\r\n    ownerMemberformValue.value.user.ownerNo = ownerMemberInfo.value.ownerNo\r\n    axios({\r\n        method: 'post',\r\n        url: global.api + '/updateOwner',\r\n        data: QueryString.stringify(ownerMemberformValue.value.user)\r\n    }).then(res => {\r\n        if (res.data.success) {\r\n            message.success(\"修改成功！\")\r\n            findOwnerMember(ownerMemberPageNo.value) // 刷新业主成员列表\r\n            showOwnerMemberModal.value = false // 关闭模态框\r\n        } else {\r\n            message.warning(\"修改失败！\")\r\n        }\r\n    }).catch(err => {\r\n        message.error(\"修改业主成员出现异常！\" + err)\r\n    }).finally(() => {\r\n        ownerMemberModalLoading.value = false\r\n    })\r\n}\r\n\r\n/**\r\n * 删除业主信息\r\n * @param {*} id  业主编号\r\n */\r\nconst deleteOwnerMember = (id, name) => {\r\n    dialog.warning({\r\n        title: \"请确认您的操作!\",\r\n        content: \"确认是否删除\" + name + \"!\",\r\n        positiveText: \"确认删除\",\r\n        negativeText: \"取消\",\r\n        onPositiveClick: () => {\r\n            let delLoading = message.loading(\"正在删除\")\r\n            axios({\r\n                method: 'delete',\r\n                url: global.api + '/deleteOwner/' + id\r\n            }).then(res => {\r\n                if (res.data.success) {\r\n                    message.success(\"删除成功！\")\r\n                    findOwnerMember(ownerMemberPageNo.value) // 刷新业主成员列表\r\n                } else {\r\n                    message.warning(\"删除失败！\")\r\n                }\r\n            }).catch(err => {\r\n                message.error(\"删除出现异常！\" + err)\r\n            }).finally(() => {\r\n                delLoading.destroy();\r\n                delLoading = null;\r\n            })\r\n        }\r\n    });\r\n}\r\n\r\n// 业主成员信息\r\nconst ownerMemberData = ref([])\r\n// 业主成员加载\r\nconst ownerMemberLoading = ref(false)\r\n// 当前页码\r\nconst ownerMemberPageNo = ref(1)\r\n// 总页数\r\nconst ownerMemberPages = ref(1)\r\n/**\r\n * 查询业主成员信息\r\n */\r\nconst findOwnerMember = (page) => {\r\n    ownerMemberLoading.value = true\r\n    axios({\r\n        method: 'get',\r\n        url: global.api + '/getMemberInfoByOwnerNo',\r\n        params: {\r\n            page,\r\n            size: global.pageSize,\r\n            ownerNo: ownerInfo.value.ownerNo\r\n        }\r\n    }).then(res => {\r\n        // 设置数据\r\n        ownerMemberData.value = res.data.list\r\n        // 设置当前页码\r\n        ownerMemberPageNo.value = res.data.pageNum\r\n        // 设置总页数\r\n        ownerMemberPages.value = res.data.pages\r\n    }).catch(err => {\r\n        message.error('业主成员查询出现异常！' + err)\r\n    }).finally(() => {\r\n        ownerMemberLoading.value = false\r\n    })\r\n}\r\n\r\n/**\r\n * 业主成员页码发生变化时触发\r\n */\r\nconst ownerMemberPageUpdate = (page) => {\r\n    findOwnerMember(page)\r\n}\r\n\r\n// #endregion\r\n\r\n\r\n</script>\r\n<script>\r\nexport default {\r\n    name: 'OwnerMemberLayout'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.body {\r\n    padding: 10px;\r\n}\r\n\r\n.photo {\r\n    width: 120px;\r\n    height: 140px;\r\n    object-fit: cover;\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n.sub-info {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n}\r\n\r\n.selectOwnerClass {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: right;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}