{"ast":null,"code":"const __default__ = {\n  name: 'OwnerMemberLayout'\n};\nimport { ref, inject } from 'vue'; // 引入 naive-ui 组件\n\nimport { NCard, NLayout, NLayoutSider, NLayoutFooter, NLayoutContent, NLayoutHeader, NGrid, NGridItem, NButton, NSpace, NIcon, NButtonGroup, NPagination, NTable, NEllipsis, NModal, NInputGroup, NInput, useMessage, useDialog, NSpin } from 'naive-ui'; // 引入图标 \n\nimport { Add20Filled as AddIcon, Search16Filled as SearchIcon } from '@vicons/fluent'; // 引入 axios\n\nimport axios from 'axios'; // 引入工具包\n\nimport { mergeObject } from '../../util/BaseUtil'; // 读取全局变量\n\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props, {\n    expose\n  }) {\n    expose(); // 引入 vue \n\n    const global = inject(\"global\"); // 获取消息对戏\n\n    const message = useMessage(); // 获取弹窗对象\n\n    const dialog = useDialog(); // ===================================================\n    // =                 业主选择模块                     =\n    // ===================================================\n    // 当前选中的业主\n\n    const ownerInfo = ref({\n      \"id\": null,\n      \"ownerNo\": null,\n      \"name\": null,\n      \"gender\": null,\n      \"age\": null,\n      \"phone\": null,\n      \"idCard\": null,\n      \"weCat\": null,\n      \"remark\": null,\n      \"isMember\": null,\n      \"memberNo\": null\n    }); // 选择业主模态框\n\n    const showSelectOwnerModel = ref(false); // 业主列表加载\n\n    const ownerLoading = ref(false); // 业主信息\n\n    const ownerData = ref([]); // 当前页码\n\n    const ownerPage = ref(1); // 总页数\n\n    const ownerPages = ref(1); // modal nameInput\n\n    const ownerNameValue = ref(null);\n    /**\r\n     * 打开模态框\r\n     */\n\n    function openSelectOwnerModel() {\n      showSelectOwnerModel.value = true;\n      findOwnerInfo();\n    } // 查询业主信息\n\n\n    function findOwnerInfo(more) {\n      const params = {\n        page: 1,\n        size: 6\n      };\n      mergeObject(params, more);\n      ownerLoading.value = true;\n      axios({\n        method: 'get',\n        url: global.api + '/getAllOwnerByOtherNo',\n        params\n      }).then(res => {\n        // 设置业主数据\n        ownerData.value = res.data.list; // 设置当前页码\n\n        ownerPage.value = res.data.pageNum; // 设置总页数\n\n        ownerPages.value = res.data.pages;\n      }).catch(err => {\n        message.error(\"业主列表加载出现异常！\" + err);\n      }).finally(() => {\n        ownerLoading.value = false;\n      });\n    }\n    /**\r\n     * 选中业主信息\r\n     */\n\n\n    function selectOwnerInfo(owner) {\n      showSelectOwnerModel.value = false;\n      ownerInfo.value = owner;\n    }\n    /**\r\n     * 业主信息页码改变时触发\r\n     */\n\n\n    function ownerPageUpdate(page) {\n      findOwnerInfo({\n        name: ownerNameValue.value,\n        page\n      });\n    }\n\n    const __returned__ = {\n      global,\n      message,\n      dialog,\n      ownerInfo,\n      showSelectOwnerModel,\n      ownerLoading,\n      ownerData,\n      ownerPage,\n      ownerPages,\n      ownerNameValue,\n      openSelectOwnerModel,\n      findOwnerInfo,\n      selectOwnerInfo,\n      ownerPageUpdate,\n      ref,\n      inject,\n      NCard,\n      NLayout,\n      NLayoutSider,\n      NLayoutFooter,\n      NLayoutContent,\n      NLayoutHeader,\n      NGrid,\n      NGridItem,\n      NButton,\n      NSpace,\n      NIcon,\n      NButtonGroup,\n      NPagination,\n      NTable,\n      NEllipsis,\n      NModal,\n      NInputGroup,\n      NInput,\n      useMessage,\n      useDialog,\n      NSpin,\n      AddIcon,\n      SearchIcon,\n      axios,\n      mergeObject\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n});","map":{"version":3,"mappings":"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","names":["name","ref","inject","NCard","NLayout","NLayoutSider","NLayoutFooter","NLayoutContent","NLayoutHeader","NGrid","NGridItem","NButton","NSpace","NIcon","NButtonGroup","NPagination","NTable","NEllipsis","NModal","NInputGroup","NInput","useMessage","useDialog","NSpin","Add20Filled","AddIcon","Search16Filled","SearchIcon","axios","mergeObject","global","message","dialog","ownerInfo","showSelectOwnerModel","ownerLoading","ownerData","ownerPage","ownerPages","ownerNameValue","openSelectOwnerModel","value","findOwnerInfo","more","params","page","size","method","url","api","then","res","data","list","pageNum","pages","catch","err","error","finally","selectOwnerInfo","owner","ownerPageUpdate"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/src/layout/real_estate/OwnerMemberLayout.vue"],"sourcesContent":["<template>\r\n    <div class=\"body\">\r\n        <n-card title=\"业主信息\">\r\n            <template #header-extra>\r\n                <n-space>\r\n                    <n-button @click=\"openSelectOwnerModel\" type=\"primary\">\r\n                        <template #icon>\r\n                            <n-icon>\r\n                                <search-icon />\r\n                            </n-icon>\r\n                        </template>\r\n                        选择业主\r\n                    </n-button>\r\n                    <n-button type=\"primary\">\r\n                        <template #icon>\r\n                            <n-icon>\r\n                                <add-icon />\r\n                            </n-icon>\r\n                        </template>\r\n                        添加成员\r\n                    </n-button>\r\n                </n-space>\r\n            </template>\r\n            <div class=\"user-info\">\r\n                <img class=\"photo\" src=\"../../assets/user/noPhoto.jpg\" />\r\n                <n-grid style=\"margin-left: 16px;\" cols=\"1 400:2 600:3\">\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            业主ID：{{ ownerNo.ownerNo}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            名称：{{ ownerNo.name}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\"> \r\n                            性别：{{ ownerNo.gender === 1 ? '男' : '女'}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            年龄：{{ ownerNo.age}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            身份证：{{ ownerNo.idCard}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            联系方式：{{ ownerNo.phone}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            微信：{{ ownerNo.weCat}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                    <n-grid-item>\r\n                        <div class=\"sub-info\">\r\n                            备注：{{ ownerNo.remark}}\r\n                        </div>\r\n                    </n-grid-item>\r\n                </n-grid>\r\n            </div>\r\n        </n-card>\r\n\r\n        <n-table style=\"margin-top: 10px\" striped>\r\n            <thead>\r\n                <tr>\r\n                    <th>成员ID</th>\r\n                    <th>名称</th>\r\n                    <th>性别</th>\r\n                    <th>年龄</th>\r\n                    <th>类型</th>\r\n                    <th>身份证</th>\r\n                    <th>联系方式</th>\r\n                    <th>创建员工</th>\r\n                    <th>备注</th>\r\n                    <th>门禁钥匙</th>\r\n                    <th>QQ</th>\r\n                    <th>操作</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"index in 2\" :key=\"index\">\r\n                    <td>\r\n                        <n-ellipsis style=\"max-width: 100px\">\r\n                            772022100929695123\r\n                        </n-ellipsis>\r\n                    </td>\r\n                    <td>小明</td>\r\n                    <td>男</td>\r\n                    <td>12</td>\r\n                    <td>家庭成员</td>\r\n                    <td></td>\r\n                    <td>18112345678</td>\r\n                    <td>wuxw</td>\r\n                    <td>\r\n                        <n-ellipsis style=\"max-width: 100px\">\r\n\r\n                        </n-ellipsis>\r\n                    </td>\r\n                    <td></td>\r\n                    <td>\r\n                        <n-ellipsis style=\"max-width: 100px\">\r\n\r\n                        </n-ellipsis>\r\n                    </td>\r\n                    <td>\r\n                        <n-button-group size=\"large\">\r\n                            <n-button size=\"small\">修改</n-button>\r\n                            <n-button type=\"error\" size=\"small\" strong secondary>删除</n-button>\r\n                        </n-button-group>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </n-table>\r\n\r\n        <div style=\"display: flex;justify-content: center;align-items: center;margin-top: 10px;\">\r\n            <n-pagination :page-count=\"100\" />\r\n        </div>\r\n\r\n        <!-- 业主信息模态框 -->\r\n        <n-modal :auto-focus=\"false\" v-model:show=\"showSelectOwnerModel\" class=\"custom-card\" preset=\"card\"\r\n            style=\"width: 800px\" title=\"选择业主\" transform-origin=\"center\" size=\"huge\" :bordered=\"false\"\r\n            :segmented=\"{ content: 'soft', footer: 'soft' }\">\r\n\r\n            <n-spin :show=\"ownerLoading\">\r\n\r\n                <div class=\"selectOwnerClass\">\r\n                    <n-input-group>\r\n                        <n-input v-model:value=\"ownerNameValue\" type=\"text\" placeholder=\"请输入业主姓名\" />\r\n                        <n-button @click=\"findOwnerInfo({ name: ownerNameValue })\" type=\"primary\">搜索</n-button>\r\n                    </n-input-group>\r\n                </div>\r\n\r\n                <n-table style=\"margin-top: 16px\" striped>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>名称</th>\r\n                            <th>性别</th>\r\n                            <th>年龄</th>\r\n                            <th>身份证</th>\r\n                            <th>电话</th>\r\n                            <th>操作</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody v-if=\"ownerData.length <= 0\">\r\n                        <tr>\r\n                            <td colspan=\"6\" style=\"text-align:center;\">暂无数据</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr v-for=\"(item, index) in ownerData\" :key=\"index\">\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.name }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.gender === 1 ? '男' : '女' }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.age }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 160px\">\r\n                                    {{ item.idCard }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td>\r\n                                <n-ellipsis style=\"max-width: 100px\">\r\n                                    {{ item.phone }}\r\n                                </n-ellipsis>\r\n                            </td>\r\n                            <td style=\"width: 60px\">\r\n                                <n-button-group size=\"large\">\r\n                                    <n-button @click=\"selectOwnerInfo(item)\" size=\"small\" type=\"primary\">选择</n-button>\r\n                                </n-button-group>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </n-table>\r\n\r\n                <div v-if=\"ownerPages > 1\"\r\n                    style=\"display: flex;justify-content: center;align-items: center;margin-top: 26px;\">\r\n                    <n-pagination @update:page=\"ownerPageUpdate\" :page-count=\"ownerPages\" />\r\n                </div>\r\n\r\n            </n-spin>\r\n\r\n\r\n            <template #footer>\r\n                <n-space justify=\"end\">\r\n                    <n-button @click=\"showSelectOwnerModel = false\">关闭</n-button>\r\n                </n-space>\r\n            </template>\r\n        </n-modal>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n// 引入 vue \r\nimport { ref, inject } from 'vue';\r\n// 引入 naive-ui 组件\r\nimport {\r\n    NCard, NLayout, NLayoutSider, NLayoutFooter,\r\n    NLayoutContent, NLayoutHeader, NGrid, NGridItem,\r\n    NButton, NSpace, NIcon, NButtonGroup, NPagination,\r\n    NTable, NEllipsis, NModal, NInputGroup, NInput,\r\n    useMessage, useDialog, NSpin\r\n} from 'naive-ui';\r\n// 引入图标 \r\nimport {\r\n    Add20Filled as AddIcon,\r\n    Search16Filled as SearchIcon\r\n} from '@vicons/fluent'\r\n// 引入 axios\r\nimport axios from 'axios'\r\n// 引入工具包\r\nimport { mergeObject } from '../../util/BaseUtil'\r\n\r\n// 读取全局变量\r\nconst global = inject(\"global\")\r\n// 获取消息对戏\r\nconst message = useMessage()\r\n// 获取弹窗对象\r\nconst dialog = useDialog()\r\n\r\n// ===================================================\r\n// =                 业主选择模块                     =\r\n// ===================================================\r\n// 当前选中的业主\r\nconst ownerInfo = ref({\r\n    \"id\": null,\r\n    \"ownerNo\": null,\r\n    \"name\": null,\r\n    \"gender\": null,\r\n    \"age\": null,\r\n    \"phone\": null,\r\n    \"idCard\": null,\r\n    \"weCat\": null,\r\n    \"remark\": null,\r\n    \"isMember\": null,\r\n    \"memberNo\": null\r\n})\r\n// 选择业主模态框\r\nconst showSelectOwnerModel = ref(false)\r\n// 业主列表加载\r\nconst ownerLoading = ref(false)\r\n// 业主信息\r\nconst ownerData = ref([])\r\n// 当前页码\r\nconst ownerPage = ref(1)\r\n// 总页数\r\nconst ownerPages = ref(1)\r\n// modal nameInput\r\nconst ownerNameValue = ref(null)\r\n/**\r\n * 打开模态框\r\n */\r\nfunction openSelectOwnerModel() {\r\n    showSelectOwnerModel.value = true\r\n    findOwnerInfo()\r\n}\r\n// 查询业主信息\r\nfunction findOwnerInfo(more) {\r\n    const params = {\r\n        page: 1,\r\n        size: 6,\r\n    }\r\n    mergeObject(params, more)\r\n    ownerLoading.value = true\r\n    axios({\r\n        method: 'get',\r\n        url: global.api + '/getAllOwnerByOtherNo',\r\n        params\r\n    }).then(res => {\r\n        // 设置业主数据\r\n        ownerData.value = res.data.list\r\n        // 设置当前页码\r\n        ownerPage.value = res.data.pageNum\r\n        // 设置总页数\r\n        ownerPages.value = res.data.pages\r\n    }).catch(err => {\r\n        message.error(\"业主列表加载出现异常！\" + err)\r\n    }).finally(() => {\r\n        ownerLoading.value = false\r\n    })\r\n}\r\n/**\r\n * 选中业主信息\r\n */\r\nfunction selectOwnerInfo(owner) {\r\n    showSelectOwnerModel.value = false\r\n    ownerInfo.value = owner\r\n}\r\n/**\r\n * 业主信息页码改变时触发\r\n */\r\nfunction ownerPageUpdate(page) {\r\n    findOwnerInfo({\r\n        name: ownerNameValue.value,\r\n        page\r\n    })\r\n}\r\n\r\n</script>\r\n<script>\r\nexport default {\r\n    name: 'OwnerMemberLayout'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.body {\r\n    padding: 10px;\r\n}\r\n\r\n.photo {\r\n    width: 120px;\r\n    height: 140px;\r\n    object-fit: cover;\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n.sub-info {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n}\r\n\r\n.selectOwnerClass {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: right;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}