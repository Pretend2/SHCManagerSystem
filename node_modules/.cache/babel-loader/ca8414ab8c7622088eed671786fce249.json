{"ast":null,"code":"import { onBeforeMount, onBeforeUnmount, ref, readonly } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst clickedTimeRef = ref(undefined);\nlet usedCount = 0;\n\nfunction handleClick() {\n  clickedTimeRef.value = Date.now();\n}\n\nlet managable = true;\nexport default function useClicked(timeout) {\n  if (!isBrowser) return readonly(ref(false));\n  const clickedRef = ref(false);\n  let timerId = null;\n\n  function clearTimer() {\n    if (timerId !== null) window.clearTimeout(timerId);\n  }\n\n  function clickedHandler() {\n    clearTimer();\n    clickedRef.value = true;\n    timerId = window.setTimeout(() => {\n      clickedRef.value = false;\n    }, timeout);\n  }\n\n  if (usedCount === 0) {\n    on('click', window, handleClick, true);\n  }\n\n  const setup = () => {\n    usedCount += 1;\n    on('click', window, clickedHandler, true);\n  };\n\n  if (managable && (managable = hasInstance())) {\n    onBeforeMount(setup);\n    onBeforeUnmount(() => {\n      usedCount -= 1;\n\n      if (usedCount === 0) {\n        off('click', window, handleClick, true);\n      }\n\n      off('click', window, clickedHandler, true);\n      clearTimer();\n    });\n  } else {\n    setup();\n  }\n\n  return readonly(clickedRef);\n}","map":{"version":3,"names":["onBeforeMount","onBeforeUnmount","ref","readonly","on","off","hasInstance","isBrowser","clickedTimeRef","undefined","usedCount","handleClick","value","Date","now","managable","useClicked","timeout","clickedRef","timerId","clearTimer","window","clearTimeout","clickedHandler","setTimeout","setup"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/vooks/es/use-clicked.js"],"sourcesContent":["import { onBeforeMount, onBeforeUnmount, ref, readonly } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst clickedTimeRef = ref(undefined);\nlet usedCount = 0;\nfunction handleClick() {\n    clickedTimeRef.value = Date.now();\n}\nlet managable = true;\nexport default function useClicked(timeout) {\n    if (!isBrowser)\n        return readonly(ref(false));\n    const clickedRef = ref(false);\n    let timerId = null;\n    function clearTimer() {\n        if (timerId !== null)\n            window.clearTimeout(timerId);\n    }\n    function clickedHandler() {\n        clearTimer();\n        clickedRef.value = true;\n        timerId = window.setTimeout(() => {\n            clickedRef.value = false;\n        }, timeout);\n    }\n    if (usedCount === 0) {\n        on('click', window, handleClick, true);\n    }\n    const setup = () => {\n        usedCount += 1;\n        on('click', window, clickedHandler, true);\n    };\n    if (managable && (managable = hasInstance())) {\n        onBeforeMount(setup);\n        onBeforeUnmount(() => {\n            usedCount -= 1;\n            if (usedCount === 0) {\n                off('click', window, handleClick, true);\n            }\n            off('click', window, clickedHandler, true);\n            clearTimer();\n        });\n    }\n    else {\n        setup();\n    }\n    return readonly(clickedRef);\n}\n"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,eAAxB,EAAyCC,GAAzC,EAA8CC,QAA9C,QAA8D,KAA9D;AACA,SAASC,EAAT,EAAaC,GAAb,QAAwB,MAAxB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,SAAvC;AACA,MAAMC,cAAc,GAAGN,GAAG,CAACO,SAAD,CAA1B;AACA,IAAIC,SAAS,GAAG,CAAhB;;AACA,SAASC,WAAT,GAAuB;EACnBH,cAAc,CAACI,KAAf,GAAuBC,IAAI,CAACC,GAAL,EAAvB;AACH;;AACD,IAAIC,SAAS,GAAG,IAAhB;AACA,eAAe,SAASC,UAAT,CAAoBC,OAApB,EAA6B;EACxC,IAAI,CAACV,SAAL,EACI,OAAOJ,QAAQ,CAACD,GAAG,CAAC,KAAD,CAAJ,CAAf;EACJ,MAAMgB,UAAU,GAAGhB,GAAG,CAAC,KAAD,CAAtB;EACA,IAAIiB,OAAO,GAAG,IAAd;;EACA,SAASC,UAAT,GAAsB;IAClB,IAAID,OAAO,KAAK,IAAhB,EACIE,MAAM,CAACC,YAAP,CAAoBH,OAApB;EACP;;EACD,SAASI,cAAT,GAA0B;IACtBH,UAAU;IACVF,UAAU,CAACN,KAAX,GAAmB,IAAnB;IACAO,OAAO,GAAGE,MAAM,CAACG,UAAP,CAAkB,MAAM;MAC9BN,UAAU,CAACN,KAAX,GAAmB,KAAnB;IACH,CAFS,EAEPK,OAFO,CAAV;EAGH;;EACD,IAAIP,SAAS,KAAK,CAAlB,EAAqB;IACjBN,EAAE,CAAC,OAAD,EAAUiB,MAAV,EAAkBV,WAAlB,EAA+B,IAA/B,CAAF;EACH;;EACD,MAAMc,KAAK,GAAG,MAAM;IAChBf,SAAS,IAAI,CAAb;IACAN,EAAE,CAAC,OAAD,EAAUiB,MAAV,EAAkBE,cAAlB,EAAkC,IAAlC,CAAF;EACH,CAHD;;EAIA,IAAIR,SAAS,KAAKA,SAAS,GAAGT,WAAW,EAA5B,CAAb,EAA8C;IAC1CN,aAAa,CAACyB,KAAD,CAAb;IACAxB,eAAe,CAAC,MAAM;MAClBS,SAAS,IAAI,CAAb;;MACA,IAAIA,SAAS,KAAK,CAAlB,EAAqB;QACjBL,GAAG,CAAC,OAAD,EAAUgB,MAAV,EAAkBV,WAAlB,EAA+B,IAA/B,CAAH;MACH;;MACDN,GAAG,CAAC,OAAD,EAAUgB,MAAV,EAAkBE,cAAlB,EAAkC,IAAlC,CAAH;MACAH,UAAU;IACb,CAPc,CAAf;EAQH,CAVD,MAWK;IACDK,KAAK;EACR;;EACD,OAAOtB,QAAQ,CAACe,UAAD,CAAf;AACH"},"metadata":{},"sourceType":"module"}