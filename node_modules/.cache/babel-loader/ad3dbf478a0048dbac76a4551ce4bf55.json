{"ast":null,"code":"import { ref, inject, watch } from 'vue';\nimport { useMessage, useDialog } from 'naive-ui';\nimport QueryString from 'qs';\nexport default (buildingNode => {\n  // 接收全局变量\n  const global = inject(\"global\");\n  const message = useMessage();\n  const dialog = useDialog(); // 单元 模态框\n\n  const apartmentStatus = ref(false); // false 添加 true 修改\n\n  const apartmentFormRef = ref(null);\n  const showApartmentModal = ref(false); // 模态框是否打开\n  // 表单校验\n\n  const apartmentRules = {\n    id: {\n      required: true,\n      message: \"请输入单元编号\",\n      trigger: \"blur\"\n    },\n    totalNumberOfLayers: {\n      type: \"number\",\n      required: true,\n      message: \"请输入总层数\",\n      trigger: \"blur\"\n    }\n  }; // 表单输入数据\n\n  const apartmentValue = ref({\n    id: \"\",\n    totalNumberOfLayers: null,\n    elevator: false,\n    remark: \"\"\n  }); // 表单提交事件\n\n  const apartmentSubmit = e => {\n    e.preventDefault();\n    apartmentFormRef.value?.validate(errors => {\n      if (!errors) {\n        // 校验通过\n        if (apartmentStatus) {\n          // 添加\n          addApartment();\n        } else {// 修改\n        }\n      } else {// 校验不通过\n      }\n    });\n  };\n\n  watch(showApartmentModal, (newValue, oldValue) => {\n    if (newValue) {\n      if (buildingNode.value != null && apartmentStatus.value) {// 添加\n      } else if (buildingNode.value != null) {// 修改\n      } else {\n        message.warning(\"请先选择楼栋！\");\n        showApartmentModal.value = false;\n      }\n    }\n  }); // 删除单元\n\n  const deleteApartment = id => {\n    dialog.warning({\n      title: \"请确认您的操作!\",\n      content: \"确认是否删除!\",\n      positiveText: \"确认删除\",\n      negativeText: \"取消\",\n      onPositiveClick: () => {\n        message.success(\"确认删除 => \" + id);\n      }\n    });\n  }; // 添加单元\n\n\n  const addApartment = () => {\n    console.log(buildingNode.value);\n    /* axios({\r\n        method: 'post',\r\n        url: global.api + '/addUnit',\r\n        data: QueryString.stringify({\r\n            utilNo: buildingNode.value.,\r\n            totalFloors:,\r\n            elevator:,\r\n            remark:\r\n        })\r\n    }) */\n  };\n\n  return {\n    apartmentStatus,\n    // 单元模态框状态\n    apartmentFormRef,\n    // 单元模态框 Form 引用\n    showApartmentModal,\n    // 显示单元模态框\n    apartmentRules,\n    // 单元模态框 Form 校验数据\n    apartmentValue,\n    // 单元模态框 Form 参数\n    apartmentSubmit // 单元模态框 Form 提交事件\n\n  };\n});","map":{"version":3,"names":["ref","inject","watch","useMessage","useDialog","QueryString","buildingNode","global","message","dialog","apartmentStatus","apartmentFormRef","showApartmentModal","apartmentRules","id","required","trigger","totalNumberOfLayers","type","apartmentValue","elevator","remark","apartmentSubmit","e","preventDefault","value","validate","errors","addApartment","newValue","oldValue","warning","deleteApartment","title","content","positiveText","negativeText","onPositiveClick","success","console","log"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/src/hook/real_estate/housingmanagement/apartmentHook.js"],"sourcesContent":["import { ref, inject, watch } from 'vue'\r\n\r\nimport { useMessage, useDialog } from 'naive-ui'\r\n\r\nimport QueryString from 'qs';\r\n\r\nexport default (buildingNode) => {\r\n\r\n    // 接收全局变量\r\n    const global = inject(\"global\")\r\n\r\n    const message = useMessage();\r\n    const dialog = useDialog();\r\n\r\n    // 单元 模态框\r\n    const apartmentStatus = ref(false); // false 添加 true 修改\r\n    const apartmentFormRef = ref(null);\r\n    const showApartmentModal = ref(false) // 模态框是否打开\r\n    // 表单校验\r\n    const apartmentRules = {\r\n        id: {\r\n            required: true,\r\n            message: \"请输入单元编号\",\r\n            trigger: \"blur\"\r\n        },\r\n        totalNumberOfLayers: {\r\n            type: \"number\",\r\n            required: true,\r\n            message: \"请输入总层数\",\r\n            trigger: \"blur\"\r\n        }\r\n    }\r\n\r\n    // 表单输入数据\r\n    const apartmentValue = ref({\r\n        id: \"\",\r\n        totalNumberOfLayers: null,\r\n        elevator: false,\r\n        remark: \"\"\r\n    })\r\n\r\n    // 表单提交事件\r\n    const apartmentSubmit = (e) => {\r\n        e.preventDefault();\r\n        apartmentFormRef.value?.validate((errors) => {\r\n            if (!errors) {\r\n                // 校验通过\r\n                if (apartmentStatus) { // 添加\r\n                    addApartment()\r\n                } else { // 修改\r\n\r\n                }\r\n            } else {\r\n                // 校验不通过\r\n            }\r\n        });\r\n    }\r\n\r\n    watch(showApartmentModal, (newValue, oldValue) => {\r\n        if (newValue) {\r\n            if (buildingNode.value != null && apartmentStatus.value) { // 添加\r\n\r\n            } else if(buildingNode.value != null) { // 修改\r\n\r\n            } else {\r\n                message.warning(\"请先选择楼栋！\")\r\n                showApartmentModal.value = false\r\n            }\r\n        }\r\n    })\r\n\r\n    // 删除单元\r\n    const deleteApartment = (id) => {\r\n        dialog.warning({\r\n            title: \"请确认您的操作!\",\r\n            content: \"确认是否删除!\",\r\n            positiveText: \"确认删除\",\r\n            negativeText: \"取消\",\r\n            onPositiveClick: () => {\r\n                message.success(\"确认删除 => \" + id);\r\n            }\r\n        });\r\n    }\r\n\r\n    // 添加单元\r\n    const addApartment = () => {\r\n        console.log(buildingNode.value);\r\n        /* axios({\r\n            method: 'post',\r\n            url: global.api + '/addUnit',\r\n            data: QueryString.stringify({\r\n                utilNo: buildingNode.value.,\r\n                totalFloors:,\r\n                elevator:,\r\n                remark:\r\n            })\r\n        }) */\r\n    }\r\n\r\n    return {\r\n        apartmentStatus, // 单元模态框状态\r\n        apartmentFormRef, // 单元模态框 Form 引用\r\n        showApartmentModal, // 显示单元模态框\r\n        apartmentRules, // 单元模态框 Form 校验数据\r\n        apartmentValue, // 单元模态框 Form 参数\r\n        apartmentSubmit, // 单元模态框 Form 提交事件\r\n    }\r\n}"],"mappings":"AAAA,SAASA,GAAT,EAAcC,MAAd,EAAsBC,KAAtB,QAAmC,KAAnC;AAEA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,UAAtC;AAEA,OAAOC,WAAP,MAAwB,IAAxB;AAEA,gBAAgBC,YAAD,IAAkB;EAE7B;EACA,MAAMC,MAAM,GAAGN,MAAM,CAAC,QAAD,CAArB;EAEA,MAAMO,OAAO,GAAGL,UAAU,EAA1B;EACA,MAAMM,MAAM,GAAGL,SAAS,EAAxB,CAN6B,CAQ7B;;EACA,MAAMM,eAAe,GAAGV,GAAG,CAAC,KAAD,CAA3B,CAT6B,CASO;;EACpC,MAAMW,gBAAgB,GAAGX,GAAG,CAAC,IAAD,CAA5B;EACA,MAAMY,kBAAkB,GAAGZ,GAAG,CAAC,KAAD,CAA9B,CAX6B,CAWS;EACtC;;EACA,MAAMa,cAAc,GAAG;IACnBC,EAAE,EAAE;MACAC,QAAQ,EAAE,IADV;MAEAP,OAAO,EAAE,SAFT;MAGAQ,OAAO,EAAE;IAHT,CADe;IAMnBC,mBAAmB,EAAE;MACjBC,IAAI,EAAE,QADW;MAEjBH,QAAQ,EAAE,IAFO;MAGjBP,OAAO,EAAE,QAHQ;MAIjBQ,OAAO,EAAE;IAJQ;EANF,CAAvB,CAb6B,CA2B7B;;EACA,MAAMG,cAAc,GAAGnB,GAAG,CAAC;IACvBc,EAAE,EAAE,EADmB;IAEvBG,mBAAmB,EAAE,IAFE;IAGvBG,QAAQ,EAAE,KAHa;IAIvBC,MAAM,EAAE;EAJe,CAAD,CAA1B,CA5B6B,CAmC7B;;EACA,MAAMC,eAAe,GAAIC,CAAD,IAAO;IAC3BA,CAAC,CAACC,cAAF;IACAb,gBAAgB,CAACc,KAAjB,EAAwBC,QAAxB,CAAkCC,MAAD,IAAY;MACzC,IAAI,CAACA,MAAL,EAAa;QACT;QACA,IAAIjB,eAAJ,EAAqB;UAAE;UACnBkB,YAAY;QACf,CAFD,MAEO,CAAE;QAER;MACJ,CAPD,MAOO,CACH;MACH;IACJ,CAXD;EAYH,CAdD;;EAgBA1B,KAAK,CAACU,kBAAD,EAAqB,CAACiB,QAAD,EAAWC,QAAX,KAAwB;IAC9C,IAAID,QAAJ,EAAc;MACV,IAAIvB,YAAY,CAACmB,KAAb,IAAsB,IAAtB,IAA8Bf,eAAe,CAACe,KAAlD,EAAyD,CAAE;MAE1D,CAFD,MAEO,IAAGnB,YAAY,CAACmB,KAAb,IAAsB,IAAzB,EAA+B,CAAE;MAEvC,CAFM,MAEA;QACHjB,OAAO,CAACuB,OAAR,CAAgB,SAAhB;QACAnB,kBAAkB,CAACa,KAAnB,GAA2B,KAA3B;MACH;IACJ;EACJ,CAXI,CAAL,CApD6B,CAiE7B;;EACA,MAAMO,eAAe,GAAIlB,EAAD,IAAQ;IAC5BL,MAAM,CAACsB,OAAP,CAAe;MACXE,KAAK,EAAE,UADI;MAEXC,OAAO,EAAE,SAFE;MAGXC,YAAY,EAAE,MAHH;MAIXC,YAAY,EAAE,IAJH;MAKXC,eAAe,EAAE,MAAM;QACnB7B,OAAO,CAAC8B,OAAR,CAAgB,aAAaxB,EAA7B;MACH;IAPU,CAAf;EASH,CAVD,CAlE6B,CA8E7B;;;EACA,MAAMc,YAAY,GAAG,MAAM;IACvBW,OAAO,CAACC,GAAR,CAAYlC,YAAY,CAACmB,KAAzB;IACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACK,CAZD;;EAcA,OAAO;IACHf,eADG;IACc;IACjBC,gBAFG;IAEe;IAClBC,kBAHG;IAGiB;IACpBC,cAJG;IAIa;IAChBM,cALG;IAKa;IAChBG,eANG,CAMc;;EANd,CAAP;AAQH,CArGD"},"metadata":{},"sourceType":"module"}