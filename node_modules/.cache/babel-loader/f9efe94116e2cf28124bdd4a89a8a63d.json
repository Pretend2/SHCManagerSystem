{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, defineComponent, h, nextTick, onBeforeUnmount, onMounted, provide, ref, toRef, watch } from 'vue';\nimport { throttle } from 'lodash-es';\nimport { unwrapElement } from 'seemly';\nimport { onFontsReady } from 'vooks';\nimport { NScrollbar } from '../../_internal';\nimport { keysOf } from '../../_utils';\nimport { anchorInjectionKey } from './Link';\nimport { getOffset } from './utils';\nexport const baseAnchorProps = {\n  type: {\n    type: String,\n    default: 'rail'\n  },\n  showRail: {\n    type: Boolean,\n    default: true\n  },\n  showBackground: {\n    type: Boolean,\n    default: true\n  },\n  bound: {\n    type: Number,\n    default: 12\n  },\n  internalScrollable: Boolean,\n  ignoreGap: Boolean,\n  offsetTarget: [String, Object, Function]\n};\nexport const baseAnchorPropKeys = keysOf(baseAnchorProps);\nexport default defineComponent({\n  name: 'BaseAnchor',\n  props: Object.assign(Object.assign({}, baseAnchorProps), {\n    mergedClsPrefix: {\n      type: String,\n      required: true\n    }\n  }),\n\n  setup(props) {\n    const collectedLinkHrefs = [];\n    const titleEls = [];\n    const activeHrefRef = ref(null);\n    const slotRef = ref(null);\n    const barRef = ref(null);\n    const selfRef = ref(null);\n    const isBlockTypeRef = computed(() => {\n      return props.type === 'block';\n    });\n    const mergedShowRailRef = computed(() => {\n      return !isBlockTypeRef.value && props.showRail;\n    });\n\n    function disableTransitionOneTick() {\n      const {\n        value: barEl\n      } = barRef;\n      const {\n        value: slotEl\n      } = slotRef;\n\n      if (barEl) {\n        barEl.style.transition = 'none';\n      }\n\n      if (slotEl) {\n        slotEl.style.transition = 'none';\n      }\n\n      if (titleEls) {\n        titleEls.forEach(titleEl => {\n          titleEl.style.transition = 'none';\n        });\n      }\n\n      void nextTick(() => {\n        const {\n          value: nextBarEl\n        } = barRef;\n        const {\n          value: nextSlotEl\n        } = slotRef;\n\n        if (nextBarEl) {\n          void nextBarEl.offsetWidth;\n          nextBarEl.style.transition = '';\n        }\n\n        if (nextSlotEl) {\n          void nextSlotEl.offsetWidth;\n          nextSlotEl.style.transition = '';\n        }\n\n        if (titleEls) {\n          titleEls.forEach(titleEl => {\n            void titleEl.offsetWidth;\n            titleEl.style.transition = '';\n          });\n        }\n      });\n    }\n\n    function updateBarPosition(linkTitleEl, transition = true) {\n      const {\n        value: barEl\n      } = barRef;\n      const {\n        value: slotEl\n      } = slotRef;\n      const {\n        value: selfEl\n      } = selfRef;\n      if (!selfEl || !barEl) return;\n\n      if (!transition) {\n        barEl.style.transition = 'none';\n        if (slotEl) slotEl.style.transition = 'none';\n      }\n\n      const {\n        offsetHeight,\n        offsetWidth\n      } = linkTitleEl;\n      const {\n        top: linkTitleClientTop,\n        left: linkTitleClientLeft\n      } = linkTitleEl.getBoundingClientRect();\n      const {\n        top: anchorClientTop,\n        left: anchorClientLeft\n      } = selfEl.getBoundingClientRect();\n      const offsetTop = linkTitleClientTop - anchorClientTop;\n      const offsetLeft = linkTitleClientLeft - anchorClientLeft;\n      barEl.style.top = `${offsetTop}px`;\n      barEl.style.height = `${offsetHeight}px`;\n\n      if (slotEl) {\n        slotEl.style.top = `${offsetTop}px`;\n        slotEl.style.height = `${offsetHeight}px`;\n        slotEl.style.maxWidth = `${offsetWidth + offsetLeft}px`;\n      }\n\n      void barEl.offsetHeight;\n      if (slotEl) void slotEl.offsetHeight;\n\n      if (!transition) {\n        barEl.style.transition = '';\n        if (slotEl) slotEl.style.transition = '';\n      }\n    }\n\n    function setActiveHref(href, transition = true) {\n      const idMatchResult = /^#([^#]+)$/.exec(href);\n      if (!idMatchResult) return;\n      const linkEl = document.getElementById(idMatchResult[1]);\n      if (!linkEl) return;\n      activeHrefRef.value = href;\n      linkEl.scrollIntoView();\n\n      if (!transition) {\n        disableTransitionOneTick();\n      }\n\n      handleScroll();\n    }\n\n    const handleScroll = throttle(() => _handleScroll(true), 128);\n\n    function _handleScroll(transition = true) {\n      var _a;\n\n      const links = [];\n      const offsetTarget = unwrapElement((_a = props.offsetTarget) !== null && _a !== void 0 ? _a : document);\n      collectedLinkHrefs.forEach(href => {\n        const idMatchResult = /#([^#]+)$/.exec(href);\n        if (!idMatchResult) return;\n        const linkEl = document.getElementById(idMatchResult[1]);\n\n        if (linkEl && offsetTarget) {\n          const {\n            top,\n            height\n          } = getOffset(linkEl, offsetTarget);\n          links.push({\n            top,\n            height,\n            href\n          });\n        }\n      });\n      links.sort((a, b) => {\n        // ascend top\n        if (a.top > b.top) {\n          return 1; // descend height\n        } else if (a.top === b.top && a.height < b.height) {\n          return -1;\n        }\n\n        return -1;\n      });\n      const currentActiveHref = activeHrefRef.value;\n      const {\n        bound,\n        ignoreGap\n      } = props;\n      const activeLink = links.reduce((prevLink, link) => {\n        if (link.top + link.height < 0) {\n          if (ignoreGap) {\n            return link;\n          } else {\n            return prevLink;\n          }\n        }\n\n        if (link.top <= bound) {\n          if (prevLink === null) {\n            return link;\n          } else if (link.top === prevLink.top) {\n            if (link.href === currentActiveHref) {\n              return link;\n            } else return prevLink;\n          } else if (link.top > prevLink.top) {\n            return link;\n          } else {\n            return prevLink;\n          }\n        }\n\n        return prevLink;\n      }, null);\n      if (!transition) disableTransitionOneTick();\n\n      if (activeLink) {\n        activeHrefRef.value = activeLink.href;\n      } else {\n        activeHrefRef.value = null;\n      }\n    }\n\n    provide(anchorInjectionKey, {\n      activeHref: activeHrefRef,\n      mergedClsPrefix: toRef(props, 'mergedClsPrefix'),\n      updateBarPosition,\n      setActiveHref,\n      collectedLinkHrefs,\n      titleEls\n    });\n    onMounted(() => {\n      document.addEventListener('scroll', handleScroll, true);\n      setActiveHref(window.location.hash);\n\n      _handleScroll(false);\n    });\n    onFontsReady(() => {\n      setActiveHref(window.location.hash);\n\n      _handleScroll(false);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('scroll', handleScroll, true);\n    });\n    watch(activeHrefRef, value => {\n      if (value === null) {\n        const {\n          value: slotEl\n        } = slotRef;\n\n        if (slotEl && !isBlockTypeRef.value) {\n          slotEl.style.maxWidth = '0';\n        }\n      }\n    });\n    return {\n      selfRef,\n      barRef,\n      slotRef,\n      setActiveHref,\n      activeHref: activeHrefRef,\n      isBlockType: isBlockTypeRef,\n      mergedShowRail: mergedShowRailRef\n    };\n  },\n\n  render() {\n    var _a;\n\n    const {\n      mergedClsPrefix,\n      mergedShowRail,\n      isBlockType,\n      $slots\n    } = this;\n    const Anchor = h(\"div\", {\n      class: [`${mergedClsPrefix}-anchor`, isBlockType && `${mergedClsPrefix}-anchor--block`, mergedShowRail && `${mergedClsPrefix}-anchor--show-rail`],\n      ref: \"selfRef\"\n    }, mergedShowRail && this.showBackground ? h(\"div\", {\n      ref: \"slotRef\",\n      class: `${mergedClsPrefix}-anchor-link-background`\n    }) : null, mergedShowRail ? h(\"div\", {\n      class: `${mergedClsPrefix}-anchor-rail`\n    }, h(\"div\", {\n      ref: \"barRef\",\n      class: [`${mergedClsPrefix}-anchor-rail__bar`, this.activeHref !== null && `${mergedClsPrefix}-anchor-rail__bar--active`]\n    })) : null, (_a = $slots.default) === null || _a === void 0 ? void 0 : _a.call($slots));\n    return this.internalScrollable ? h(NScrollbar, null, {\n      default: () => Anchor\n    }) : Anchor;\n  }\n\n});","map":{"version":3,"names":["computed","defineComponent","h","nextTick","onBeforeUnmount","onMounted","provide","ref","toRef","watch","throttle","unwrapElement","onFontsReady","NScrollbar","keysOf","anchorInjectionKey","getOffset","baseAnchorProps","type","String","default","showRail","Boolean","showBackground","bound","Number","internalScrollable","ignoreGap","offsetTarget","Object","Function","baseAnchorPropKeys","name","props","assign","mergedClsPrefix","required","setup","collectedLinkHrefs","titleEls","activeHrefRef","slotRef","barRef","selfRef","isBlockTypeRef","mergedShowRailRef","value","disableTransitionOneTick","barEl","slotEl","style","transition","forEach","titleEl","nextBarEl","nextSlotEl","offsetWidth","updateBarPosition","linkTitleEl","selfEl","offsetHeight","top","linkTitleClientTop","left","linkTitleClientLeft","getBoundingClientRect","anchorClientTop","anchorClientLeft","offsetTop","offsetLeft","height","maxWidth","setActiveHref","href","idMatchResult","exec","linkEl","document","getElementById","scrollIntoView","handleScroll","_handleScroll","_a","links","push","sort","a","b","currentActiveHref","activeLink","reduce","prevLink","link","activeHref","addEventListener","window","location","hash","removeEventListener","isBlockType","mergedShowRail","render","$slots","Anchor","class","call"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/anchor/src/BaseAnchor.js"],"sourcesContent":["import { computed, defineComponent, h, nextTick, onBeforeUnmount, onMounted, provide, ref, toRef, watch } from 'vue';\nimport { throttle } from 'lodash-es';\nimport { unwrapElement } from 'seemly';\nimport { onFontsReady } from 'vooks';\nimport { NScrollbar } from '../../_internal';\nimport { keysOf } from '../../_utils';\nimport { anchorInjectionKey } from './Link';\nimport { getOffset } from './utils';\nexport const baseAnchorProps = {\n    type: {\n        type: String,\n        default: 'rail'\n    },\n    showRail: {\n        type: Boolean,\n        default: true\n    },\n    showBackground: {\n        type: Boolean,\n        default: true\n    },\n    bound: {\n        type: Number,\n        default: 12\n    },\n    internalScrollable: Boolean,\n    ignoreGap: Boolean,\n    offsetTarget: [String, Object, Function]\n};\nexport const baseAnchorPropKeys = keysOf(baseAnchorProps);\nexport default defineComponent({\n    name: 'BaseAnchor',\n    props: Object.assign(Object.assign({}, baseAnchorProps), { mergedClsPrefix: {\n            type: String,\n            required: true\n        } }),\n    setup(props) {\n        const collectedLinkHrefs = [];\n        const titleEls = [];\n        const activeHrefRef = ref(null);\n        const slotRef = ref(null);\n        const barRef = ref(null);\n        const selfRef = ref(null);\n        const isBlockTypeRef = computed(() => {\n            return props.type === 'block';\n        });\n        const mergedShowRailRef = computed(() => {\n            return !isBlockTypeRef.value && props.showRail;\n        });\n        function disableTransitionOneTick() {\n            const { value: barEl } = barRef;\n            const { value: slotEl } = slotRef;\n            if (barEl) {\n                barEl.style.transition = 'none';\n            }\n            if (slotEl) {\n                slotEl.style.transition = 'none';\n            }\n            if (titleEls) {\n                titleEls.forEach((titleEl) => {\n                    titleEl.style.transition = 'none';\n                });\n            }\n            void nextTick(() => {\n                const { value: nextBarEl } = barRef;\n                const { value: nextSlotEl } = slotRef;\n                if (nextBarEl) {\n                    void nextBarEl.offsetWidth;\n                    nextBarEl.style.transition = '';\n                }\n                if (nextSlotEl) {\n                    void nextSlotEl.offsetWidth;\n                    nextSlotEl.style.transition = '';\n                }\n                if (titleEls) {\n                    titleEls.forEach((titleEl) => {\n                        void titleEl.offsetWidth;\n                        titleEl.style.transition = '';\n                    });\n                }\n            });\n        }\n        function updateBarPosition(linkTitleEl, transition = true) {\n            const { value: barEl } = barRef;\n            const { value: slotEl } = slotRef;\n            const { value: selfEl } = selfRef;\n            if (!selfEl || !barEl)\n                return;\n            if (!transition) {\n                barEl.style.transition = 'none';\n                if (slotEl)\n                    slotEl.style.transition = 'none';\n            }\n            const { offsetHeight, offsetWidth } = linkTitleEl;\n            const { top: linkTitleClientTop, left: linkTitleClientLeft } = linkTitleEl.getBoundingClientRect();\n            const { top: anchorClientTop, left: anchorClientLeft } = selfEl.getBoundingClientRect();\n            const offsetTop = linkTitleClientTop - anchorClientTop;\n            const offsetLeft = linkTitleClientLeft - anchorClientLeft;\n            barEl.style.top = `${offsetTop}px`;\n            barEl.style.height = `${offsetHeight}px`;\n            if (slotEl) {\n                slotEl.style.top = `${offsetTop}px`;\n                slotEl.style.height = `${offsetHeight}px`;\n                slotEl.style.maxWidth = `${offsetWidth + offsetLeft}px`;\n            }\n            void barEl.offsetHeight;\n            if (slotEl)\n                void slotEl.offsetHeight;\n            if (!transition) {\n                barEl.style.transition = '';\n                if (slotEl)\n                    slotEl.style.transition = '';\n            }\n        }\n        function setActiveHref(href, transition = true) {\n            const idMatchResult = /^#([^#]+)$/.exec(href);\n            if (!idMatchResult)\n                return;\n            const linkEl = document.getElementById(idMatchResult[1]);\n            if (!linkEl)\n                return;\n            activeHrefRef.value = href;\n            linkEl.scrollIntoView();\n            if (!transition) {\n                disableTransitionOneTick();\n            }\n            handleScroll();\n        }\n        const handleScroll = throttle(() => _handleScroll(true), 128);\n        function _handleScroll(transition = true) {\n            var _a;\n            const links = [];\n            const offsetTarget = unwrapElement((_a = props.offsetTarget) !== null && _a !== void 0 ? _a : document);\n            collectedLinkHrefs.forEach((href) => {\n                const idMatchResult = /#([^#]+)$/.exec(href);\n                if (!idMatchResult)\n                    return;\n                const linkEl = document.getElementById(idMatchResult[1]);\n                if (linkEl && offsetTarget) {\n                    const { top, height } = getOffset(linkEl, offsetTarget);\n                    links.push({\n                        top,\n                        height,\n                        href\n                    });\n                }\n            });\n            links.sort((a, b) => {\n                // ascend top\n                if (a.top > b.top) {\n                    return 1;\n                    // descend height\n                }\n                else if (a.top === b.top && a.height < b.height) {\n                    return -1;\n                }\n                return -1;\n            });\n            const currentActiveHref = activeHrefRef.value;\n            const { bound, ignoreGap } = props;\n            const activeLink = links.reduce((prevLink, link) => {\n                if (link.top + link.height < 0) {\n                    if (ignoreGap) {\n                        return link;\n                    }\n                    else {\n                        return prevLink;\n                    }\n                }\n                if (link.top <= bound) {\n                    if (prevLink === null) {\n                        return link;\n                    }\n                    else if (link.top === prevLink.top) {\n                        if (link.href === currentActiveHref) {\n                            return link;\n                        }\n                        else\n                            return prevLink;\n                    }\n                    else if (link.top > prevLink.top) {\n                        return link;\n                    }\n                    else {\n                        return prevLink;\n                    }\n                }\n                return prevLink;\n            }, null);\n            if (!transition)\n                disableTransitionOneTick();\n            if (activeLink) {\n                activeHrefRef.value = activeLink.href;\n            }\n            else {\n                activeHrefRef.value = null;\n            }\n        }\n        provide(anchorInjectionKey, {\n            activeHref: activeHrefRef,\n            mergedClsPrefix: toRef(props, 'mergedClsPrefix'),\n            updateBarPosition,\n            setActiveHref,\n            collectedLinkHrefs,\n            titleEls\n        });\n        onMounted(() => {\n            document.addEventListener('scroll', handleScroll, true);\n            setActiveHref(window.location.hash);\n            _handleScroll(false);\n        });\n        onFontsReady(() => {\n            setActiveHref(window.location.hash);\n            _handleScroll(false);\n        });\n        onBeforeUnmount(() => {\n            document.removeEventListener('scroll', handleScroll, true);\n        });\n        watch(activeHrefRef, (value) => {\n            if (value === null) {\n                const { value: slotEl } = slotRef;\n                if (slotEl && !isBlockTypeRef.value) {\n                    slotEl.style.maxWidth = '0';\n                }\n            }\n        });\n        return {\n            selfRef,\n            barRef,\n            slotRef,\n            setActiveHref,\n            activeHref: activeHrefRef,\n            isBlockType: isBlockTypeRef,\n            mergedShowRail: mergedShowRailRef\n        };\n    },\n    render() {\n        var _a;\n        const { mergedClsPrefix, mergedShowRail, isBlockType, $slots } = this;\n        const Anchor = (h(\"div\", { class: [\n                `${mergedClsPrefix}-anchor`,\n                isBlockType && `${mergedClsPrefix}-anchor--block`,\n                mergedShowRail && `${mergedClsPrefix}-anchor--show-rail`\n            ], ref: \"selfRef\" },\n            mergedShowRail && this.showBackground ? (h(\"div\", { ref: \"slotRef\", class: `${mergedClsPrefix}-anchor-link-background` })) : null,\n            mergedShowRail ? (h(\"div\", { class: `${mergedClsPrefix}-anchor-rail` },\n                h(\"div\", { ref: \"barRef\", class: [\n                        `${mergedClsPrefix}-anchor-rail__bar`,\n                        this.activeHref !== null &&\n                            `${mergedClsPrefix}-anchor-rail__bar--active`\n                    ] }))) : null, (_a = $slots.default) === null || _a === void 0 ? void 0 :\n            _a.call($slots)));\n        return this.internalScrollable ? (h(NScrollbar, null, {\n            default: () => Anchor\n        })) : (Anchor);\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}