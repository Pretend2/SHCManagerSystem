{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n\n/* eslint-disable @typescript-eslint/no-dynamic-delete */\nimport { Fragment, h, reactive, ref, Teleport, defineComponent, provide } from 'vue';\nimport { createId } from 'seemly';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { omit, createInjectionKey } from '../../_utils';\nimport { notificationLight } from '../styles';\nimport { NotificationContainer } from './NotificationContainer';\nimport { NotificationEnvironment } from './NotificationEnvironment';\nimport { notificationProviderInjectionKey } from './context';\nimport style from './styles/index.cssr';\nexport const notificationApiInjectionKey = createInjectionKey('n-notification-api');\nexport const notificationProviderProps = Object.assign(Object.assign({}, useTheme.props), {\n  containerStyle: [String, Object],\n  to: [String, Object],\n  scrollable: {\n    type: Boolean,\n    default: true\n  },\n  max: Number,\n  placement: {\n    type: String,\n    default: 'top-right'\n  },\n  keepAliveOnHover: Boolean\n});\nexport default defineComponent({\n  name: 'NotificationProvider',\n  props: notificationProviderProps,\n\n  setup(props) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    const notificationListRef = ref([]);\n    const notificationRefs = {};\n    const leavingKeySet = new Set();\n\n    function create(options) {\n      const key = createId();\n\n      const destroy = () => {\n        leavingKeySet.add(key); // If you push n + 1 message when max is n, notificationRefs[key] maybe not be set\n\n        if (notificationRefs[key]) {\n          notificationRefs[key].hide();\n        }\n      };\n\n      const notificationReactive = reactive(Object.assign(Object.assign({}, options), {\n        key,\n        destroy,\n        hide: destroy,\n        deactivate: destroy\n      }));\n      const {\n        max\n      } = props;\n\n      if (max && notificationListRef.value.length - leavingKeySet.size >= max) {\n        let someoneMountedRemoved = false;\n        let index = 0;\n\n        for (const notification of notificationListRef.value) {\n          if (!leavingKeySet.has(notification.key)) {\n            if (notificationRefs[notification.key]) {\n              notification.destroy();\n              someoneMountedRemoved = true;\n            }\n\n            break;\n          }\n\n          index++;\n        }\n\n        if (!someoneMountedRemoved) {\n          notificationListRef.value.splice(index, 1);\n        }\n      }\n\n      notificationListRef.value.push(notificationReactive);\n      return notificationReactive;\n    }\n\n    const apis = ['info', 'success', 'warning', 'error'].map(type => {\n      return options => create(Object.assign(Object.assign({}, options), {\n        type\n      }));\n    });\n\n    function handleAfterLeave(key) {\n      leavingKeySet.delete(key);\n      notificationListRef.value.splice(notificationListRef.value.findIndex(notification => notification.key === key), 1);\n    }\n\n    const themeRef = useTheme('Notification', '-notification', style, notificationLight, props, mergedClsPrefixRef);\n    const api = {\n      create,\n      info: apis[0],\n      success: apis[1],\n      warning: apis[2],\n      error: apis[3],\n      open,\n      destroyAll\n    };\n    const wipTransitionCountRef = ref(0);\n    provide(notificationApiInjectionKey, api);\n    provide(notificationProviderInjectionKey, {\n      props,\n      mergedClsPrefixRef,\n      mergedThemeRef: themeRef,\n      wipTransitionCountRef\n    }); // deprecated\n\n    function open(options) {\n      return create(options);\n    }\n\n    function destroyAll() {\n      Object.values(notificationListRef.value).forEach(notification => {\n        notification.hide();\n      });\n    }\n\n    return Object.assign({\n      mergedClsPrefix: mergedClsPrefixRef,\n      notificationList: notificationListRef,\n      notificationRefs,\n      handleAfterLeave\n    }, api);\n  },\n\n  render() {\n    var _a, _b, _c;\n\n    const {\n      placement\n    } = this;\n    return h(Fragment, null, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a), this.notificationList.length ? h(Teleport, {\n      to: (_c = this.to) !== null && _c !== void 0 ? _c : 'body'\n    }, h(NotificationContainer, {\n      style: this.containerStyle,\n      scrollable: this.scrollable && placement !== 'top' && placement !== 'bottom',\n      placement: placement\n    }, {\n      default: () => {\n        return this.notificationList.map(notification => {\n          return h(NotificationEnvironment, Object.assign({\n            ref: inst => {\n              const refKey = notification.key;\n\n              if (inst === null) {\n                delete this.notificationRefs[refKey];\n              } else this.notificationRefs[refKey] = inst;\n            }\n          }, omit(notification, ['destroy', 'hide', 'deactivate']), {\n            internalKey: notification.key,\n            onInternalAfterLeave: this.handleAfterLeave,\n            keepAliveOnHover: notification.keepAliveOnHover === undefined ? this.keepAliveOnHover : notification.keepAliveOnHover\n          }));\n        });\n      }\n    })) : null);\n  }\n\n});","map":{"version":3,"names":["Fragment","h","reactive","ref","Teleport","defineComponent","provide","createId","useConfig","useTheme","omit","createInjectionKey","notificationLight","NotificationContainer","NotificationEnvironment","notificationProviderInjectionKey","style","notificationApiInjectionKey","notificationProviderProps","Object","assign","props","containerStyle","String","to","scrollable","type","Boolean","default","max","Number","placement","keepAliveOnHover","name","setup","mergedClsPrefixRef","notificationListRef","notificationRefs","leavingKeySet","Set","create","options","key","destroy","add","hide","notificationReactive","deactivate","value","length","size","someoneMountedRemoved","index","notification","has","splice","push","apis","map","handleAfterLeave","delete","findIndex","themeRef","api","info","success","warning","error","open","destroyAll","wipTransitionCountRef","mergedThemeRef","values","forEach","mergedClsPrefix","notificationList","render","_a","_b","_c","$slots","call","inst","refKey","internalKey","onInternalAfterLeave","undefined"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/notification/src/NotificationProvider.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-dynamic-delete */\nimport { Fragment, h, reactive, ref, Teleport, defineComponent, provide } from 'vue';\nimport { createId } from 'seemly';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { omit, createInjectionKey } from '../../_utils';\nimport { notificationLight } from '../styles';\nimport { NotificationContainer } from './NotificationContainer';\nimport { NotificationEnvironment } from './NotificationEnvironment';\nimport { notificationProviderInjectionKey } from './context';\nimport style from './styles/index.cssr';\nexport const notificationApiInjectionKey = createInjectionKey('n-notification-api');\nexport const notificationProviderProps = Object.assign(Object.assign({}, useTheme.props), { containerStyle: [String, Object], to: [String, Object], scrollable: {\n        type: Boolean,\n        default: true\n    }, max: Number, placement: {\n        type: String,\n        default: 'top-right'\n    }, keepAliveOnHover: Boolean });\nexport default defineComponent({\n    name: 'NotificationProvider',\n    props: notificationProviderProps,\n    setup(props) {\n        const { mergedClsPrefixRef } = useConfig(props);\n        const notificationListRef = ref([]);\n        const notificationRefs = {};\n        const leavingKeySet = new Set();\n        function create(options) {\n            const key = createId();\n            const destroy = () => {\n                leavingKeySet.add(key);\n                // If you push n + 1 message when max is n, notificationRefs[key] maybe not be set\n                if (notificationRefs[key]) {\n                    notificationRefs[key].hide();\n                }\n            };\n            const notificationReactive = reactive(Object.assign(Object.assign({}, options), { key,\n                destroy, hide: destroy, deactivate: destroy }));\n            const { max } = props;\n            if (max && notificationListRef.value.length - leavingKeySet.size >= max) {\n                let someoneMountedRemoved = false;\n                let index = 0;\n                for (const notification of notificationListRef.value) {\n                    if (!leavingKeySet.has(notification.key)) {\n                        if (notificationRefs[notification.key]) {\n                            notification.destroy();\n                            someoneMountedRemoved = true;\n                        }\n                        break;\n                    }\n                    index++;\n                }\n                if (!someoneMountedRemoved) {\n                    notificationListRef.value.splice(index, 1);\n                }\n            }\n            notificationListRef.value.push(notificationReactive);\n            return notificationReactive;\n        }\n        const apis = ['info', 'success', 'warning', 'error'].map((type) => {\n            return (options) => create(Object.assign(Object.assign({}, options), { type }));\n        });\n        function handleAfterLeave(key) {\n            leavingKeySet.delete(key);\n            notificationListRef.value.splice(notificationListRef.value.findIndex((notification) => notification.key === key), 1);\n        }\n        const themeRef = useTheme('Notification', '-notification', style, notificationLight, props, mergedClsPrefixRef);\n        const api = {\n            create,\n            info: apis[0],\n            success: apis[1],\n            warning: apis[2],\n            error: apis[3],\n            open,\n            destroyAll\n        };\n        const wipTransitionCountRef = ref(0);\n        provide(notificationApiInjectionKey, api);\n        provide(notificationProviderInjectionKey, {\n            props,\n            mergedClsPrefixRef,\n            mergedThemeRef: themeRef,\n            wipTransitionCountRef\n        });\n        // deprecated\n        function open(options) {\n            return create(options);\n        }\n        function destroyAll() {\n            Object.values(notificationListRef.value).forEach((notification) => {\n                notification.hide();\n            });\n        }\n        return Object.assign({\n            mergedClsPrefix: mergedClsPrefixRef,\n            notificationList: notificationListRef,\n            notificationRefs,\n            handleAfterLeave\n        }, api);\n    },\n    render() {\n        var _a, _b, _c;\n        const { placement } = this;\n        return (h(Fragment, null, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 :\n            _b.call(_a),\n            this.notificationList.length ? (h(Teleport, { to: (_c = this.to) !== null && _c !== void 0 ? _c : 'body' },\n                h(NotificationContainer, { style: this.containerStyle, scrollable: this.scrollable && placement !== 'top' && placement !== 'bottom', placement: placement }, {\n                    default: () => {\n                        return this.notificationList.map((notification) => {\n                            return (h(NotificationEnvironment, Object.assign({ ref: ((inst) => {\n                                    const refKey = notification.key;\n                                    if (inst === null) {\n                                        delete this.notificationRefs[refKey];\n                                    }\n                                    else\n                                        this.notificationRefs[refKey] = inst;\n                                }) }, omit(notification, [\n                                'destroy',\n                                'hide',\n                                'deactivate'\n                            ]), { internalKey: notification.key, onInternalAfterLeave: this.handleAfterLeave, keepAliveOnHover: notification.keepAliveOnHover === undefined\n                                    ? this.keepAliveOnHover\n                                    : notification.keepAliveOnHover })));\n                        });\n                    }\n                }))) : null));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}