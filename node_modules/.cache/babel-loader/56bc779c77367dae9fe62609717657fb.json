{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nconst __default__ = {\n  name: 'HousingOption'\n};\nimport { ref, toRefs, inject, reactive, watch, computed } from 'vue'; // 引入 naive-ui 组件\n\nimport { NModal, NCard, NSpace, NButton, NSelect, useMessage, NGridItem, NGrid } from 'naive-ui'; // 引入 axios\n\nimport axios from 'axios';\nimport QueryString from 'qs';\nimport { mergeObject } from '../util/BaseUtil'; // 接收全局变量\n\nexport default /*#__PURE__*/Object.assign(__default__, {\n  props: {\n    show: {\n      // 接收标题参数\n      type: Boolean,\n      // 参数类型为 Boolean 类型\n      default: false // 默认值\n\n    }\n  },\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props; // 引入 vue\n\n    const global = inject(\"global\"); // 获取 message 对象\n\n    const message = useMessage(); // props 参数\n    // 接收响应式数据\n\n    const {\n      show\n    } = toRefs(props); // 加载\n\n    const buildingLoading = ref(false); // 楼栋\n\n    const housingLoading = ref(false); // 房屋\n\n    const selectDisabled = reactive({\n      buildingDisabled: computed(() => {\n        return housingLoading.value;\n      }),\n      housingDisabled: computed(() => {\n        return selectOption.buildingValue == null;\n      })\n    });\n    const selectOption = reactive({\n      buildingValue: null,\n      housingValue: null\n    });\n    watch(() => selectOption.buildingValue, (newValue, oldValue) => {\n      loadHousing(newValue.id);\n    }); // 楼栋数据\n\n    const buildingOptions = ref([]); // 房屋数据\n\n    const housingOptions = ref([]);\n    const housingInfo = ref({\n      id: null,\n      housesNo: null,\n      unitNo: null,\n      floor: null,\n      propertyType: null,\n      area: null,\n      remark: null\n    });\n    /**\r\n     * 加载楼栋信息\r\n     */\n\n    const loadBuilding = () => {\n      buildingLoading.value = true;\n      axios({\n        method: 'get',\n        url: global.api + '/getAllBuildings'\n      }).then(res => {\n        buildingOptions.value = [];\n\n        for (let building of res.data) {\n          const buildingData = {\n            label: building.name,\n            value: building\n          };\n          buildingOptions.value.push(buildingData);\n        }\n      }).catch(err => {\n        message.error(\"楼栋加载失败！\" + err);\n      }).finally(() => {\n        buildingLoading.value = false;\n      });\n    };\n    /**\r\n     * 加载房屋信息\r\n     */\n\n\n    const loadHousing = id => {\n      housingLoading.value = true;\n      axios({\n        method: 'get',\n        url: global.api + '/getHousesByBuildingId/' + id\n      }).then(res => {\n        housingOptions.value = [];\n\n        for (let housing of res.data) {\n          const housingData = {\n            label: housing.unit.unitNo + \" - \" + housing.housesNo,\n            value: housing\n          };\n          housingOptions.value.push(housingData);\n        }\n      }).catch(err => {\n        message.error(\"房屋加载失败！\" + err);\n      }).finally(() => {\n        housingLoading.value = false;\n      });\n    }; // 调用加载楼栋\n\n\n    loadBuilding();\n    const __returned__ = {\n      global,\n      message,\n      props,\n      show,\n      buildingLoading,\n      housingLoading,\n      selectDisabled,\n      selectOption,\n      buildingOptions,\n      housingOptions,\n      housingInfo,\n      loadBuilding,\n      loadHousing,\n      ref,\n      toRefs,\n      inject,\n      reactive,\n      watch,\n      computed,\n      NModal,\n      NCard,\n      NSpace,\n      NButton,\n      NSelect,\n      useMessage,\n      NGridItem,\n      NGrid,\n      axios,\n      QueryString,\n      mergeObject\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n});","map":{"version":3,"mappings":"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","names":["name","ref","toRefs","inject","reactive","watch","computed","NModal","NCard","NSpace","NButton","NSelect","useMessage","NGridItem","NGrid","axios","QueryString","mergeObject","global","message","show","props","buildingLoading","housingLoading","selectDisabled","buildingDisabled","value","housingDisabled","selectOption","buildingValue","housingValue","newValue","oldValue","loadHousing","id","buildingOptions","housingOptions","housingInfo","housesNo","unitNo","floor","propertyType","area","remark","loadBuilding","method","url","api","then","res","building","data","buildingData","label","push","catch","err","error","finally","housing","housingData","unit"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/src/components/HousingOption.vue"],"sourcesContent":["<template>\r\n    <n-modal :show=\"show\" transform-origin=\"center\">\r\n        <n-card style=\"width: 800px\" title=\"选择房屋\" :bordered=\"false\" size=\"huge\" role=\"dialog\" aria-modal=\"true\">\r\n\r\n            <div class=\"my-select\">\r\n                <n-select v-model:value=\"selectOption.buildingValue\" filterable :loading=\"buildingLoading\"\r\n                    style=\"margin-right: 5px;\" :disabled=\"selectDisabled.buildingDisabled\" :options=\"buildingOptions\"\r\n                    placeholder=\"请选择楼栋\" />\r\n                <n-select v-model:value=\"selectOption.housingValue\" filterable :loading=\"housingLoading\"\r\n                    style=\"margin-left: 5px\" :disabled=\"selectDisabled.housingDisabled\" :options=\"housingOptions\"\r\n                    placeholder=\"请选择房屋\" />\r\n            </div>\r\n\r\n            <n-grid v-if=\"selectOption.housingValue != null\" style=\"margin: 16px;\" cols=\"1 400:2 600:3\">\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        房屋ID：{{housingInfo.id}}\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        房屋编号：{{housingInfo.housesNo}}\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        单元：{{housingInfo.unitNo}} 单元\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        楼层： {{housingInfo.floor}}\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        户型：{{housingInfo.propertyType}}\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        建筑面积：{{housingInfo.area}}\r\n                    </div>\r\n                </n-grid-item>\r\n                <n-grid-item>\r\n                    <div class=\"sub-info\">\r\n                        备注：{{housingInfo.remark}}\r\n                    </div>\r\n                </n-grid-item>\r\n            </n-grid>\r\n\r\n            <template #footer>\r\n                <slot name=\"footer\"></slot>\r\n            </template>\r\n        </n-card>\r\n    </n-modal>\r\n</template>\r\n\r\n<script setup>\r\n// 引入 vue\r\nimport { ref, toRefs, inject, reactive, watch, computed } from 'vue'\r\n// 引入 naive-ui 组件\r\nimport {\r\n    NModal, NCard, NSpace, NButton, NSelect,\r\n    useMessage, NGridItem, NGrid\r\n} from 'naive-ui'\r\n// 引入 axios\r\nimport axios from 'axios';\r\n\r\nimport QueryString from 'qs'\r\n\r\nimport { mergeObject } from '../util/BaseUtil'\r\n\r\n// 接收全局变量\r\nconst global = inject(\"global\")\r\n\r\n// 获取 message 对象\r\nconst message = useMessage();\r\n\r\n// props 参数\r\nconst props = defineProps({\r\n    show: { // 接收标题参数\r\n        type: Boolean, // 参数类型为 Boolean 类型\r\n        default: false // 默认值\r\n    }\r\n})\r\n\r\n// 接收响应式数据\r\nconst { show } = toRefs(props);\r\n\r\n// 加载\r\nconst buildingLoading = ref(false) // 楼栋\r\nconst housingLoading = ref(false) // 房屋\r\n\r\nconst selectDisabled = reactive({\r\n    buildingDisabled: computed(() => {\r\n        return housingLoading.value\r\n    }),\r\n    housingDisabled: computed(() => {\r\n        return selectOption.buildingValue == null\r\n    })\r\n})\r\n\r\nconst selectOption = reactive({\r\n    buildingValue: null,\r\n    housingValue: null,\r\n})\r\n\r\nwatch(() => selectOption.buildingValue, (newValue, oldValue) => {\r\n    loadHousing(newValue.id)\r\n})\r\n\r\n// 楼栋数据\r\nconst buildingOptions = ref([])\r\n// 房屋数据\r\nconst housingOptions = ref([])\r\n\r\nconst housingInfo = ref({\r\n    id: null,\r\n    housesNo: null,\r\n    unitNo: null,\r\n    floor: null,\r\n    propertyType: null,\r\n    area: null,\r\n    remark: null\r\n})\r\n\r\n/**\r\n * 加载楼栋信息\r\n */\r\nconst loadBuilding = () => {\r\n    buildingLoading.value = true\r\n    axios({\r\n        method: 'get',\r\n        url: global.api + '/getAllBuildings'\r\n    }).then(res => {\r\n        buildingOptions.value = []\r\n        for (let building of res.data) {\r\n            const buildingData = {\r\n                label: building.name,\r\n                value: building,\r\n            }\r\n            buildingOptions.value.push(buildingData)\r\n        }\r\n    }).catch(err => {\r\n        message.error(\"楼栋加载失败！\" + err)\r\n    }).finally(() => {\r\n        buildingLoading.value = false\r\n    })\r\n}\r\n/**\r\n * 加载房屋信息\r\n */\r\nconst loadHousing = (id) => {\r\n    housingLoading.value = true\r\n    axios({\r\n        method: 'get',\r\n        url: global.api + '/getHousesByBuildingId/' + id\r\n    }).then(res => {\r\n        housingOptions.value = []\r\n        for (let housing of res.data) {\r\n            const housingData = {\r\n                label: housing.unit.unitNo + \" - \" + housing.housesNo,\r\n                value: housing,\r\n            }\r\n            housingOptions.value.push(housingData)\r\n        }\r\n    }).catch(err => {\r\n        message.error(\"房屋加载失败！\" + err)\r\n    }).finally(() => {\r\n        housingLoading.value = false\r\n    })\r\n}\r\n// 调用加载楼栋\r\nloadBuilding()\r\n\r\n</script>\r\n<script>\r\nexport default {\r\n    name: 'HousingOption'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.my-select {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}