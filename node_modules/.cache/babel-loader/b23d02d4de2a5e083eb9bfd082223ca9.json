{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, defineComponent, Fragment, ref, computed, watch, toRef, nextTick, watchEffect, onMounted } from 'vue';\nimport { VOverflow } from 'vueuc';\nimport { NPopover } from '../../../popover';\nimport { NTag } from '../../../tag';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport { createKey, getTitleAttribute, render, useOnResize, Wrapper } from '../../../_utils';\nimport Suffix from '../../suffix';\nimport { internalSelectionLight } from '../styles';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n  name: 'InternalSelection',\n  props: Object.assign(Object.assign({}, useTheme.props), {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    bordered: {\n      type: Boolean,\n      default: undefined\n    },\n    active: Boolean,\n    pattern: {\n      type: String,\n      default: ''\n    },\n    placeholder: String,\n    selectedOption: {\n      type: Object,\n      default: null\n    },\n    selectedOptions: {\n      type: Array,\n      default: null\n    },\n    labelField: {\n      type: String,\n      default: 'label'\n    },\n    valueField: {\n      type: String,\n      default: 'value'\n    },\n    multiple: Boolean,\n    filterable: Boolean,\n    clearable: Boolean,\n    disabled: Boolean,\n    size: {\n      type: String,\n      default: 'medium'\n    },\n    loading: Boolean,\n    autofocus: Boolean,\n    showArrow: {\n      type: Boolean,\n      default: true\n    },\n    inputProps: Object,\n    focused: Boolean,\n    renderTag: Function,\n    onKeydown: Function,\n    onClick: Function,\n    onBlur: Function,\n    onFocus: Function,\n    onDeleteOption: Function,\n    maxTagCount: [String, Number],\n    onClear: Function,\n    onPatternInput: Function,\n    onPatternFocus: Function,\n    onPatternBlur: Function,\n    renderLabel: Function,\n    status: String,\n    inlineThemeDisabled: Boolean,\n    onResize: Function\n  }),\n\n  setup(props) {\n    const patternInputMirrorRef = ref(null);\n    const patternInputRef = ref(null);\n    const selfRef = ref(null);\n    const multipleElRef = ref(null);\n    const singleElRef = ref(null);\n    const patternInputWrapperRef = ref(null);\n    const counterRef = ref(null);\n    const counterWrapperRef = ref(null);\n    const overflowRef = ref(null);\n    const inputTagElRef = ref(null);\n    const showTagsPopoverRef = ref(false);\n    const patternInputFocusedRef = ref(false);\n    const hoverRef = ref(false);\n    const themeRef = useTheme('InternalSelection', '-internal-selection', style, internalSelectionLight, props, toRef(props, 'clsPrefix'));\n    const mergedClearableRef = computed(() => {\n      return props.clearable && !props.disabled && (hoverRef.value || props.active);\n    });\n    const filterablePlaceholderRef = computed(() => {\n      return props.selectedOption ? props.renderTag ? props.renderTag({\n        option: props.selectedOption,\n        handleClose: () => {}\n      }) : props.renderLabel ? props.renderLabel(props.selectedOption, true) : render(props.selectedOption[props.labelField], props.selectedOption, true) : props.placeholder;\n    });\n    const labelRef = computed(() => {\n      const option = props.selectedOption;\n      if (!option) return undefined;\n      return option[props.labelField];\n    });\n    const selectedRef = computed(() => {\n      if (props.multiple) {\n        return !!(Array.isArray(props.selectedOptions) && props.selectedOptions.length);\n      } else {\n        return props.selectedOption !== null;\n      }\n    });\n\n    function syncMirrorWidth() {\n      var _a;\n\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n\n      if (patternInputMirrorEl) {\n        const {\n          value: patternInputEl\n        } = patternInputRef;\n\n        if (patternInputEl) {\n          patternInputEl.style.width = `${patternInputMirrorEl.offsetWidth}px`;\n\n          if (props.maxTagCount !== 'responsive') {\n            (_a = overflowRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n          }\n        }\n      }\n    }\n\n    function hideInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'none';\n    }\n\n    function showInputTag() {\n      const {\n        value: inputTagEl\n      } = inputTagElRef;\n      if (inputTagEl) inputTagEl.style.display = 'inline-block';\n    }\n\n    watch(toRef(props, 'active'), value => {\n      if (!value) hideInputTag();\n    });\n    watch(toRef(props, 'pattern'), () => {\n      if (props.multiple) {\n        void nextTick(syncMirrorWidth);\n      }\n    });\n\n    function doFocus(e) {\n      const {\n        onFocus\n      } = props;\n      if (onFocus) onFocus(e);\n    }\n\n    function doBlur(e) {\n      const {\n        onBlur\n      } = props;\n      if (onBlur) onBlur(e);\n    }\n\n    function doDeleteOption(value) {\n      const {\n        onDeleteOption\n      } = props;\n      if (onDeleteOption) onDeleteOption(value);\n    }\n\n    function doClear(e) {\n      const {\n        onClear\n      } = props;\n      if (onClear) onClear(e);\n    }\n\n    function doPatternInput(value) {\n      const {\n        onPatternInput\n      } = props;\n      if (onPatternInput) onPatternInput(value);\n    }\n\n    function handleFocusin(e) {\n      var _a;\n\n      if (!e.relatedTarget || !((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n        doFocus(e);\n      }\n    }\n\n    function handleFocusout(e) {\n      var _a;\n\n      if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget)) return;\n      doBlur(e);\n    }\n\n    function handleClear(e) {\n      doClear(e);\n    }\n\n    function handleMouseEnter() {\n      hoverRef.value = true;\n    }\n\n    function handleMouseLeave() {\n      hoverRef.value = false;\n    }\n\n    function handleMouseDown(e) {\n      if (!props.active || !props.filterable) return;\n      if (e.target === patternInputRef.value) return;\n      e.preventDefault();\n    }\n\n    function handleDeleteOption(option) {\n      doDeleteOption(option);\n    }\n\n    function handlePatternKeyDown(e) {\n      if (e.key === 'Backspace' && !isCompositingRef.value) {\n        if (!props.pattern.length) {\n          const {\n            selectedOptions\n          } = props;\n\n          if (selectedOptions === null || selectedOptions === void 0 ? void 0 : selectedOptions.length) {\n            handleDeleteOption(selectedOptions[selectedOptions.length - 1]);\n          }\n        }\n      }\n    }\n\n    const isCompositingRef = ref(false); // the composition end is later than its input so we can cached the event\n    // and return the input event\n\n    let cachedInputEvent = null;\n\n    function handlePatternInputInput(e) {\n      // we should sync mirror width here\n      const {\n        value: patternInputMirrorEl\n      } = patternInputMirrorRef;\n\n      if (patternInputMirrorEl) {\n        const inputText = e.target.value;\n        patternInputMirrorEl.textContent = inputText;\n        syncMirrorWidth();\n      }\n\n      if (!isCompositingRef.value) {\n        doPatternInput(e);\n      } else {\n        cachedInputEvent = e;\n      }\n    }\n\n    function handleCompositionStart() {\n      isCompositingRef.value = true;\n    }\n\n    function handleCompositionEnd() {\n      isCompositingRef.value = false;\n      doPatternInput(cachedInputEvent);\n      cachedInputEvent = null;\n    }\n\n    function handlePatternInputFocus(e) {\n      var _a;\n\n      patternInputFocusedRef.value = true;\n      (_a = props.onPatternFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n\n    function handlePatternInputBlur(e) {\n      var _a;\n\n      patternInputFocusedRef.value = false;\n      (_a = props.onPatternBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n\n    function blur() {\n      var _a, _b;\n\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n        (_b = patternInputRef.value) === null || _b === void 0 ? void 0 : _b.blur();\n      } else if (props.multiple) {\n        const {\n          value: multipleEl\n        } = multipleElRef;\n        multipleEl === null || multipleEl === void 0 ? void 0 : multipleEl.blur();\n      } else {\n        const {\n          value: singleEl\n        } = singleElRef;\n        singleEl === null || singleEl === void 0 ? void 0 : singleEl.blur();\n      }\n    }\n\n    function focus() {\n      var _a, _b, _c;\n\n      if (props.filterable) {\n        patternInputFocusedRef.value = false;\n        (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n      } else if (props.multiple) {\n        (_b = multipleElRef.value) === null || _b === void 0 ? void 0 : _b.focus();\n      } else {\n        (_c = singleElRef.value) === null || _c === void 0 ? void 0 : _c.focus();\n      }\n    }\n\n    function focusInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n\n      if (patternInputEl) {\n        showInputTag();\n        patternInputEl.focus();\n      }\n    }\n\n    function blurInput() {\n      const {\n        value: patternInputEl\n      } = patternInputRef;\n\n      if (patternInputEl) {\n        patternInputEl.blur();\n      }\n    }\n\n    function updateCounter(count) {\n      const {\n        value\n      } = counterRef;\n\n      if (value) {\n        value.setTextContent(`+${count}`);\n      }\n    }\n\n    function getCounter() {\n      const {\n        value\n      } = counterWrapperRef;\n      return value;\n    }\n\n    function getTail() {\n      return patternInputRef.value;\n    }\n\n    let enterTimerId = null;\n\n    function clearEnterTimer() {\n      if (enterTimerId !== null) window.clearTimeout(enterTimerId);\n    }\n\n    function handleMouseEnterCounter() {\n      if (props.disabled || props.active) return;\n      clearEnterTimer();\n      enterTimerId = window.setTimeout(() => {\n        showTagsPopoverRef.value = true;\n      }, 100);\n    }\n\n    function handleMouseLeaveCounter() {\n      clearEnterTimer();\n    }\n\n    function onPopoverUpdateShow(show) {\n      if (!show) {\n        clearEnterTimer();\n        showTagsPopoverRef.value = false;\n      }\n    }\n\n    onMounted(() => {\n      watchEffect(() => {\n        const patternInputWrapperEl = patternInputWrapperRef.value;\n        if (!patternInputWrapperEl) return;\n        patternInputWrapperEl.tabIndex = props.disabled || patternInputFocusedRef.value ? -1 : 0;\n      });\n    });\n    useOnResize(selfRef, props.onResize);\n    const {\n      inlineThemeDisabled\n    } = props;\n    const cssVarsRef = computed(() => {\n      const {\n        size\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          borderRadius,\n          color,\n          placeholderColor,\n          textColor,\n          paddingSingle,\n          paddingMultiple,\n          caretColor,\n          colorDisabled,\n          textColorDisabled,\n          placeholderColorDisabled,\n          colorActive,\n          boxShadowFocus,\n          boxShadowActive,\n          boxShadowHover,\n          border,\n          borderFocus,\n          borderHover,\n          borderActive,\n          arrowColor,\n          arrowColorDisabled,\n          loadingColor,\n          // form warning\n          colorActiveWarning,\n          boxShadowFocusWarning,\n          boxShadowActiveWarning,\n          boxShadowHoverWarning,\n          borderWarning,\n          borderFocusWarning,\n          borderHoverWarning,\n          borderActiveWarning,\n          // form error\n          colorActiveError,\n          boxShadowFocusError,\n          boxShadowActiveError,\n          boxShadowHoverError,\n          borderError,\n          borderFocusError,\n          borderHoverError,\n          borderActiveError,\n          // clear\n          clearColor,\n          clearColorHover,\n          clearColorPressed,\n          clearSize,\n          // arrow\n          arrowSize,\n          [createKey('height', size)]: height,\n          [createKey('fontSize', size)]: fontSize\n        }\n      } = themeRef.value;\n      return {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border': border,\n        '--n-border-active': borderActive,\n        '--n-border-focus': borderFocus,\n        '--n-border-hover': borderHover,\n        '--n-border-radius': borderRadius,\n        '--n-box-shadow-active': boxShadowActive,\n        '--n-box-shadow-focus': boxShadowFocus,\n        '--n-box-shadow-hover': boxShadowHover,\n        '--n-caret-color': caretColor,\n        '--n-color': color,\n        '--n-color-active': colorActive,\n        '--n-color-disabled': colorDisabled,\n        '--n-font-size': fontSize,\n        '--n-height': height,\n        '--n-padding-single': paddingSingle,\n        '--n-padding-multiple': paddingMultiple,\n        '--n-placeholder-color': placeholderColor,\n        '--n-placeholder-color-disabled': placeholderColorDisabled,\n        '--n-text-color': textColor,\n        '--n-text-color-disabled': textColorDisabled,\n        '--n-arrow-color': arrowColor,\n        '--n-arrow-color-disabled': arrowColorDisabled,\n        '--n-loading-color': loadingColor,\n        // form warning\n        '--n-color-active-warning': colorActiveWarning,\n        '--n-box-shadow-focus-warning': boxShadowFocusWarning,\n        '--n-box-shadow-active-warning': boxShadowActiveWarning,\n        '--n-box-shadow-hover-warning': boxShadowHoverWarning,\n        '--n-border-warning': borderWarning,\n        '--n-border-focus-warning': borderFocusWarning,\n        '--n-border-hover-warning': borderHoverWarning,\n        '--n-border-active-warning': borderActiveWarning,\n        // form error\n        '--n-color-active-error': colorActiveError,\n        '--n-box-shadow-focus-error': boxShadowFocusError,\n        '--n-box-shadow-active-error': boxShadowActiveError,\n        '--n-box-shadow-hover-error': boxShadowHoverError,\n        '--n-border-error': borderError,\n        '--n-border-focus-error': borderFocusError,\n        '--n-border-hover-error': borderHoverError,\n        '--n-border-active-error': borderActiveError,\n        // clear\n        '--n-clear-size': clearSize,\n        '--n-clear-color': clearColor,\n        '--n-clear-color-hover': clearColorHover,\n        '--n-clear-color-pressed': clearColorPressed,\n        // arrow-size\n        '--n-arrow-size': arrowSize\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('internal-selection', computed(() => {\n      return props.size[0];\n    }), cssVarsRef, props) : undefined;\n    return {\n      mergedTheme: themeRef,\n      mergedClearable: mergedClearableRef,\n      patternInputFocused: patternInputFocusedRef,\n      filterablePlaceholder: filterablePlaceholderRef,\n      label: labelRef,\n      selected: selectedRef,\n      showTagsPanel: showTagsPopoverRef,\n      isCompositing: isCompositingRef,\n      // dom ref\n      counterRef,\n      counterWrapperRef,\n      patternInputMirrorRef,\n      patternInputRef,\n      selfRef,\n      multipleElRef,\n      singleElRef,\n      patternInputWrapperRef,\n      overflowRef,\n      inputTagElRef,\n      handleMouseDown,\n      handleFocusin,\n      handleClear,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleDeleteOption,\n      handlePatternKeyDown,\n      handlePatternInputInput,\n      handlePatternInputBlur,\n      handlePatternInputFocus,\n      handleMouseEnterCounter,\n      handleMouseLeaveCounter,\n      handleFocusout,\n      handleCompositionEnd,\n      handleCompositionStart,\n      onPopoverUpdateShow,\n      focus,\n      focusInput,\n      blur,\n      blurInput,\n      updateCounter,\n      getCounter,\n      getTail,\n      renderLabel: props.renderLabel,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n\n  render() {\n    const {\n      status,\n      multiple,\n      size,\n      disabled,\n      filterable,\n      maxTagCount,\n      bordered,\n      clsPrefix,\n      onRender,\n      renderTag,\n      renderLabel\n    } = this;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    const maxTagCountResponsive = maxTagCount === 'responsive';\n    const maxTagCountNumeric = typeof maxTagCount === 'number';\n    const useMaxTagCount = maxTagCountResponsive || maxTagCountNumeric;\n    const suffix = h(Wrapper, null, {\n      default: () => h(Suffix, {\n        clsPrefix: clsPrefix,\n        loading: this.loading,\n        showArrow: this.showArrow,\n        showClear: this.mergedClearable && this.selected,\n        onClear: this.handleClear\n      }, {\n        default: () => {\n          var _a, _b;\n\n          return (_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n      })\n    });\n    let body;\n\n    if (multiple) {\n      const {\n        labelField\n      } = this;\n\n      const createTag = option => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        key: option.value\n      }, renderTag ? renderTag({\n        option,\n        handleClose: () => this.handleDeleteOption(option)\n      }) : h(NTag, {\n        size: size,\n        closable: !option.disabled,\n        disabled: disabled,\n        onClose: () => this.handleDeleteOption(option),\n        internalCloseFocusable: false\n      }, {\n        default: () => renderLabel ? renderLabel(option, true) : render(option[labelField], option, true)\n      }));\n\n      const originalTags = (maxTagCountNumeric ? this.selectedOptions.slice(0, maxTagCount) : this.selectedOptions).map(createTag);\n      const input = filterable ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-input-tag`,\n        ref: \"inputTagElRef\",\n        key: \"__input-tag__\"\n      }, h(\"input\", Object.assign({}, this.inputProps, {\n        ref: \"patternInputRef\",\n        tabindex: -1,\n        disabled: disabled,\n        value: this.pattern,\n        autofocus: this.autofocus,\n        class: `${clsPrefix}-base-selection-input-tag__input`,\n        onBlur: this.handlePatternInputBlur,\n        onFocus: this.handlePatternInputFocus,\n        onKeydown: this.handlePatternKeyDown,\n        onInput: this.handlePatternInputInput,\n        onCompositionstart: this.handleCompositionStart,\n        onCompositionend: this.handleCompositionEnd\n      })), h(\"span\", {\n        ref: \"patternInputMirrorRef\",\n        class: `${clsPrefix}-base-selection-input-tag__mirror`\n      }, this.pattern)) : null; // May Overflow\n\n      const renderCounter = maxTagCountResponsive ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-tag-wrapper`,\n        ref: \"counterWrapperRef\"\n      }, h(NTag, {\n        size: size,\n        ref: \"counterRef\",\n        onMouseenter: this.handleMouseEnterCounter,\n        onMouseleave: this.handleMouseLeaveCounter,\n        disabled: disabled\n      })) : undefined;\n      let counter;\n\n      if (maxTagCountNumeric) {\n        const rest = this.selectedOptions.length - maxTagCount;\n\n        if (rest > 0) {\n          counter = h(\"div\", {\n            class: `${clsPrefix}-base-selection-tag-wrapper`,\n            key: \"__counter__\"\n          }, h(NTag, {\n            size: size,\n            ref: \"counterRef\",\n            onMouseenter: this.handleMouseEnterCounter,\n            disabled: disabled\n          }, {\n            default: () => `+${rest}`\n          }));\n        }\n      }\n\n      const tags = maxTagCountResponsive ? filterable ? h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        getTail: this.getTail,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: () => originalTags,\n        counter: renderCounter,\n        tail: () => input\n      }) : h(VOverflow, {\n        ref: \"overflowRef\",\n        updateCounter: this.updateCounter,\n        getCounter: this.getCounter,\n        style: {\n          width: '100%',\n          display: 'flex',\n          overflow: 'hidden'\n        }\n      }, {\n        default: () => originalTags,\n        counter: renderCounter\n      }) : maxTagCountNumeric ? originalTags.concat(counter) : originalTags;\n      const renderPopover = useMaxTagCount ? () => h(\"div\", {\n        class: `${clsPrefix}-base-selection-popover`\n      }, maxTagCountResponsive ? originalTags : this.selectedOptions.map(createTag)) : undefined;\n      const popoverProps = useMaxTagCount ? {\n        show: this.showTagsPanel,\n        trigger: 'hover',\n        overlap: true,\n        placement: 'top',\n        width: 'trigger',\n        onUpdateShow: this.onPopoverUpdateShow,\n        theme: this.mergedTheme.peers.Popover,\n        themeOverrides: this.mergedTheme.peerOverrides.Popover\n      } : null;\n      const showPlaceholder = this.selected ? false : this.active ? !this.pattern && !this.isCompositing : true;\n      const placeholder = showPlaceholder ? h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`\n      }, h(\"div\", {\n        class: `${clsPrefix}-base-selection-placeholder__inner`\n      }, this.placeholder)) : null;\n      const popoverTrigger = filterable ? h(\"div\", {\n        ref: \"patternInputWrapperRef\",\n        class: `${clsPrefix}-base-selection-tags`\n      }, tags, maxTagCountResponsive ? null : input, suffix) : h(\"div\", {\n        ref: \"multipleElRef\",\n        class: `${clsPrefix}-base-selection-tags`,\n        tabindex: disabled ? undefined : 0\n      }, tags, suffix);\n      body = h(Fragment, null, useMaxTagCount ? h(NPopover, Object.assign({}, popoverProps, {\n        scrollable: true,\n        style: \"max-height: calc(var(--v-target-height) * 6.6);\"\n      }), {\n        trigger: () => popoverTrigger,\n        default: renderPopover\n      }) : popoverTrigger, placeholder);\n    } else {\n      if (filterable) {\n        const hasInput = this.pattern || this.isCompositing;\n        const showPlaceholder = this.active ? !hasInput : !this.selected;\n        const showSelectedLabel = this.active ? false : this.selected;\n        body = h(\"div\", {\n          ref: \"patternInputWrapperRef\",\n          class: `${clsPrefix}-base-selection-label`\n        }, h(\"input\", Object.assign({}, this.inputProps, {\n          ref: \"patternInputRef\",\n          class: `${clsPrefix}-base-selection-input`,\n          value: this.active ? this.pattern : '',\n          placeholder: \"\",\n          readonly: disabled,\n          disabled: disabled,\n          tabindex: -1,\n          autofocus: this.autofocus,\n          onFocus: this.handlePatternInputFocus,\n          onBlur: this.handlePatternInputBlur,\n          onInput: this.handlePatternInputInput,\n          onCompositionstart: this.handleCompositionStart,\n          onCompositionend: this.handleCompositionEnd\n        })), showSelectedLabel ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-label__render-label ${clsPrefix}-base-selection-overlay`,\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : null, showPlaceholder ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-overlay__wrapper`\n        }, this.filterablePlaceholder)) : null, suffix);\n      } else {\n        body = h(\"div\", {\n          ref: \"singleElRef\",\n          class: `${clsPrefix}-base-selection-label`,\n          tabindex: this.disabled ? undefined : 0\n        }, this.label !== undefined ? h(\"div\", {\n          class: `${clsPrefix}-base-selection-input`,\n          title: getTitleAttribute(this.label),\n          key: \"input\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-input__content`\n        }, renderTag ? renderTag({\n          option: this.selectedOption,\n          handleClose: () => {}\n        }) : renderLabel ? renderLabel(this.selectedOption, true) : render(this.label, this.selectedOption, true))) : h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`,\n          key: \"placeholder\"\n        }, h(\"div\", {\n          class: `${clsPrefix}-base-selection-placeholder__inner`\n        }, this.placeholder)), suffix);\n      }\n    }\n\n    return h(\"div\", {\n      ref: \"selfRef\",\n      class: [`${clsPrefix}-base-selection`, this.themeClass, status && `${clsPrefix}-base-selection--${status}-status`, {\n        [`${clsPrefix}-base-selection--active`]: this.active,\n        [`${clsPrefix}-base-selection--selected`]: this.selected || this.active && this.pattern,\n        [`${clsPrefix}-base-selection--disabled`]: this.disabled,\n        [`${clsPrefix}-base-selection--multiple`]: this.multiple,\n        // focus is not controlled by selection itself since it always need\n        // to be managed together with menu. provide :focus style will cause\n        // many redundant codes.\n        [`${clsPrefix}-base-selection--focus`]: this.focused\n      }],\n      style: this.cssVars,\n      onClick: this.onClick,\n      onMouseenter: this.handleMouseEnter,\n      onMouseleave: this.handleMouseLeave,\n      onKeydown: this.onKeydown,\n      onFocusin: this.handleFocusin,\n      onFocusout: this.handleFocusout,\n      onMousedown: this.handleMouseDown\n    }, body, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__border`\n    }) : null, bordered ? h(\"div\", {\n      class: `${clsPrefix}-base-selection__state-border`\n    }) : null);\n  }\n\n});","map":{"version":3,"names":["h","defineComponent","Fragment","ref","computed","watch","toRef","nextTick","watchEffect","onMounted","VOverflow","NPopover","NTag","useThemeClass","useTheme","createKey","getTitleAttribute","render","useOnResize","Wrapper","Suffix","internalSelectionLight","style","name","props","Object","assign","clsPrefix","type","String","required","bordered","Boolean","default","undefined","active","pattern","placeholder","selectedOption","selectedOptions","Array","labelField","valueField","multiple","filterable","clearable","disabled","size","loading","autofocus","showArrow","inputProps","focused","renderTag","Function","onKeydown","onClick","onBlur","onFocus","onDeleteOption","maxTagCount","Number","onClear","onPatternInput","onPatternFocus","onPatternBlur","renderLabel","status","inlineThemeDisabled","onResize","setup","patternInputMirrorRef","patternInputRef","selfRef","multipleElRef","singleElRef","patternInputWrapperRef","counterRef","counterWrapperRef","overflowRef","inputTagElRef","showTagsPopoverRef","patternInputFocusedRef","hoverRef","themeRef","mergedClearableRef","value","filterablePlaceholderRef","option","handleClose","labelRef","selectedRef","isArray","length","syncMirrorWidth","_a","patternInputMirrorEl","patternInputEl","width","offsetWidth","sync","hideInputTag","inputTagEl","display","showInputTag","doFocus","e","doBlur","doDeleteOption","doClear","doPatternInput","handleFocusin","relatedTarget","contains","handleFocusout","handleClear","handleMouseEnter","handleMouseLeave","handleMouseDown","target","preventDefault","handleDeleteOption","handlePatternKeyDown","key","isCompositingRef","cachedInputEvent","handlePatternInputInput","inputText","textContent","handleCompositionStart","handleCompositionEnd","handlePatternInputFocus","call","handlePatternInputBlur","blur","_b","multipleEl","singleEl","focus","_c","focusInput","blurInput","updateCounter","count","setTextContent","getCounter","getTail","enterTimerId","clearEnterTimer","window","clearTimeout","handleMouseEnterCounter","setTimeout","handleMouseLeaveCounter","onPopoverUpdateShow","show","patternInputWrapperEl","tabIndex","cssVarsRef","common","cubicBezierEaseInOut","self","borderRadius","color","placeholderColor","textColor","paddingSingle","paddingMultiple","caretColor","colorDisabled","textColorDisabled","placeholderColorDisabled","colorActive","boxShadowFocus","boxShadowActive","boxShadowHover","border","borderFocus","borderHover","borderActive","arrowColor","arrowColorDisabled","loadingColor","colorActiveWarning","boxShadowFocusWarning","boxShadowActiveWarning","boxShadowHoverWarning","borderWarning","borderFocusWarning","borderHoverWarning","borderActiveWarning","colorActiveError","boxShadowFocusError","boxShadowActiveError","boxShadowHoverError","borderError","borderFocusError","borderHoverError","borderActiveError","clearColor","clearColorHover","clearColorPressed","clearSize","arrowSize","height","fontSize","themeClassHandle","mergedTheme","mergedClearable","patternInputFocused","filterablePlaceholder","label","selected","showTagsPanel","isCompositing","cssVars","themeClass","onRender","maxTagCountResponsive","maxTagCountNumeric","useMaxTagCount","suffix","showClear","$slots","arrow","body","createTag","class","closable","onClose","internalCloseFocusable","originalTags","slice","map","input","tabindex","onInput","onCompositionstart","onCompositionend","renderCounter","onMouseenter","onMouseleave","counter","rest","tags","overflow","tail","concat","renderPopover","popoverProps","trigger","overlap","placement","onUpdateShow","theme","peers","Popover","themeOverrides","peerOverrides","showPlaceholder","popoverTrigger","scrollable","hasInput","showSelectedLabel","readonly","title","onFocusin","onFocusout","onMousedown"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/_internal/selection/src/Selection.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, defineComponent, Fragment, ref, computed, watch, toRef, nextTick, watchEffect, onMounted } from 'vue';\nimport { VOverflow } from 'vueuc';\nimport { NPopover } from '../../../popover';\nimport { NTag } from '../../../tag';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport { createKey, getTitleAttribute, render, useOnResize, Wrapper } from '../../../_utils';\nimport Suffix from '../../suffix';\nimport { internalSelectionLight } from '../styles';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n    name: 'InternalSelection',\n    props: Object.assign(Object.assign({}, useTheme.props), { clsPrefix: {\n            type: String,\n            required: true\n        }, bordered: {\n            type: Boolean,\n            default: undefined\n        }, active: Boolean, pattern: {\n            type: String,\n            default: ''\n        }, placeholder: String, selectedOption: {\n            type: Object,\n            default: null\n        }, selectedOptions: {\n            type: Array,\n            default: null\n        }, labelField: { type: String, default: 'label' }, valueField: {\n            type: String,\n            default: 'value'\n        }, multiple: Boolean, filterable: Boolean, clearable: Boolean, disabled: Boolean, size: {\n            type: String,\n            default: 'medium'\n        }, loading: Boolean, autofocus: Boolean, showArrow: {\n            type: Boolean,\n            default: true\n        }, inputProps: Object, focused: Boolean, renderTag: Function, onKeydown: Function, onClick: Function, onBlur: Function, onFocus: Function, onDeleteOption: Function, maxTagCount: [String, Number], onClear: Function, onPatternInput: Function, onPatternFocus: Function, onPatternBlur: Function, renderLabel: Function, status: String, inlineThemeDisabled: Boolean, onResize: Function }),\n    setup(props) {\n        const patternInputMirrorRef = ref(null);\n        const patternInputRef = ref(null);\n        const selfRef = ref(null);\n        const multipleElRef = ref(null);\n        const singleElRef = ref(null);\n        const patternInputWrapperRef = ref(null);\n        const counterRef = ref(null);\n        const counterWrapperRef = ref(null);\n        const overflowRef = ref(null);\n        const inputTagElRef = ref(null);\n        const showTagsPopoverRef = ref(false);\n        const patternInputFocusedRef = ref(false);\n        const hoverRef = ref(false);\n        const themeRef = useTheme('InternalSelection', '-internal-selection', style, internalSelectionLight, props, toRef(props, 'clsPrefix'));\n        const mergedClearableRef = computed(() => {\n            return (props.clearable && !props.disabled && (hoverRef.value || props.active));\n        });\n        const filterablePlaceholderRef = computed(() => {\n            return props.selectedOption\n                ? props.renderTag\n                    ? props.renderTag({\n                        option: props.selectedOption,\n                        handleClose: () => { }\n                    })\n                    : props.renderLabel\n                        ? props.renderLabel(props.selectedOption, true)\n                        : render(props.selectedOption[props.labelField], props.selectedOption, true)\n                : props.placeholder;\n        });\n        const labelRef = computed(() => {\n            const option = props.selectedOption;\n            if (!option)\n                return undefined;\n            return option[props.labelField];\n        });\n        const selectedRef = computed(() => {\n            if (props.multiple) {\n                return !!(Array.isArray(props.selectedOptions) && props.selectedOptions.length);\n            }\n            else {\n                return props.selectedOption !== null;\n            }\n        });\n        function syncMirrorWidth() {\n            var _a;\n            const { value: patternInputMirrorEl } = patternInputMirrorRef;\n            if (patternInputMirrorEl) {\n                const { value: patternInputEl } = patternInputRef;\n                if (patternInputEl) {\n                    patternInputEl.style.width = `${patternInputMirrorEl.offsetWidth}px`;\n                    if (props.maxTagCount !== 'responsive') {\n                        (_a = overflowRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n                    }\n                }\n            }\n        }\n        function hideInputTag() {\n            const { value: inputTagEl } = inputTagElRef;\n            if (inputTagEl)\n                inputTagEl.style.display = 'none';\n        }\n        function showInputTag() {\n            const { value: inputTagEl } = inputTagElRef;\n            if (inputTagEl)\n                inputTagEl.style.display = 'inline-block';\n        }\n        watch(toRef(props, 'active'), (value) => {\n            if (!value)\n                hideInputTag();\n        });\n        watch(toRef(props, 'pattern'), () => {\n            if (props.multiple) {\n                void nextTick(syncMirrorWidth);\n            }\n        });\n        function doFocus(e) {\n            const { onFocus } = props;\n            if (onFocus)\n                onFocus(e);\n        }\n        function doBlur(e) {\n            const { onBlur } = props;\n            if (onBlur)\n                onBlur(e);\n        }\n        function doDeleteOption(value) {\n            const { onDeleteOption } = props;\n            if (onDeleteOption)\n                onDeleteOption(value);\n        }\n        function doClear(e) {\n            const { onClear } = props;\n            if (onClear)\n                onClear(e);\n        }\n        function doPatternInput(value) {\n            const { onPatternInput } = props;\n            if (onPatternInput)\n                onPatternInput(value);\n        }\n        function handleFocusin(e) {\n            var _a;\n            if (!e.relatedTarget ||\n                !((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n                doFocus(e);\n            }\n        }\n        function handleFocusout(e) {\n            var _a;\n            if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))\n                return;\n            doBlur(e);\n        }\n        function handleClear(e) {\n            doClear(e);\n        }\n        function handleMouseEnter() {\n            hoverRef.value = true;\n        }\n        function handleMouseLeave() {\n            hoverRef.value = false;\n        }\n        function handleMouseDown(e) {\n            if (!props.active || !props.filterable)\n                return;\n            if (e.target === patternInputRef.value)\n                return;\n            e.preventDefault();\n        }\n        function handleDeleteOption(option) {\n            doDeleteOption(option);\n        }\n        function handlePatternKeyDown(e) {\n            if (e.key === 'Backspace' && !isCompositingRef.value) {\n                if (!props.pattern.length) {\n                    const { selectedOptions } = props;\n                    if (selectedOptions === null || selectedOptions === void 0 ? void 0 : selectedOptions.length) {\n                        handleDeleteOption(selectedOptions[selectedOptions.length - 1]);\n                    }\n                }\n            }\n        }\n        const isCompositingRef = ref(false);\n        // the composition end is later than its input so we can cached the event\n        // and return the input event\n        let cachedInputEvent = null;\n        function handlePatternInputInput(e) {\n            // we should sync mirror width here\n            const { value: patternInputMirrorEl } = patternInputMirrorRef;\n            if (patternInputMirrorEl) {\n                const inputText = e.target.value;\n                patternInputMirrorEl.textContent = inputText;\n                syncMirrorWidth();\n            }\n            if (!isCompositingRef.value) {\n                doPatternInput(e);\n            }\n            else {\n                cachedInputEvent = e;\n            }\n        }\n        function handleCompositionStart() {\n            isCompositingRef.value = true;\n        }\n        function handleCompositionEnd() {\n            isCompositingRef.value = false;\n            doPatternInput(cachedInputEvent);\n            cachedInputEvent = null;\n        }\n        function handlePatternInputFocus(e) {\n            var _a;\n            patternInputFocusedRef.value = true;\n            (_a = props.onPatternFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function handlePatternInputBlur(e) {\n            var _a;\n            patternInputFocusedRef.value = false;\n            (_a = props.onPatternBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function blur() {\n            var _a, _b;\n            if (props.filterable) {\n                patternInputFocusedRef.value = false;\n                (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n                (_b = patternInputRef.value) === null || _b === void 0 ? void 0 : _b.blur();\n            }\n            else if (props.multiple) {\n                const { value: multipleEl } = multipleElRef;\n                multipleEl === null || multipleEl === void 0 ? void 0 : multipleEl.blur();\n            }\n            else {\n                const { value: singleEl } = singleElRef;\n                singleEl === null || singleEl === void 0 ? void 0 : singleEl.blur();\n            }\n        }\n        function focus() {\n            var _a, _b, _c;\n            if (props.filterable) {\n                patternInputFocusedRef.value = false;\n                (_a = patternInputWrapperRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n            }\n            else if (props.multiple) {\n                (_b = multipleElRef.value) === null || _b === void 0 ? void 0 : _b.focus();\n            }\n            else {\n                (_c = singleElRef.value) === null || _c === void 0 ? void 0 : _c.focus();\n            }\n        }\n        function focusInput() {\n            const { value: patternInputEl } = patternInputRef;\n            if (patternInputEl) {\n                showInputTag();\n                patternInputEl.focus();\n            }\n        }\n        function blurInput() {\n            const { value: patternInputEl } = patternInputRef;\n            if (patternInputEl) {\n                patternInputEl.blur();\n            }\n        }\n        function updateCounter(count) {\n            const { value } = counterRef;\n            if (value) {\n                value.setTextContent(`+${count}`);\n            }\n        }\n        function getCounter() {\n            const { value } = counterWrapperRef;\n            return value;\n        }\n        function getTail() {\n            return patternInputRef.value;\n        }\n        let enterTimerId = null;\n        function clearEnterTimer() {\n            if (enterTimerId !== null)\n                window.clearTimeout(enterTimerId);\n        }\n        function handleMouseEnterCounter() {\n            if (props.disabled || props.active)\n                return;\n            clearEnterTimer();\n            enterTimerId = window.setTimeout(() => {\n                showTagsPopoverRef.value = true;\n            }, 100);\n        }\n        function handleMouseLeaveCounter() {\n            clearEnterTimer();\n        }\n        function onPopoverUpdateShow(show) {\n            if (!show) {\n                clearEnterTimer();\n                showTagsPopoverRef.value = false;\n            }\n        }\n        onMounted(() => {\n            watchEffect(() => {\n                const patternInputWrapperEl = patternInputWrapperRef.value;\n                if (!patternInputWrapperEl)\n                    return;\n                patternInputWrapperEl.tabIndex =\n                    props.disabled || patternInputFocusedRef.value ? -1 : 0;\n            });\n        });\n        useOnResize(selfRef, props.onResize);\n        const { inlineThemeDisabled } = props;\n        const cssVarsRef = computed(() => {\n            const { size } = props;\n            const { common: { cubicBezierEaseInOut }, self: { borderRadius, color, placeholderColor, textColor, paddingSingle, paddingMultiple, caretColor, colorDisabled, textColorDisabled, placeholderColorDisabled, colorActive, boxShadowFocus, boxShadowActive, boxShadowHover, border, borderFocus, borderHover, borderActive, arrowColor, arrowColorDisabled, loadingColor, \n            // form warning\n            colorActiveWarning, boxShadowFocusWarning, boxShadowActiveWarning, boxShadowHoverWarning, borderWarning, borderFocusWarning, borderHoverWarning, borderActiveWarning, \n            // form error\n            colorActiveError, boxShadowFocusError, boxShadowActiveError, boxShadowHoverError, borderError, borderFocusError, borderHoverError, borderActiveError, \n            // clear\n            clearColor, clearColorHover, clearColorPressed, clearSize, \n            // arrow\n            arrowSize, [createKey('height', size)]: height, [createKey('fontSize', size)]: fontSize } } = themeRef.value;\n            return {\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-border': border,\n                '--n-border-active': borderActive,\n                '--n-border-focus': borderFocus,\n                '--n-border-hover': borderHover,\n                '--n-border-radius': borderRadius,\n                '--n-box-shadow-active': boxShadowActive,\n                '--n-box-shadow-focus': boxShadowFocus,\n                '--n-box-shadow-hover': boxShadowHover,\n                '--n-caret-color': caretColor,\n                '--n-color': color,\n                '--n-color-active': colorActive,\n                '--n-color-disabled': colorDisabled,\n                '--n-font-size': fontSize,\n                '--n-height': height,\n                '--n-padding-single': paddingSingle,\n                '--n-padding-multiple': paddingMultiple,\n                '--n-placeholder-color': placeholderColor,\n                '--n-placeholder-color-disabled': placeholderColorDisabled,\n                '--n-text-color': textColor,\n                '--n-text-color-disabled': textColorDisabled,\n                '--n-arrow-color': arrowColor,\n                '--n-arrow-color-disabled': arrowColorDisabled,\n                '--n-loading-color': loadingColor,\n                // form warning\n                '--n-color-active-warning': colorActiveWarning,\n                '--n-box-shadow-focus-warning': boxShadowFocusWarning,\n                '--n-box-shadow-active-warning': boxShadowActiveWarning,\n                '--n-box-shadow-hover-warning': boxShadowHoverWarning,\n                '--n-border-warning': borderWarning,\n                '--n-border-focus-warning': borderFocusWarning,\n                '--n-border-hover-warning': borderHoverWarning,\n                '--n-border-active-warning': borderActiveWarning,\n                // form error\n                '--n-color-active-error': colorActiveError,\n                '--n-box-shadow-focus-error': boxShadowFocusError,\n                '--n-box-shadow-active-error': boxShadowActiveError,\n                '--n-box-shadow-hover-error': boxShadowHoverError,\n                '--n-border-error': borderError,\n                '--n-border-focus-error': borderFocusError,\n                '--n-border-hover-error': borderHoverError,\n                '--n-border-active-error': borderActiveError,\n                // clear\n                '--n-clear-size': clearSize,\n                '--n-clear-color': clearColor,\n                '--n-clear-color-hover': clearColorHover,\n                '--n-clear-color-pressed': clearColorPressed,\n                // arrow-size\n                '--n-arrow-size': arrowSize\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('internal-selection', computed(() => {\n                return props.size[0];\n            }), cssVarsRef, props)\n            : undefined;\n        return {\n            mergedTheme: themeRef,\n            mergedClearable: mergedClearableRef,\n            patternInputFocused: patternInputFocusedRef,\n            filterablePlaceholder: filterablePlaceholderRef,\n            label: labelRef,\n            selected: selectedRef,\n            showTagsPanel: showTagsPopoverRef,\n            isCompositing: isCompositingRef,\n            // dom ref\n            counterRef,\n            counterWrapperRef,\n            patternInputMirrorRef,\n            patternInputRef,\n            selfRef,\n            multipleElRef,\n            singleElRef,\n            patternInputWrapperRef,\n            overflowRef,\n            inputTagElRef,\n            handleMouseDown,\n            handleFocusin,\n            handleClear,\n            handleMouseEnter,\n            handleMouseLeave,\n            handleDeleteOption,\n            handlePatternKeyDown,\n            handlePatternInputInput,\n            handlePatternInputBlur,\n            handlePatternInputFocus,\n            handleMouseEnterCounter,\n            handleMouseLeaveCounter,\n            handleFocusout,\n            handleCompositionEnd,\n            handleCompositionStart,\n            onPopoverUpdateShow,\n            focus,\n            focusInput,\n            blur,\n            blurInput,\n            updateCounter,\n            getCounter,\n            getTail,\n            renderLabel: props.renderLabel,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        };\n    },\n    render() {\n        const { status, multiple, size, disabled, filterable, maxTagCount, bordered, clsPrefix, onRender, renderTag, renderLabel } = this;\n        onRender === null || onRender === void 0 ? void 0 : onRender();\n        const maxTagCountResponsive = maxTagCount === 'responsive';\n        const maxTagCountNumeric = typeof maxTagCount === 'number';\n        const useMaxTagCount = maxTagCountResponsive || maxTagCountNumeric;\n        const suffix = (h(Wrapper, null, {\n            default: () => (h(Suffix, { clsPrefix: clsPrefix, loading: this.loading, showArrow: this.showArrow, showClear: this.mergedClearable && this.selected, onClear: this.handleClear }, {\n                default: () => { var _a, _b; return (_b = (_a = this.$slots).arrow) === null || _b === void 0 ? void 0 : _b.call(_a); }\n            }))\n        }));\n        let body;\n        if (multiple) {\n            const { labelField } = this;\n            const createTag = (option) => (h(\"div\", { class: `${clsPrefix}-base-selection-tag-wrapper`, key: option.value }, renderTag ? (renderTag({\n                option,\n                handleClose: () => this.handleDeleteOption(option)\n            })) : (h(NTag, { size: size, closable: !option.disabled, disabled: disabled, onClose: () => this.handleDeleteOption(option), internalCloseFocusable: false }, {\n                default: () => renderLabel\n                    ? renderLabel(option, true)\n                    : render(option[labelField], option, true)\n            }))));\n            const originalTags = (maxTagCountNumeric\n                ? this.selectedOptions.slice(0, maxTagCount)\n                : this.selectedOptions).map(createTag);\n            const input = filterable ? (h(\"div\", { class: `${clsPrefix}-base-selection-input-tag`, ref: \"inputTagElRef\", key: \"__input-tag__\" },\n                h(\"input\", Object.assign({}, this.inputProps, { ref: \"patternInputRef\", tabindex: -1, disabled: disabled, value: this.pattern, autofocus: this.autofocus, class: `${clsPrefix}-base-selection-input-tag__input`, onBlur: this.handlePatternInputBlur, onFocus: this.handlePatternInputFocus, onKeydown: this.handlePatternKeyDown, onInput: this.handlePatternInputInput, onCompositionstart: this.handleCompositionStart, onCompositionend: this.handleCompositionEnd })),\n                h(\"span\", { ref: \"patternInputMirrorRef\", class: `${clsPrefix}-base-selection-input-tag__mirror` }, this.pattern))) : null;\n            // May Overflow\n            const renderCounter = maxTagCountResponsive\n                ? () => (h(\"div\", { class: `${clsPrefix}-base-selection-tag-wrapper`, ref: \"counterWrapperRef\" },\n                    h(NTag, { size: size, ref: \"counterRef\", onMouseenter: this.handleMouseEnterCounter, onMouseleave: this.handleMouseLeaveCounter, disabled: disabled })))\n                : undefined;\n            let counter;\n            if (maxTagCountNumeric) {\n                const rest = this.selectedOptions.length - maxTagCount;\n                if (rest > 0) {\n                    counter = (h(\"div\", { class: `${clsPrefix}-base-selection-tag-wrapper`, key: \"__counter__\" },\n                        h(NTag, { size: size, ref: \"counterRef\", onMouseenter: this.handleMouseEnterCounter, disabled: disabled }, {\n                            default: () => `+${rest}`\n                        })));\n                }\n            }\n            const tags = maxTagCountResponsive ? (filterable ? (h(VOverflow, { ref: \"overflowRef\", updateCounter: this.updateCounter, getCounter: this.getCounter, getTail: this.getTail, style: {\n                    width: '100%',\n                    display: 'flex',\n                    overflow: 'hidden'\n                } }, {\n                default: () => originalTags,\n                counter: renderCounter,\n                tail: () => input\n            })) : (h(VOverflow, { ref: \"overflowRef\", updateCounter: this.updateCounter, getCounter: this.getCounter, style: {\n                    width: '100%',\n                    display: 'flex',\n                    overflow: 'hidden'\n                } }, {\n                default: () => originalTags,\n                counter: renderCounter\n            }))) : maxTagCountNumeric ? (originalTags.concat(counter)) : (originalTags);\n            const renderPopover = useMaxTagCount\n                ? () => (h(\"div\", { class: `${clsPrefix}-base-selection-popover` }, maxTagCountResponsive\n                    ? originalTags\n                    : this.selectedOptions.map(createTag)))\n                : undefined;\n            const popoverProps = useMaxTagCount\n                ? {\n                    show: this.showTagsPanel,\n                    trigger: 'hover',\n                    overlap: true,\n                    placement: 'top',\n                    width: 'trigger',\n                    onUpdateShow: this.onPopoverUpdateShow,\n                    theme: this.mergedTheme.peers.Popover,\n                    themeOverrides: this.mergedTheme.peerOverrides.Popover\n                }\n                : null;\n            const showPlaceholder = this.selected\n                ? false\n                : this.active\n                    ? !this.pattern && !this.isCompositing\n                    : true;\n            const placeholder = showPlaceholder ? (h(\"div\", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay` },\n                h(\"div\", { class: `${clsPrefix}-base-selection-placeholder__inner` }, this.placeholder))) : null;\n            const popoverTrigger = filterable ? (h(\"div\", { ref: \"patternInputWrapperRef\", class: `${clsPrefix}-base-selection-tags` },\n                tags,\n                maxTagCountResponsive ? null : input,\n                suffix)) : (h(\"div\", { ref: \"multipleElRef\", class: `${clsPrefix}-base-selection-tags`, tabindex: disabled ? undefined : 0 },\n                tags,\n                suffix));\n            body = (h(Fragment, null,\n                useMaxTagCount ? (h(NPopover, Object.assign({}, popoverProps, { scrollable: true, style: \"max-height: calc(var(--v-target-height) * 6.6);\" }), {\n                    trigger: () => popoverTrigger,\n                    default: renderPopover\n                })) : (popoverTrigger),\n                placeholder));\n        }\n        else {\n            if (filterable) {\n                const hasInput = this.pattern || this.isCompositing;\n                const showPlaceholder = this.active ? !hasInput : !this.selected;\n                const showSelectedLabel = this.active ? false : this.selected;\n                body = (h(\"div\", { ref: \"patternInputWrapperRef\", class: `${clsPrefix}-base-selection-label` },\n                    h(\"input\", Object.assign({}, this.inputProps, { ref: \"patternInputRef\", class: `${clsPrefix}-base-selection-input`, value: this.active ? this.pattern : '', placeholder: \"\", readonly: disabled, disabled: disabled, tabindex: -1, autofocus: this.autofocus, onFocus: this.handlePatternInputFocus, onBlur: this.handlePatternInputBlur, onInput: this.handlePatternInputInput, onCompositionstart: this.handleCompositionStart, onCompositionend: this.handleCompositionEnd })),\n                    showSelectedLabel ? (h(\"div\", { class: `${clsPrefix}-base-selection-label__render-label ${clsPrefix}-base-selection-overlay`, key: \"input\" },\n                        h(\"div\", { class: `${clsPrefix}-base-selection-overlay__wrapper` }, renderTag\n                            ? renderTag({\n                                option: this.selectedOption,\n                                handleClose: () => { }\n                            })\n                            : renderLabel\n                                ? renderLabel(this.selectedOption, true)\n                                : render(this.label, this.selectedOption, true)))) : null,\n                    showPlaceholder ? (h(\"div\", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`, key: \"placeholder\" },\n                        h(\"div\", { class: `${clsPrefix}-base-selection-overlay__wrapper` }, this.filterablePlaceholder))) : null,\n                    suffix));\n            }\n            else {\n                body = (h(\"div\", { ref: \"singleElRef\", class: `${clsPrefix}-base-selection-label`, tabindex: this.disabled ? undefined : 0 },\n                    this.label !== undefined ? (h(\"div\", { class: `${clsPrefix}-base-selection-input`, title: getTitleAttribute(this.label), key: \"input\" },\n                        h(\"div\", { class: `${clsPrefix}-base-selection-input__content` }, renderTag\n                            ? renderTag({\n                                option: this.selectedOption,\n                                handleClose: () => { }\n                            })\n                            : renderLabel\n                                ? renderLabel(this.selectedOption, true)\n                                : render(this.label, this.selectedOption, true)))) : (h(\"div\", { class: `${clsPrefix}-base-selection-placeholder ${clsPrefix}-base-selection-overlay`, key: \"placeholder\" },\n                        h(\"div\", { class: `${clsPrefix}-base-selection-placeholder__inner` }, this.placeholder))),\n                    suffix));\n            }\n        }\n        return (h(\"div\", { ref: \"selfRef\", class: [\n                `${clsPrefix}-base-selection`,\n                this.themeClass,\n                status && `${clsPrefix}-base-selection--${status}-status`,\n                {\n                    [`${clsPrefix}-base-selection--active`]: this.active,\n                    [`${clsPrefix}-base-selection--selected`]: this.selected || (this.active && this.pattern),\n                    [`${clsPrefix}-base-selection--disabled`]: this.disabled,\n                    [`${clsPrefix}-base-selection--multiple`]: this.multiple,\n                    // focus is not controlled by selection itself since it always need\n                    // to be managed together with menu. provide :focus style will cause\n                    // many redundant codes.\n                    [`${clsPrefix}-base-selection--focus`]: this.focused\n                }\n            ], style: this.cssVars, onClick: this.onClick, onMouseenter: this.handleMouseEnter, onMouseleave: this.handleMouseLeave, onKeydown: this.onKeydown, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onMousedown: this.handleMouseDown },\n            body,\n            bordered ? (h(\"div\", { class: `${clsPrefix}-base-selection__border` })) : null,\n            bordered ? (h(\"div\", { class: `${clsPrefix}-base-selection__state-border` })) : null));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}