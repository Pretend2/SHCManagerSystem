{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { isBrowser } from '../../_utils';\nexport function isNodeDisabled(node, disabledField) {\n  return !!node.rawNode[disabledField];\n}\n\nfunction traverse(nodes, childrenField, callback, callbackAfter) {\n  nodes === null || nodes === void 0 ? void 0 : nodes.forEach(node => {\n    callback(node);\n    traverse(node[childrenField], childrenField, callback, callbackAfter);\n    callbackAfter(node);\n  });\n}\n\nexport function keysWithFilter(nodes, pattern, keyField, childrenField, filter) {\n  const keys = new Set();\n  const highlightKeySet = new Set();\n  const path = [];\n  traverse(nodes, childrenField, node => {\n    path.push(node);\n\n    if (filter(pattern, node)) {\n      highlightKeySet.add(node[keyField]);\n\n      for (let i = path.length - 2; i >= 0; --i) {\n        if (!keys.has(path[i][keyField])) {\n          keys.add(path[i][keyField]);\n        } else {\n          return;\n        }\n      }\n    }\n  }, () => {\n    path.pop();\n  });\n  return {\n    expandedKeys: Array.from(keys),\n    highlightKeySet\n  };\n}\nconst emptyImage = null;\n\nif (isBrowser && Image) {\n  const emptyImage = new Image();\n  emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n}\n\nexport { emptyImage };\nexport function filterTree(tree, filter, pattern, keyField, childrenField) {\n  const visitedTailKeys = new Set();\n  const visitedNonTailKeys = new Set();\n  const highlightKeySet = new Set();\n  const expandedKeys = [];\n  const filteredTree = [];\n  const path = [];\n\n  function visit(t) {\n    t.forEach(n => {\n      path.push(n);\n\n      if (filter(pattern, n)) {\n        visitedTailKeys.add(n[keyField]);\n        highlightKeySet.add(n[keyField]);\n\n        for (let i = path.length - 2; i >= 0; --i) {\n          const key = path[i][keyField];\n\n          if (!visitedNonTailKeys.has(key)) {\n            visitedNonTailKeys.add(key);\n\n            if (visitedTailKeys.has(key)) {\n              visitedTailKeys.delete(key);\n            }\n          } else {\n            break;\n          }\n        }\n      }\n\n      const children = n[childrenField];\n\n      if (children) {\n        visit(children);\n      }\n\n      path.pop();\n    });\n  }\n\n  visit(tree);\n\n  function build(t, sibs) {\n    t.forEach(n => {\n      const key = n[keyField];\n      const isVisitedTail = visitedTailKeys.has(key);\n      const isVisitedNonTail = visitedNonTailKeys.has(key);\n      if (!isVisitedTail && !isVisitedNonTail) return;\n      const children = n[childrenField];\n\n      if (children) {\n        if (isVisitedTail) {\n          // If it is visited path tail, use origin node\n          sibs.push(n);\n        } else {\n          // It it is not visited path tail, use cloned node\n          expandedKeys.push(key);\n          const clonedNode = Object.assign(Object.assign({}, n), {\n            [childrenField]: []\n          });\n          sibs.push(clonedNode);\n          build(children, clonedNode[childrenField]);\n        }\n      } else {\n        sibs.push(n);\n      }\n    });\n  }\n\n  build(tree, filteredTree);\n  return {\n    filteredTree,\n    highlightKeySet,\n    expandedKeys\n  };\n}","map":{"version":3,"names":["isBrowser","isNodeDisabled","node","disabledField","rawNode","traverse","nodes","childrenField","callback","callbackAfter","forEach","keysWithFilter","pattern","keyField","filter","keys","Set","highlightKeySet","path","push","add","i","length","has","pop","expandedKeys","Array","from","emptyImage","Image","src","filterTree","tree","visitedTailKeys","visitedNonTailKeys","filteredTree","visit","t","n","key","delete","children","build","sibs","isVisitedTail","isVisitedNonTail","clonedNode","Object","assign"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/tree/src/utils.js"],"sourcesContent":["import { isBrowser } from '../../_utils';\nexport function isNodeDisabled(node, disabledField) {\n    return !!node.rawNode[disabledField];\n}\nfunction traverse(nodes, childrenField, callback, callbackAfter) {\n    nodes === null || nodes === void 0 ? void 0 : nodes.forEach((node) => {\n        callback(node);\n        traverse(node[childrenField], childrenField, callback, callbackAfter);\n        callbackAfter(node);\n    });\n}\nexport function keysWithFilter(nodes, pattern, keyField, childrenField, filter) {\n    const keys = new Set();\n    const highlightKeySet = new Set();\n    const path = [];\n    traverse(nodes, childrenField, (node) => {\n        path.push(node);\n        if (filter(pattern, node)) {\n            highlightKeySet.add(node[keyField]);\n            for (let i = path.length - 2; i >= 0; --i) {\n                if (!keys.has(path[i][keyField])) {\n                    keys.add(path[i][keyField]);\n                }\n                else {\n                    return;\n                }\n            }\n        }\n    }, () => {\n        path.pop();\n    });\n    return {\n        expandedKeys: Array.from(keys),\n        highlightKeySet\n    };\n}\nconst emptyImage = null;\nif (isBrowser && Image) {\n    const emptyImage = new Image();\n    emptyImage.src =\n        'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n}\nexport { emptyImage };\nexport function filterTree(tree, filter, pattern, keyField, childrenField) {\n    const visitedTailKeys = new Set();\n    const visitedNonTailKeys = new Set();\n    const highlightKeySet = new Set();\n    const expandedKeys = [];\n    const filteredTree = [];\n    const path = [];\n    function visit(t) {\n        t.forEach((n) => {\n            path.push(n);\n            if (filter(pattern, n)) {\n                visitedTailKeys.add(n[keyField]);\n                highlightKeySet.add(n[keyField]);\n                for (let i = path.length - 2; i >= 0; --i) {\n                    const key = path[i][keyField];\n                    if (!visitedNonTailKeys.has(key)) {\n                        visitedNonTailKeys.add(key);\n                        if (visitedTailKeys.has(key)) {\n                            visitedTailKeys.delete(key);\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            const children = n[childrenField];\n            if (children) {\n                visit(children);\n            }\n            path.pop();\n        });\n    }\n    visit(tree);\n    function build(t, sibs) {\n        t.forEach((n) => {\n            const key = n[keyField];\n            const isVisitedTail = visitedTailKeys.has(key);\n            const isVisitedNonTail = visitedNonTailKeys.has(key);\n            if (!isVisitedTail && !isVisitedNonTail)\n                return;\n            const children = n[childrenField];\n            if (children) {\n                if (isVisitedTail) {\n                    // If it is visited path tail, use origin node\n                    sibs.push(n);\n                }\n                else {\n                    // It it is not visited path tail, use cloned node\n                    expandedKeys.push(key);\n                    const clonedNode = Object.assign(Object.assign({}, n), { [childrenField]: [] });\n                    sibs.push(clonedNode);\n                    build(children, clonedNode[childrenField]);\n                }\n            }\n            else {\n                sibs.push(n);\n            }\n        });\n    }\n    build(tree, filteredTree);\n    return {\n        filteredTree,\n        highlightKeySet,\n        expandedKeys\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}