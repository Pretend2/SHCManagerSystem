{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { h, defineComponent, TransitionGroup, computed, ref, watch, toRef } from 'vue';\nimport NFadeInExpandTransition from '../../fade-in-expand-transition';\nimport { useStyle } from '../../../_mixins';\nimport SlotMachineNumber from './SlotMachineNumber';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n  name: 'BaseSlotMachine',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: undefined\n    },\n    appeared: {\n      type: Boolean,\n      required: true\n    }\n  },\n\n  setup(props) {\n    useStyle('-base-slot-machine', style, toRef(props, 'clsPrefix'));\n    const oldValueRef = ref();\n    const newValueRef = ref();\n    const numbersRef = computed(() => {\n      if (typeof props.value === 'string') return [];\n      if (props.value < 1) return [0];\n      const numbers = [];\n      let value = props.value;\n\n      if (props.max !== undefined) {\n        value = Math.min(props.max, value);\n      }\n\n      while (value >= 1) {\n        numbers.push(value % 10);\n        value /= 10;\n        value = Math.floor(value);\n      }\n\n      numbers.reverse();\n      return numbers;\n    });\n    watch(toRef(props, 'value'), (value, oldValue) => {\n      if (typeof value === 'string') {\n        newValueRef.value = undefined;\n        oldValueRef.value = undefined;\n      } else {\n        if (typeof oldValue === 'string') {\n          newValueRef.value = value;\n          oldValueRef.value = undefined;\n        } else {\n          newValueRef.value = value;\n          oldValueRef.value = oldValue;\n        }\n      }\n    });\n    return () => {\n      const {\n        value,\n        clsPrefix\n      } = props;\n      return typeof value === 'number' ? h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, h(TransitionGroup, {\n        name: \"fade-up-width-expand-transition\",\n        tag: \"span\"\n      }, {\n        default: () => numbersRef.value.map((number, i) => h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          key: numbersRef.value.length - i - 1,\n          oldOriginalNumber: oldValueRef.value,\n          newOriginalNumber: newValueRef.value,\n          value: number\n        }))\n      }), h(NFadeInExpandTransition, {\n        key: \"+\",\n        width: true\n      }, {\n        default: () => props.max !== undefined && props.max < value ? h(SlotMachineNumber, {\n          clsPrefix: clsPrefix,\n          value: \"+\"\n        }) : null\n      })) : h(\"span\", {\n        class: `${clsPrefix}-base-slot-machine`\n      }, value);\n    };\n  }\n\n});","map":{"version":3,"names":["h","defineComponent","TransitionGroup","computed","ref","watch","toRef","NFadeInExpandTransition","useStyle","SlotMachineNumber","style","name","props","clsPrefix","type","String","required","value","Number","default","max","undefined","appeared","Boolean","setup","oldValueRef","newValueRef","numbersRef","numbers","Math","min","push","floor","reverse","oldValue","class","tag","map","number","i","key","length","oldOriginalNumber","newOriginalNumber","width"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/_internal/slot-machine/src/SlotMachine.js"],"sourcesContent":["import { h, defineComponent, TransitionGroup, computed, ref, watch, toRef } from 'vue';\nimport NFadeInExpandTransition from '../../fade-in-expand-transition';\nimport { useStyle } from '../../../_mixins';\nimport SlotMachineNumber from './SlotMachineNumber';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n    name: 'BaseSlotMachine',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        value: {\n            type: [Number, String],\n            default: 0\n        },\n        max: {\n            type: Number,\n            default: undefined\n        },\n        appeared: {\n            type: Boolean,\n            required: true\n        }\n    },\n    setup(props) {\n        useStyle('-base-slot-machine', style, toRef(props, 'clsPrefix'));\n        const oldValueRef = ref();\n        const newValueRef = ref();\n        const numbersRef = computed(() => {\n            if (typeof props.value === 'string')\n                return [];\n            if (props.value < 1)\n                return [0];\n            const numbers = [];\n            let value = props.value;\n            if (props.max !== undefined) {\n                value = Math.min(props.max, value);\n            }\n            while (value >= 1) {\n                numbers.push(value % 10);\n                value /= 10;\n                value = Math.floor(value);\n            }\n            numbers.reverse();\n            return numbers;\n        });\n        watch(toRef(props, 'value'), (value, oldValue) => {\n            if (typeof value === 'string') {\n                newValueRef.value = undefined;\n                oldValueRef.value = undefined;\n            }\n            else {\n                if (typeof oldValue === 'string') {\n                    newValueRef.value = value;\n                    oldValueRef.value = undefined;\n                }\n                else {\n                    newValueRef.value = value;\n                    oldValueRef.value = oldValue;\n                }\n            }\n        });\n        return () => {\n            const { value, clsPrefix } = props;\n            return typeof value === 'number' ? (h(\"span\", { class: `${clsPrefix}-base-slot-machine` },\n                h(TransitionGroup, { name: \"fade-up-width-expand-transition\", tag: \"span\" }, {\n                    default: () => numbersRef.value.map((number, i) => (h(SlotMachineNumber, { clsPrefix: clsPrefix, key: numbersRef.value.length - i - 1, oldOriginalNumber: oldValueRef.value, newOriginalNumber: newValueRef.value, value: number })))\n                }),\n                h(NFadeInExpandTransition, { key: \"+\", width: true }, {\n                    default: () => props.max !== undefined && props.max < value ? (h(SlotMachineNumber, { clsPrefix: clsPrefix, value: \"+\" })) : null\n                }))) : (h(\"span\", { class: `${clsPrefix}-base-slot-machine` }, value));\n        };\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}