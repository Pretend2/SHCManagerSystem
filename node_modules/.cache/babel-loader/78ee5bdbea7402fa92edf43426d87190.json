{"ast":null,"code":"import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n  name: 'AlphaSlider',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    rgba: {\n      type: Array,\n      default: null\n    },\n    alpha: {\n      type: Number,\n      default: 0\n    },\n    onUpdateAlpha: {\n      type: Function,\n      required: true\n    },\n    onComplete: Function\n  },\n\n  setup(props) {\n    const railRef = ref(null);\n\n    function handleMouseDown(e) {\n      if (!railRef.value || !props.rgba) return;\n      on('mousemove', document, handleMouseMove);\n      on('mouseup', document, handleMouseUp);\n      handleMouseMove(e);\n    }\n\n    function handleMouseMove(e) {\n      const {\n        value: railEl\n      } = railRef;\n      if (!railEl) return;\n      const {\n        width,\n        left\n      } = railEl.getBoundingClientRect();\n      const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n      props.onUpdateAlpha(normalizeAlpha(newAlpha));\n    }\n\n    function handleMouseUp() {\n      var _a;\n\n      off('mousemove', document, handleMouseMove);\n      off('mouseup', document, handleMouseUp);\n      (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n\n    return {\n      railRef,\n      railBackgroundImage: computed(() => {\n        const {\n          rgba\n        } = props;\n        if (!rgba) return '';\n        return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n      }),\n      handleMouseDown\n    };\n  },\n\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider`,\n      ref: \"railRef\",\n      style: {\n        height: HANDLE_SIZE,\n        borderRadius: RADIUS\n      },\n      onMousedown: this.handleMouseDown\n    }, h(\"div\", {\n      style: {\n        borderRadius: RADIUS,\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        overflow: 'hidden'\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-checkboard`\n    }), h(\"div\", {\n      class: `${clsPrefix}-color-picker-slider__image`,\n      style: {\n        backgroundImage: this.railBackgroundImage\n      }\n    })), this.rgba && h(\"div\", {\n      style: {\n        position: 'absolute',\n        left: RADIUS,\n        right: RADIUS,\n        top: 0,\n        bottom: 0\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle`,\n      style: {\n        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }, h(\"div\", {\n      class: `${clsPrefix}-color-picker-handle__fill`,\n      style: {\n        backgroundColor: toRgbaString(this.rgba),\n        borderRadius: RADIUS,\n        width: HANDLE_SIZE,\n        height: HANDLE_SIZE\n      }\n    }))));\n  }\n\n});","map":{"version":3,"names":["computed","defineComponent","h","ref","off","on","toRgbaString","normalizeAlpha","HANDLE_SIZE","HANDLE_SIZE_NUM","RADIUS","name","props","clsPrefix","type","String","required","rgba","Array","default","alpha","Number","onUpdateAlpha","Function","onComplete","setup","railRef","handleMouseDown","e","value","document","handleMouseMove","handleMouseUp","railEl","width","left","getBoundingClientRect","newAlpha","clientX","_a","call","railBackgroundImage","render","class","style","height","borderRadius","onMousedown","position","right","top","bottom","overflow","backgroundImage","backgroundColor"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/color-picker/src/AlphaSlider.js"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport { off, on } from 'evtd';\nimport { toRgbaString } from 'seemly';\nimport { normalizeAlpha } from './utils';\nconst HANDLE_SIZE = '12px';\nconst HANDLE_SIZE_NUM = 12;\nconst RADIUS = '6px';\nexport default defineComponent({\n    name: 'AlphaSlider',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        rgba: {\n            type: Array,\n            default: null\n        },\n        alpha: {\n            type: Number,\n            default: 0\n        },\n        onUpdateAlpha: {\n            type: Function,\n            required: true\n        },\n        onComplete: Function\n    },\n    setup(props) {\n        const railRef = ref(null);\n        function handleMouseDown(e) {\n            if (!railRef.value || !props.rgba)\n                return;\n            on('mousemove', document, handleMouseMove);\n            on('mouseup', document, handleMouseUp);\n            handleMouseMove(e);\n        }\n        function handleMouseMove(e) {\n            const { value: railEl } = railRef;\n            if (!railEl)\n                return;\n            const { width, left } = railEl.getBoundingClientRect();\n            const newAlpha = (e.clientX - left) / (width - HANDLE_SIZE_NUM);\n            props.onUpdateAlpha(normalizeAlpha(newAlpha));\n        }\n        function handleMouseUp() {\n            var _a;\n            off('mousemove', document, handleMouseMove);\n            off('mouseup', document, handleMouseUp);\n            (_a = props.onComplete) === null || _a === void 0 ? void 0 : _a.call(props);\n        }\n        return {\n            railRef,\n            railBackgroundImage: computed(() => {\n                const { rgba } = props;\n                if (!rgba)\n                    return '';\n                return `linear-gradient(to right, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 0) 0%, rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, 1) 100%)`;\n            }),\n            handleMouseDown\n        };\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(\"div\", { class: `${clsPrefix}-color-picker-slider`, ref: \"railRef\", style: {\n                height: HANDLE_SIZE,\n                borderRadius: RADIUS\n            }, onMousedown: this.handleMouseDown },\n            h(\"div\", { style: {\n                    borderRadius: RADIUS,\n                    position: 'absolute',\n                    left: 0,\n                    right: 0,\n                    top: 0,\n                    bottom: 0,\n                    overflow: 'hidden'\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-checkboard` }),\n                h(\"div\", { class: `${clsPrefix}-color-picker-slider__image`, style: {\n                        backgroundImage: this.railBackgroundImage\n                    } })),\n            this.rgba && (h(\"div\", { style: {\n                    position: 'absolute',\n                    left: RADIUS,\n                    right: RADIUS,\n                    top: 0,\n                    bottom: 0\n                } },\n                h(\"div\", { class: `${clsPrefix}-color-picker-handle`, style: {\n                        left: `calc(${this.alpha * 100}% - ${RADIUS})`,\n                        borderRadius: RADIUS,\n                        width: HANDLE_SIZE,\n                        height: HANDLE_SIZE\n                    } },\n                    h(\"div\", { class: `${clsPrefix}-color-picker-handle__fill`, style: {\n                            backgroundColor: toRgbaString(this.rgba),\n                            borderRadius: RADIUS,\n                            width: HANDLE_SIZE,\n                            height: HANDLE_SIZE\n                        } }))))));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}