{"ast":null,"code":"// use absolute path to make sure no circular ref of style\n// this -> modal-index -> modal-style\nimport { h, defineComponent, ref } from 'vue';\nimport NModal from '../../modal/src/Modal';\nimport { keep } from '../../_utils';\nimport { NDialog } from './Dialog';\nimport { dialogProps, dialogPropKeys } from './dialogProps';\nexport const exposedDialogEnvProps = Object.assign(Object.assign({}, dialogProps), {\n  onAfterEnter: Function,\n  onAfterLeave: Function,\n  blockScroll: {\n    type: Boolean,\n    default: true\n  },\n  closeOnEsc: {\n    type: Boolean,\n    default: true\n  },\n  onEsc: Function,\n  autoFocus: {\n    type: Boolean,\n    default: true\n  },\n  internalStyle: [String, Object],\n  maskClosable: {\n    type: Boolean,\n    default: true\n  },\n  onPositiveClick: Function,\n  onNegativeClick: Function,\n  onClose: Function,\n  onMaskClick: Function\n});\nexport const NDialogEnvironment = defineComponent({\n  name: 'DialogEnvironment',\n  props: Object.assign(Object.assign({}, exposedDialogEnvProps), {\n    internalKey: {\n      type: String,\n      required: true\n    },\n    to: [String, Object],\n    // private\n    onInternalAfterLeave: {\n      type: Function,\n      required: true\n    }\n  }),\n\n  setup(props) {\n    const showRef = ref(true);\n\n    function handleAfterLeave() {\n      const {\n        onInternalAfterLeave,\n        internalKey,\n        onAfterLeave\n      } = props;\n      if (onInternalAfterLeave) onInternalAfterLeave(internalKey);\n      if (onAfterLeave) onAfterLeave();\n    }\n\n    function handlePositiveClick(e) {\n      const {\n        onPositiveClick\n      } = props;\n\n      if (onPositiveClick) {\n        void Promise.resolve(onPositiveClick(e)).then(result => {\n          if (result === false) return;\n          hide();\n        });\n      } else {\n        hide();\n      }\n    }\n\n    function handleNegativeClick(e) {\n      const {\n        onNegativeClick\n      } = props;\n\n      if (onNegativeClick) {\n        void Promise.resolve(onNegativeClick(e)).then(result => {\n          if (result === false) return;\n          hide();\n        });\n      } else {\n        hide();\n      }\n    }\n\n    function handleCloseClick() {\n      const {\n        onClose\n      } = props;\n\n      if (onClose) {\n        void Promise.resolve(onClose()).then(result => {\n          if (result === false) return;\n          hide();\n        });\n      } else {\n        hide();\n      }\n    }\n\n    function handleMaskClick(e) {\n      const {\n        onMaskClick,\n        maskClosable\n      } = props;\n\n      if (onMaskClick) {\n        onMaskClick(e);\n        maskClosable && hide();\n      }\n    }\n\n    function handleEsc() {\n      const {\n        onEsc\n      } = props;\n\n      if (onEsc) {\n        onEsc();\n      }\n    }\n\n    function hide() {\n      showRef.value = false;\n    }\n\n    function handleUpdateShow(value) {\n      showRef.value = value;\n    }\n\n    return {\n      show: showRef,\n      hide,\n      handleUpdateShow,\n      handleAfterLeave,\n      handleCloseClick,\n      handleNegativeClick,\n      handlePositiveClick,\n      handleMaskClick,\n      handleEsc\n    };\n  },\n\n  render() {\n    const {\n      handlePositiveClick,\n      handleUpdateShow,\n      handleNegativeClick,\n      handleCloseClick,\n      handleAfterLeave,\n      handleMaskClick,\n      handleEsc,\n      to,\n      maskClosable,\n      show\n    } = this;\n    return h(NModal, {\n      show: show,\n      onUpdateShow: handleUpdateShow,\n      onMaskClick: handleMaskClick,\n      onEsc: handleEsc,\n      to: to,\n      maskClosable: maskClosable,\n      onAfterEnter: this.onAfterEnter,\n      onAfterLeave: handleAfterLeave,\n      closeOnEsc: this.closeOnEsc,\n      blockScroll: this.blockScroll,\n      autoFocus: this.autoFocus,\n      internalAppear: true,\n      internalDialog: true\n    }, {\n      default: () => h(NDialog, Object.assign({}, keep(this.$props, dialogPropKeys), {\n        style: this.internalStyle,\n        onClose: handleCloseClick,\n        onNegativeClick: handleNegativeClick,\n        onPositiveClick: handlePositiveClick\n      }))\n    });\n  }\n\n});","map":{"version":3,"names":["h","defineComponent","ref","NModal","keep","NDialog","dialogProps","dialogPropKeys","exposedDialogEnvProps","Object","assign","onAfterEnter","Function","onAfterLeave","blockScroll","type","Boolean","default","closeOnEsc","onEsc","autoFocus","internalStyle","String","maskClosable","onPositiveClick","onNegativeClick","onClose","onMaskClick","NDialogEnvironment","name","props","internalKey","required","to","onInternalAfterLeave","setup","showRef","handleAfterLeave","handlePositiveClick","e","Promise","resolve","then","result","hide","handleNegativeClick","handleCloseClick","handleMaskClick","handleEsc","value","handleUpdateShow","show","render","onUpdateShow","internalAppear","internalDialog","$props","style"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/dialog/src/DialogEnvironment.js"],"sourcesContent":["// use absolute path to make sure no circular ref of style\n// this -> modal-index -> modal-style\nimport { h, defineComponent, ref } from 'vue';\nimport NModal from '../../modal/src/Modal';\nimport { keep } from '../../_utils';\nimport { NDialog } from './Dialog';\nimport { dialogProps, dialogPropKeys } from './dialogProps';\nexport const exposedDialogEnvProps = Object.assign(Object.assign({}, dialogProps), { onAfterEnter: Function, onAfterLeave: Function, blockScroll: { type: Boolean, default: true }, closeOnEsc: { type: Boolean, default: true }, onEsc: Function, autoFocus: {\n        type: Boolean,\n        default: true\n    }, internalStyle: [String, Object], maskClosable: {\n        type: Boolean,\n        default: true\n    }, onPositiveClick: Function, onNegativeClick: Function, onClose: Function, onMaskClick: Function });\nexport const NDialogEnvironment = defineComponent({\n    name: 'DialogEnvironment',\n    props: Object.assign(Object.assign({}, exposedDialogEnvProps), { internalKey: {\n            type: String,\n            required: true\n        }, to: [String, Object], \n        // private\n        onInternalAfterLeave: {\n            type: Function,\n            required: true\n        } }),\n    setup(props) {\n        const showRef = ref(true);\n        function handleAfterLeave() {\n            const { onInternalAfterLeave, internalKey, onAfterLeave } = props;\n            if (onInternalAfterLeave)\n                onInternalAfterLeave(internalKey);\n            if (onAfterLeave)\n                onAfterLeave();\n        }\n        function handlePositiveClick(e) {\n            const { onPositiveClick } = props;\n            if (onPositiveClick) {\n                void Promise.resolve(onPositiveClick(e)).then((result) => {\n                    if (result === false)\n                        return;\n                    hide();\n                });\n            }\n            else {\n                hide();\n            }\n        }\n        function handleNegativeClick(e) {\n            const { onNegativeClick } = props;\n            if (onNegativeClick) {\n                void Promise.resolve(onNegativeClick(e)).then((result) => {\n                    if (result === false)\n                        return;\n                    hide();\n                });\n            }\n            else {\n                hide();\n            }\n        }\n        function handleCloseClick() {\n            const { onClose } = props;\n            if (onClose) {\n                void Promise.resolve(onClose()).then((result) => {\n                    if (result === false)\n                        return;\n                    hide();\n                });\n            }\n            else {\n                hide();\n            }\n        }\n        function handleMaskClick(e) {\n            const { onMaskClick, maskClosable } = props;\n            if (onMaskClick) {\n                onMaskClick(e);\n                maskClosable && hide();\n            }\n        }\n        function handleEsc() {\n            const { onEsc } = props;\n            if (onEsc) {\n                onEsc();\n            }\n        }\n        function hide() {\n            showRef.value = false;\n        }\n        function handleUpdateShow(value) {\n            showRef.value = value;\n        }\n        return {\n            show: showRef,\n            hide,\n            handleUpdateShow,\n            handleAfterLeave,\n            handleCloseClick,\n            handleNegativeClick,\n            handlePositiveClick,\n            handleMaskClick,\n            handleEsc\n        };\n    },\n    render() {\n        const { handlePositiveClick, handleUpdateShow, handleNegativeClick, handleCloseClick, handleAfterLeave, handleMaskClick, handleEsc, to, maskClosable, show } = this;\n        return (h(NModal, { show: show, onUpdateShow: handleUpdateShow, onMaskClick: handleMaskClick, onEsc: handleEsc, to: to, maskClosable: maskClosable, onAfterEnter: this.onAfterEnter, onAfterLeave: handleAfterLeave, closeOnEsc: this.closeOnEsc, blockScroll: this.blockScroll, autoFocus: this.autoFocus, internalAppear: true, internalDialog: true }, {\n            default: () => (h(NDialog, Object.assign({}, keep(this.$props, dialogPropKeys), { style: this.internalStyle, onClose: handleCloseClick, onNegativeClick: handleNegativeClick, onPositiveClick: handlePositiveClick })))\n        }));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}