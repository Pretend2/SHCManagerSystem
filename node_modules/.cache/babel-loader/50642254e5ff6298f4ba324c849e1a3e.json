{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, defineComponent, inject, computed, watchEffect } from 'vue';\nimport { formatLength } from '../../_utils';\nimport TableHeader from './TableParts/Header';\nimport TableBody from './TableParts/Body';\nimport { dataTableInjectionKey } from './interface';\nexport default defineComponent({\n  setup() {\n    const {\n      mergedClsPrefixRef,\n      rightFixedColumnsRef,\n      leftFixedColumnsRef,\n      bodyWidthRef,\n      maxHeightRef,\n      minHeightRef,\n      flexHeightRef,\n      syncScrollState // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    } = inject(dataTableInjectionKey);\n    const headerInstRef = ref(null);\n    const bodyInstRef = ref(null);\n    const selfElRef = ref(null);\n    const fixedStateInitializedRef = ref(!(leftFixedColumnsRef.value.length || rightFixedColumnsRef.value.length));\n    const bodyStyleRef = computed(() => {\n      return {\n        maxHeight: formatLength(maxHeightRef.value),\n        minHeight: formatLength(minHeightRef.value)\n      };\n    });\n\n    function handleBodyResize(entry) {\n      bodyWidthRef.value = entry.contentRect.width;\n      syncScrollState();\n\n      if (!fixedStateInitializedRef.value) {\n        fixedStateInitializedRef.value = true;\n      }\n    }\n\n    function getHeaderElement() {\n      const {\n        value\n      } = headerInstRef;\n\n      if (value) {\n        return value.$el;\n      }\n\n      return null;\n    }\n\n    function getBodyElement() {\n      const {\n        value\n      } = bodyInstRef;\n\n      if (value) {\n        return value.getScrollContainer();\n      }\n\n      return null;\n    }\n\n    const exposedMethods = {\n      getBodyElement,\n      getHeaderElement,\n\n      scrollTo(arg0, arg1) {\n        var _a;\n\n        (_a = bodyInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(arg0, arg1);\n      }\n\n    };\n    watchEffect(() => {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      const transitionDisabledClass = `${mergedClsPrefixRef.value}-data-table-base-table--transition-disabled`;\n\n      if (fixedStateInitializedRef.value) {\n        setTimeout(() => {\n          selfEl.classList.remove(transitionDisabledClass);\n        }, 0);\n      } else {\n        selfEl.classList.add(transitionDisabledClass);\n      }\n    });\n    return Object.assign({\n      maxHeight: maxHeightRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      headerInstRef,\n      bodyInstRef,\n      bodyStyle: bodyStyleRef,\n      flexHeight: flexHeightRef,\n      handleBodyResize\n    }, exposedMethods);\n  },\n\n  render() {\n    const {\n      mergedClsPrefix,\n      maxHeight,\n      flexHeight\n    } = this;\n    const headerInBody = maxHeight === undefined && !flexHeight;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-data-table-base-table`,\n      ref: \"selfElRef\"\n    }, headerInBody ? null : h(TableHeader, {\n      ref: \"headerInstRef\"\n    }), h(TableBody, {\n      ref: \"bodyInstRef\",\n      bodyStyle: this.bodyStyle,\n      showHeader: headerInBody,\n      flexHeight: flexHeight,\n      onResize: this.handleBodyResize\n    }));\n  }\n\n});","map":{"version":3,"names":["h","ref","defineComponent","inject","computed","watchEffect","formatLength","TableHeader","TableBody","dataTableInjectionKey","setup","mergedClsPrefixRef","rightFixedColumnsRef","leftFixedColumnsRef","bodyWidthRef","maxHeightRef","minHeightRef","flexHeightRef","syncScrollState","headerInstRef","bodyInstRef","selfElRef","fixedStateInitializedRef","value","length","bodyStyleRef","maxHeight","minHeight","handleBodyResize","entry","contentRect","width","getHeaderElement","$el","getBodyElement","getScrollContainer","exposedMethods","scrollTo","arg0","arg1","_a","selfEl","transitionDisabledClass","setTimeout","classList","remove","add","Object","assign","mergedClsPrefix","bodyStyle","flexHeight","render","headerInBody","undefined","class","showHeader","onResize"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/data-table/src/MainTable.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, defineComponent, inject, computed, watchEffect } from 'vue';\nimport { formatLength } from '../../_utils';\nimport TableHeader from './TableParts/Header';\nimport TableBody from './TableParts/Body';\nimport { dataTableInjectionKey } from './interface';\nexport default defineComponent({\n    setup() {\n        const { mergedClsPrefixRef, rightFixedColumnsRef, leftFixedColumnsRef, bodyWidthRef, maxHeightRef, minHeightRef, flexHeightRef, syncScrollState\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n         } = inject(dataTableInjectionKey);\n        const headerInstRef = ref(null);\n        const bodyInstRef = ref(null);\n        const selfElRef = ref(null);\n        const fixedStateInitializedRef = ref(!(leftFixedColumnsRef.value.length || rightFixedColumnsRef.value.length));\n        const bodyStyleRef = computed(() => {\n            return {\n                maxHeight: formatLength(maxHeightRef.value),\n                minHeight: formatLength(minHeightRef.value)\n            };\n        });\n        function handleBodyResize(entry) {\n            bodyWidthRef.value = entry.contentRect.width;\n            syncScrollState();\n            if (!fixedStateInitializedRef.value) {\n                fixedStateInitializedRef.value = true;\n            }\n        }\n        function getHeaderElement() {\n            const { value } = headerInstRef;\n            if (value) {\n                return value.$el;\n            }\n            return null;\n        }\n        function getBodyElement() {\n            const { value } = bodyInstRef;\n            if (value) {\n                return value.getScrollContainer();\n            }\n            return null;\n        }\n        const exposedMethods = {\n            getBodyElement,\n            getHeaderElement,\n            scrollTo(arg0, arg1) {\n                var _a;\n                (_a = bodyInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(arg0, arg1);\n            }\n        };\n        watchEffect(() => {\n            const { value: selfEl } = selfElRef;\n            if (!selfEl)\n                return;\n            const transitionDisabledClass = `${mergedClsPrefixRef.value}-data-table-base-table--transition-disabled`;\n            if (fixedStateInitializedRef.value) {\n                setTimeout(() => {\n                    selfEl.classList.remove(transitionDisabledClass);\n                }, 0);\n            }\n            else {\n                selfEl.classList.add(transitionDisabledClass);\n            }\n        });\n        return Object.assign({ maxHeight: maxHeightRef, mergedClsPrefix: mergedClsPrefixRef, selfElRef,\n            headerInstRef,\n            bodyInstRef, bodyStyle: bodyStyleRef, flexHeight: flexHeightRef, handleBodyResize }, exposedMethods);\n    },\n    render() {\n        const { mergedClsPrefix, maxHeight, flexHeight } = this;\n        const headerInBody = maxHeight === undefined && !flexHeight;\n        return (h(\"div\", { class: `${mergedClsPrefix}-data-table-base-table`, ref: \"selfElRef\" },\n            headerInBody ? null : h(TableHeader, { ref: \"headerInstRef\" }),\n            h(TableBody, { ref: \"bodyInstRef\", bodyStyle: this.bodyStyle, showHeader: headerInBody, flexHeight: flexHeight, onResize: this.handleBodyResize })));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}