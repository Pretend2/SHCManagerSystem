{"ast":null,"code":"import { ref, computed, toRef } from 'vue';\nimport { useMemo, useMergedState } from 'vooks'; // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\nexport function useTransferData(props, mergedDisabledRef) {\n  const uncontrolledValueRef = ref(props.defaultValue);\n  const controlledValueRef = toRef(props, 'value');\n  const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n  const optMapRef = computed(() => {\n    const map = new Map();\n    (props.options || []).forEach(opt => map.set(opt.value, opt));\n    return map;\n  });\n  const tgtValueSetRef = computed(() => new Set(mergedValueRef.value || []));\n  const srcOptsRef = computed(() => props.options.filter(option => !tgtValueSetRef.value.has(option.value)));\n  const tgtOptsRef = computed(() => {\n    const optMap = optMapRef.value;\n    return (mergedValueRef.value || []).map(v => optMap.get(v));\n  });\n  const srcPatternRef = ref('');\n  const tgtPatternRef = ref('');\n  const filteredSrcOptsRef = computed(() => {\n    if (!props.filterable) return srcOptsRef.value;\n    const {\n      filter\n    } = props;\n    return srcOptsRef.value.filter(opt => filter(srcPatternRef.value, opt, 'source'));\n  });\n  const filteredTgtOptsRef = computed(() => {\n    if (!props.filterable) return tgtOptsRef.value;\n    const {\n      filter\n    } = props;\n    return tgtOptsRef.value.filter(opt => filter(tgtPatternRef.value, opt, 'target'));\n  });\n  const avlSrcValueSetRef = computed(() => new Set(filteredSrcOptsRef.value.filter(opt => !opt.disabled).map(opt => opt.value)));\n  const avlTgtValueSetRef = computed(() => new Set(filteredTgtOptsRef.value.filter(opt => !opt.disabled).map(opt => opt.value)));\n  const srcCheckedValuesRef = ref([]);\n  const tgtCheckedValuesRef = ref([]);\n  const srcCheckedStatusRef = computed(() => {\n    const srcCheckedLength = srcCheckedValuesRef.value.filter(v => avlSrcValueSetRef.value.has(v)).length;\n    const avlValueCount = avlSrcValueSetRef.value.size;\n\n    if (avlValueCount === 0) {\n      return {\n        checked: false,\n        indeterminate: false,\n        disabled: true\n      };\n    } else if (srcCheckedLength === 0) {\n      return {\n        checked: false,\n        indeterminate: false\n      };\n    } else if (srcCheckedLength === avlValueCount) {\n      return {\n        checked: true,\n        indeterminate: false\n      };\n    } else {\n      return {\n        checked: false,\n        indeterminate: true\n      };\n    }\n  });\n  const tgtCheckedStatusRef = computed(() => {\n    const tgtCheckedLength = tgtCheckedValuesRef.value.filter(v => avlTgtValueSetRef.value.has(v)).length;\n    const avlValueCount = avlTgtValueSetRef.value.size;\n\n    if (avlValueCount === 0) {\n      return {\n        checked: false,\n        indeterminate: false,\n        disabled: true\n      };\n    } else if (tgtCheckedLength === 0) {\n      return {\n        checked: false,\n        indeterminate: false\n      };\n    } else if (tgtCheckedLength === avlValueCount) {\n      return {\n        checked: true,\n        indeterminate: false\n      };\n    } else {\n      return {\n        checked: false,\n        indeterminate: true\n      };\n    }\n  });\n  const fromButtonDisabledRef = useMemo(() => {\n    if (mergedDisabledRef.value) return true;\n    return tgtCheckedValuesRef.value.length === 0;\n  });\n  const toButtonDisabledRef = useMemo(() => {\n    if (mergedDisabledRef.value) return true;\n    return srcCheckedValuesRef.value.length === 0;\n  });\n  const isInputingRef = ref(false);\n\n  function handleInputFocus() {\n    isInputingRef.value = true;\n  }\n\n  function handleInputBlur() {\n    isInputingRef.value = false;\n  }\n\n  function handleSrcFilterUpdateValue(value) {\n    srcPatternRef.value = value !== null && value !== void 0 ? value : '';\n  }\n\n  function handleTgtFilterUpdateValue(value) {\n    tgtPatternRef.value = value !== null && value !== void 0 ? value : '';\n  }\n\n  return {\n    uncontrolledValue: uncontrolledValueRef,\n    mergedValue: mergedValueRef,\n    avlSrcValueSet: avlSrcValueSetRef,\n    avlTgtValueSet: avlTgtValueSetRef,\n    tgtOpts: tgtOptsRef,\n    srcOpts: srcOptsRef,\n    filteredSrcOpts: filteredSrcOptsRef,\n    filteredTgtOpts: filteredTgtOptsRef,\n    srcCheckedValues: srcCheckedValuesRef,\n    tgtCheckedValues: tgtCheckedValuesRef,\n    srcCheckedStatus: srcCheckedStatusRef,\n    tgtCheckedStatus: tgtCheckedStatusRef,\n    srcPattern: srcPatternRef,\n    tgtPattern: tgtPatternRef,\n    isInputing: isInputingRef,\n    fromButtonDisabled: fromButtonDisabledRef,\n    toButtonDisabled: toButtonDisabledRef,\n    handleInputFocus,\n    handleInputBlur,\n    handleTgtFilterUpdateValue,\n    handleSrcFilterUpdateValue\n  };\n}","map":{"version":3,"names":["ref","computed","toRef","useMemo","useMergedState","useTransferData","props","mergedDisabledRef","uncontrolledValueRef","defaultValue","controlledValueRef","mergedValueRef","optMapRef","map","Map","options","forEach","opt","set","value","tgtValueSetRef","Set","srcOptsRef","filter","option","has","tgtOptsRef","optMap","v","get","srcPatternRef","tgtPatternRef","filteredSrcOptsRef","filterable","filteredTgtOptsRef","avlSrcValueSetRef","disabled","avlTgtValueSetRef","srcCheckedValuesRef","tgtCheckedValuesRef","srcCheckedStatusRef","srcCheckedLength","length","avlValueCount","size","checked","indeterminate","tgtCheckedStatusRef","tgtCheckedLength","fromButtonDisabledRef","toButtonDisabledRef","isInputingRef","handleInputFocus","handleInputBlur","handleSrcFilterUpdateValue","handleTgtFilterUpdateValue","uncontrolledValue","mergedValue","avlSrcValueSet","avlTgtValueSet","tgtOpts","srcOpts","filteredSrcOpts","filteredTgtOpts","srcCheckedValues","tgtCheckedValues","srcCheckedStatus","tgtCheckedStatus","srcPattern","tgtPattern","isInputing","fromButtonDisabled","toButtonDisabled"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/legacy-transfer/src/use-transfer-data.js"],"sourcesContent":["import { ref, computed, toRef } from 'vue';\nimport { useMemo, useMergedState } from 'vooks';\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function useTransferData(props, mergedDisabledRef) {\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const optMapRef = computed(() => {\n        const map = new Map();\n        (props.options || []).forEach((opt) => map.set(opt.value, opt));\n        return map;\n    });\n    const tgtValueSetRef = computed(() => new Set(mergedValueRef.value || []));\n    const srcOptsRef = computed(() => props.options.filter((option) => !tgtValueSetRef.value.has(option.value)));\n    const tgtOptsRef = computed(() => {\n        const optMap = optMapRef.value;\n        return (mergedValueRef.value || []).map((v) => optMap.get(v));\n    });\n    const srcPatternRef = ref('');\n    const tgtPatternRef = ref('');\n    const filteredSrcOptsRef = computed(() => {\n        if (!props.filterable)\n            return srcOptsRef.value;\n        const { filter } = props;\n        return srcOptsRef.value.filter((opt) => filter(srcPatternRef.value, opt, 'source'));\n    });\n    const filteredTgtOptsRef = computed(() => {\n        if (!props.filterable)\n            return tgtOptsRef.value;\n        const { filter } = props;\n        return tgtOptsRef.value.filter((opt) => filter(tgtPatternRef.value, opt, 'target'));\n    });\n    const avlSrcValueSetRef = computed(() => new Set(filteredSrcOptsRef.value\n        .filter((opt) => !opt.disabled)\n        .map((opt) => opt.value)));\n    const avlTgtValueSetRef = computed(() => new Set(filteredTgtOptsRef.value\n        .filter((opt) => !opt.disabled)\n        .map((opt) => opt.value)));\n    const srcCheckedValuesRef = ref([]);\n    const tgtCheckedValuesRef = ref([]);\n    const srcCheckedStatusRef = computed(() => {\n        const srcCheckedLength = srcCheckedValuesRef.value.filter((v) => avlSrcValueSetRef.value.has(v)).length;\n        const avlValueCount = avlSrcValueSetRef.value.size;\n        if (avlValueCount === 0) {\n            return {\n                checked: false,\n                indeterminate: false,\n                disabled: true\n            };\n        }\n        else if (srcCheckedLength === 0) {\n            return {\n                checked: false,\n                indeterminate: false\n            };\n        }\n        else if (srcCheckedLength === avlValueCount) {\n            return {\n                checked: true,\n                indeterminate: false\n            };\n        }\n        else {\n            return {\n                checked: false,\n                indeterminate: true\n            };\n        }\n    });\n    const tgtCheckedStatusRef = computed(() => {\n        const tgtCheckedLength = tgtCheckedValuesRef.value.filter((v) => avlTgtValueSetRef.value.has(v)).length;\n        const avlValueCount = avlTgtValueSetRef.value.size;\n        if (avlValueCount === 0) {\n            return {\n                checked: false,\n                indeterminate: false,\n                disabled: true\n            };\n        }\n        else if (tgtCheckedLength === 0) {\n            return {\n                checked: false,\n                indeterminate: false\n            };\n        }\n        else if (tgtCheckedLength === avlValueCount) {\n            return {\n                checked: true,\n                indeterminate: false\n            };\n        }\n        else {\n            return {\n                checked: false,\n                indeterminate: true\n            };\n        }\n    });\n    const fromButtonDisabledRef = useMemo(() => {\n        if (mergedDisabledRef.value)\n            return true;\n        return tgtCheckedValuesRef.value.length === 0;\n    });\n    const toButtonDisabledRef = useMemo(() => {\n        if (mergedDisabledRef.value)\n            return true;\n        return srcCheckedValuesRef.value.length === 0;\n    });\n    const isInputingRef = ref(false);\n    function handleInputFocus() {\n        isInputingRef.value = true;\n    }\n    function handleInputBlur() {\n        isInputingRef.value = false;\n    }\n    function handleSrcFilterUpdateValue(value) {\n        srcPatternRef.value = value !== null && value !== void 0 ? value : '';\n    }\n    function handleTgtFilterUpdateValue(value) {\n        tgtPatternRef.value = value !== null && value !== void 0 ? value : '';\n    }\n    return {\n        uncontrolledValue: uncontrolledValueRef,\n        mergedValue: mergedValueRef,\n        avlSrcValueSet: avlSrcValueSetRef,\n        avlTgtValueSet: avlTgtValueSetRef,\n        tgtOpts: tgtOptsRef,\n        srcOpts: srcOptsRef,\n        filteredSrcOpts: filteredSrcOptsRef,\n        filteredTgtOpts: filteredTgtOptsRef,\n        srcCheckedValues: srcCheckedValuesRef,\n        tgtCheckedValues: tgtCheckedValuesRef,\n        srcCheckedStatus: srcCheckedStatusRef,\n        tgtCheckedStatus: tgtCheckedStatusRef,\n        srcPattern: srcPatternRef,\n        tgtPattern: tgtPatternRef,\n        isInputing: isInputingRef,\n        fromButtonDisabled: fromButtonDisabledRef,\n        toButtonDisabled: toButtonDisabledRef,\n        handleInputFocus,\n        handleInputBlur,\n        handleTgtFilterUpdateValue,\n        handleSrcFilterUpdateValue\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}