{"ast":null,"code":"import { ref, inject, watchEffect } from 'vue';\nimport { hash } from 'css-render';\nimport { useSsrAdapter } from '@css-render/vue3-ssr';\nimport { configProviderInjectionKey } from '../config-provider/src/context';\nimport { throwError } from '../_utils';\nimport { c } from '../_utils/cssr';\nexport function useThemeClass(componentName, hashRef, cssVarsRef, props) {\n  var _a;\n\n  if (!cssVarsRef) throwError('useThemeClass', 'cssVarsRef is not passed');\n  const mergedThemeHashRef = (_a = inject(configProviderInjectionKey, null)) === null || _a === void 0 ? void 0 : _a.mergedThemeHashRef;\n  const themeClassRef = ref('');\n  const ssrAdapter = useSsrAdapter();\n  let renderCallback;\n  const hashClassPrefix = `__${componentName}`;\n\n  const mountStyle = () => {\n    let finalThemeHash = hashClassPrefix;\n    const hashValue = hashRef ? hashRef.value : undefined;\n    const themeHash = mergedThemeHashRef === null || mergedThemeHashRef === void 0 ? void 0 : mergedThemeHashRef.value;\n    if (themeHash) finalThemeHash += '-' + themeHash;\n    if (hashValue) finalThemeHash += '-' + hashValue;\n    const {\n      themeOverrides,\n      builtinThemeOverrides\n    } = props;\n\n    if (themeOverrides) {\n      finalThemeHash += '-' + hash(JSON.stringify(themeOverrides));\n    }\n\n    if (builtinThemeOverrides) {\n      finalThemeHash += '-' + hash(JSON.stringify(builtinThemeOverrides));\n    }\n\n    themeClassRef.value = finalThemeHash;\n\n    renderCallback = () => {\n      const cssVars = cssVarsRef.value;\n      let style = '';\n\n      for (const key in cssVars) {\n        style += `${key}: ${cssVars[key]};`;\n      }\n\n      c(`.${finalThemeHash}`, style).mount({\n        id: finalThemeHash,\n        ssr: ssrAdapter\n      });\n      renderCallback = undefined;\n    };\n  };\n\n  watchEffect(() => {\n    mountStyle();\n  });\n  return {\n    themeClass: themeClassRef,\n    onRender: () => {\n      renderCallback === null || renderCallback === void 0 ? void 0 : renderCallback();\n    }\n  };\n}","map":{"version":3,"names":["ref","inject","watchEffect","hash","useSsrAdapter","configProviderInjectionKey","throwError","c","useThemeClass","componentName","hashRef","cssVarsRef","props","_a","mergedThemeHashRef","themeClassRef","ssrAdapter","renderCallback","hashClassPrefix","mountStyle","finalThemeHash","hashValue","value","undefined","themeHash","themeOverrides","builtinThemeOverrides","JSON","stringify","cssVars","style","key","mount","id","ssr","themeClass","onRender"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/_mixins/use-css-vars-class.js"],"sourcesContent":["import { ref, inject, watchEffect } from 'vue';\nimport { hash } from 'css-render';\nimport { useSsrAdapter } from '@css-render/vue3-ssr';\nimport { configProviderInjectionKey } from '../config-provider/src/context';\nimport { throwError } from '../_utils';\nimport { c } from '../_utils/cssr';\nexport function useThemeClass(componentName, hashRef, cssVarsRef, props) {\n    var _a;\n    if (!cssVarsRef)\n        throwError('useThemeClass', 'cssVarsRef is not passed');\n    const mergedThemeHashRef = (_a = inject(configProviderInjectionKey, null)) === null || _a === void 0 ? void 0 : _a.mergedThemeHashRef;\n    const themeClassRef = ref('');\n    const ssrAdapter = useSsrAdapter();\n    let renderCallback;\n    const hashClassPrefix = `__${componentName}`;\n    const mountStyle = () => {\n        let finalThemeHash = hashClassPrefix;\n        const hashValue = hashRef ? hashRef.value : undefined;\n        const themeHash = mergedThemeHashRef === null || mergedThemeHashRef === void 0 ? void 0 : mergedThemeHashRef.value;\n        if (themeHash)\n            finalThemeHash += '-' + themeHash;\n        if (hashValue)\n            finalThemeHash += '-' + hashValue;\n        const { themeOverrides, builtinThemeOverrides } = props;\n        if (themeOverrides) {\n            finalThemeHash += '-' + hash(JSON.stringify(themeOverrides));\n        }\n        if (builtinThemeOverrides) {\n            finalThemeHash += '-' + hash(JSON.stringify(builtinThemeOverrides));\n        }\n        themeClassRef.value = finalThemeHash;\n        renderCallback = () => {\n            const cssVars = cssVarsRef.value;\n            let style = '';\n            for (const key in cssVars) {\n                style += `${key}: ${cssVars[key]};`;\n            }\n            c(`.${finalThemeHash}`, style).mount({\n                id: finalThemeHash,\n                ssr: ssrAdapter\n            });\n            renderCallback = undefined;\n        };\n    };\n    watchEffect(() => {\n        mountStyle();\n    });\n    return {\n        themeClass: themeClassRef,\n        onRender: () => {\n            renderCallback === null || renderCallback === void 0 ? void 0 : renderCallback();\n        }\n    };\n}\n"],"mappings":"AAAA,SAASA,GAAT,EAAcC,MAAd,EAAsBC,WAAtB,QAAyC,KAAzC;AACA,SAASC,IAAT,QAAqB,YAArB;AACA,SAASC,aAAT,QAA8B,sBAA9B;AACA,SAASC,0BAAT,QAA2C,gCAA3C;AACA,SAASC,UAAT,QAA2B,WAA3B;AACA,SAASC,CAAT,QAAkB,gBAAlB;AACA,OAAO,SAASC,aAAT,CAAuBC,aAAvB,EAAsCC,OAAtC,EAA+CC,UAA/C,EAA2DC,KAA3D,EAAkE;EACrE,IAAIC,EAAJ;;EACA,IAAI,CAACF,UAAL,EACIL,UAAU,CAAC,eAAD,EAAkB,0BAAlB,CAAV;EACJ,MAAMQ,kBAAkB,GAAG,CAACD,EAAE,GAAGZ,MAAM,CAACI,0BAAD,EAA6B,IAA7B,CAAZ,MAAoD,IAApD,IAA4DQ,EAAE,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,EAAE,CAACC,kBAAnH;EACA,MAAMC,aAAa,GAAGf,GAAG,CAAC,EAAD,CAAzB;EACA,MAAMgB,UAAU,GAAGZ,aAAa,EAAhC;EACA,IAAIa,cAAJ;EACA,MAAMC,eAAe,GAAI,KAAIT,aAAc,EAA3C;;EACA,MAAMU,UAAU,GAAG,MAAM;IACrB,IAAIC,cAAc,GAAGF,eAArB;IACA,MAAMG,SAAS,GAAGX,OAAO,GAAGA,OAAO,CAACY,KAAX,GAAmBC,SAA5C;IACA,MAAMC,SAAS,GAAGV,kBAAkB,KAAK,IAAvB,IAA+BA,kBAAkB,KAAK,KAAK,CAA3D,GAA+D,KAAK,CAApE,GAAwEA,kBAAkB,CAACQ,KAA7G;IACA,IAAIE,SAAJ,EACIJ,cAAc,IAAI,MAAMI,SAAxB;IACJ,IAAIH,SAAJ,EACID,cAAc,IAAI,MAAMC,SAAxB;IACJ,MAAM;MAAEI,cAAF;MAAkBC;IAAlB,IAA4Cd,KAAlD;;IACA,IAAIa,cAAJ,EAAoB;MAChBL,cAAc,IAAI,MAAMjB,IAAI,CAACwB,IAAI,CAACC,SAAL,CAAeH,cAAf,CAAD,CAA5B;IACH;;IACD,IAAIC,qBAAJ,EAA2B;MACvBN,cAAc,IAAI,MAAMjB,IAAI,CAACwB,IAAI,CAACC,SAAL,CAAeF,qBAAf,CAAD,CAA5B;IACH;;IACDX,aAAa,CAACO,KAAd,GAAsBF,cAAtB;;IACAH,cAAc,GAAG,MAAM;MACnB,MAAMY,OAAO,GAAGlB,UAAU,CAACW,KAA3B;MACA,IAAIQ,KAAK,GAAG,EAAZ;;MACA,KAAK,MAAMC,GAAX,IAAkBF,OAAlB,EAA2B;QACvBC,KAAK,IAAK,GAAEC,GAAI,KAAIF,OAAO,CAACE,GAAD,CAAM,GAAjC;MACH;;MACDxB,CAAC,CAAE,IAAGa,cAAe,EAApB,EAAuBU,KAAvB,CAAD,CAA+BE,KAA/B,CAAqC;QACjCC,EAAE,EAAEb,cAD6B;QAEjCc,GAAG,EAAElB;MAF4B,CAArC;MAIAC,cAAc,GAAGM,SAAjB;IACH,CAXD;EAYH,CA5BD;;EA6BArB,WAAW,CAAC,MAAM;IACdiB,UAAU;EACb,CAFU,CAAX;EAGA,OAAO;IACHgB,UAAU,EAAEpB,aADT;IAEHqB,QAAQ,EAAE,MAAM;MACZnB,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,cAAc,EAA9E;IACH;EAJE,CAAP;AAMH"},"metadata":{},"sourceType":"module"}