{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { beforeNextFrameOnce } from 'seemly';\nimport { computed, watch, ref } from 'vue';\nimport { formatLength } from '../../_utils';\nimport { getNumberColWidth, getColKey } from './utils'; // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\nexport function useScroll(props, {\n  mainTableInstRef,\n  mergedCurrentPageRef,\n  bodyWidthRef,\n  scrollPartRef\n}) {\n  let scrollLeft = 0;\n  const leftActiveFixedColKeyRef = ref(null);\n  const leftActiveFixedChildrenColKeysRef = ref([]);\n  const rightActiveFixedColKeyRef = ref(null);\n  const rightActiveFixedChildrenColKeysRef = ref([]);\n  const styleScrollXRef = computed(() => {\n    return formatLength(props.scrollX);\n  });\n  const leftFixedColumnsRef = computed(() => {\n    return props.columns.filter(column => column.fixed === 'left');\n  });\n  const rightFixedColumnsRef = computed(() => {\n    return props.columns.filter(column => column.fixed === 'right');\n  });\n  const fixedColumnLeftMapRef = computed(() => {\n    const columns = {};\n    let left = 0;\n\n    function traverse(cols) {\n      cols.forEach(col => {\n        const positionInfo = {\n          start: left,\n          end: 0\n        };\n        columns[getColKey(col)] = positionInfo;\n\n        if ('children' in col) {\n          traverse(col.children);\n          positionInfo.end = left;\n        } else {\n          left += getNumberColWidth(col) || 0;\n          positionInfo.end = left;\n        }\n      });\n    }\n\n    traverse(leftFixedColumnsRef.value);\n    return columns;\n  });\n  const fixedColumnRightMapRef = computed(() => {\n    const columns = {};\n    let right = 0;\n\n    function traverse(cols) {\n      for (let i = cols.length - 1; i >= 0; --i) {\n        const col = cols[i];\n        const positionInfo = {\n          start: right,\n          end: 0\n        };\n        columns[getColKey(col)] = positionInfo;\n\n        if ('children' in col) {\n          traverse(col.children);\n          positionInfo.end = right;\n        } else {\n          right += getNumberColWidth(col) || 0;\n          positionInfo.end = right;\n        }\n      }\n    }\n\n    traverse(rightFixedColumnsRef.value);\n    return columns;\n  });\n\n  function deriveActiveLeftFixedColumn() {\n    var _a, _b; // target is header element\n\n\n    const {\n      value: leftFixedColumns\n    } = leftFixedColumnsRef;\n    let leftWidth = 0;\n    const {\n      value: fixedColumnLeftMap\n    } = fixedColumnLeftMapRef;\n    let leftActiveFixedColKey = null;\n\n    for (let i = 0; i < leftFixedColumns.length; ++i) {\n      const key = getColKey(leftFixedColumns[i]);\n\n      if (scrollLeft > (((_a = fixedColumnLeftMap[key]) === null || _a === void 0 ? void 0 : _a.start) || 0) - leftWidth) {\n        leftActiveFixedColKey = key;\n        leftWidth = ((_b = fixedColumnLeftMap[key]) === null || _b === void 0 ? void 0 : _b.end) || 0;\n      } else {\n        break;\n      }\n    }\n\n    leftActiveFixedColKeyRef.value = leftActiveFixedColKey;\n  }\n\n  function deriveActiveLeftFixedChildrenColumns() {\n    leftActiveFixedChildrenColKeysRef.value = [];\n    let activeLeftFixedColumn = props.columns.find(col => getColKey(col) === leftActiveFixedColKeyRef.value);\n\n    while (activeLeftFixedColumn && 'children' in activeLeftFixedColumn) {\n      const length = activeLeftFixedColumn.children.length;\n      if (length === 0) break;\n      const nextActiveLeftFixedColumn = activeLeftFixedColumn.children[length - 1];\n      leftActiveFixedChildrenColKeysRef.value.push(getColKey(nextActiveLeftFixedColumn));\n      activeLeftFixedColumn = nextActiveLeftFixedColumn;\n    }\n  }\n\n  function deriveActiveRightFixedColumn() {\n    var _a, _b; // target is header element\n\n\n    const {\n      value: rightFixedColumns\n    } = rightFixedColumnsRef;\n    const scrollWidth = Number(props.scrollX);\n    const {\n      value: tableWidth\n    } = bodyWidthRef;\n    if (tableWidth === null) return;\n    let rightWidth = 0;\n    let rightActiveFixedColKey = null;\n    const {\n      value: fixedColumnRightMap\n    } = fixedColumnRightMapRef;\n\n    for (let i = rightFixedColumns.length - 1; i >= 0; --i) {\n      const key = getColKey(rightFixedColumns[i]);\n\n      if (Math.round(scrollLeft + (((_a = fixedColumnRightMap[key]) === null || _a === void 0 ? void 0 : _a.start) || 0) + tableWidth - rightWidth) < scrollWidth) {\n        rightActiveFixedColKey = key;\n        rightWidth = ((_b = fixedColumnRightMap[key]) === null || _b === void 0 ? void 0 : _b.end) || 0;\n      } else {\n        break;\n      }\n    }\n\n    rightActiveFixedColKeyRef.value = rightActiveFixedColKey;\n  }\n\n  function deriveActiveRightFixedChildrenColumns() {\n    rightActiveFixedChildrenColKeysRef.value = [];\n    let activeRightFixedColumn = props.columns.find(col => getColKey(col) === rightActiveFixedColKeyRef.value);\n\n    while (activeRightFixedColumn && 'children' in activeRightFixedColumn && activeRightFixedColumn.children.length) {\n      const nextActiveRightFixedColumn = activeRightFixedColumn.children[0];\n      rightActiveFixedChildrenColKeysRef.value.push(getColKey(nextActiveRightFixedColumn));\n      activeRightFixedColumn = nextActiveRightFixedColumn;\n    }\n  }\n\n  function getScrollElements() {\n    const header = mainTableInstRef.value ? mainTableInstRef.value.getHeaderElement() : null;\n    const body = mainTableInstRef.value ? mainTableInstRef.value.getBodyElement() : null;\n    return {\n      header,\n      body\n    };\n  }\n\n  function scrollMainTableBodyToTop() {\n    const {\n      body\n    } = getScrollElements();\n\n    if (body) {\n      body.scrollTop = 0;\n    }\n  }\n\n  function handleTableHeaderScroll() {\n    if (scrollPartRef.value === 'head') {\n      beforeNextFrameOnce(syncScrollState);\n    }\n  }\n\n  function handleTableBodyScroll(e) {\n    var _a;\n\n    (_a = props.onScroll) === null || _a === void 0 ? void 0 : _a.call(props, e);\n\n    if (scrollPartRef.value === 'body') {\n      beforeNextFrameOnce(syncScrollState);\n    }\n  }\n\n  function syncScrollState() {\n    // We can't simply use props.scrollX to determine whether the table has\n    // need to be sync since user may set column width for each column.\n    // Just let it be, the scroll listener won't be triggered for a basic table.\n    const {\n      header,\n      body\n    } = getScrollElements();\n    if (!body) return;\n    const {\n      value: tableWidth\n    } = bodyWidthRef;\n    if (tableWidth === null) return;\n    const {\n      value: scrollPart\n    } = scrollPartRef;\n\n    if (props.maxHeight || props.flexHeight) {\n      if (!header) return; // we need to deal with overscroll\n\n      if (scrollPart === 'head') {\n        scrollLeft = header.scrollLeft;\n        body.scrollLeft = scrollLeft;\n      } else {\n        scrollLeft = body.scrollLeft;\n        header.scrollLeft = scrollLeft;\n      }\n    } else {\n      scrollLeft = body.scrollLeft;\n    }\n\n    deriveActiveLeftFixedColumn();\n    deriveActiveLeftFixedChildrenColumns();\n    deriveActiveRightFixedColumn();\n    deriveActiveRightFixedChildrenColumns();\n  }\n\n  function setHeaderScrollLeft(left) {\n    const {\n      header\n    } = getScrollElements();\n    if (!header) return;\n    header.scrollLeft = left;\n    syncScrollState();\n  }\n\n  watch(mergedCurrentPageRef, () => {\n    scrollMainTableBodyToTop();\n  });\n  return {\n    styleScrollXRef,\n    fixedColumnLeftMapRef,\n    fixedColumnRightMapRef,\n    leftFixedColumnsRef,\n    rightFixedColumnsRef,\n    leftActiveFixedColKeyRef,\n    leftActiveFixedChildrenColKeysRef,\n    rightActiveFixedColKeyRef,\n    rightActiveFixedChildrenColKeysRef,\n    syncScrollState,\n    handleTableBodyScroll,\n    handleTableHeaderScroll,\n    setHeaderScrollLeft\n  };\n}","map":{"version":3,"names":["beforeNextFrameOnce","computed","watch","ref","formatLength","getNumberColWidth","getColKey","useScroll","props","mainTableInstRef","mergedCurrentPageRef","bodyWidthRef","scrollPartRef","scrollLeft","leftActiveFixedColKeyRef","leftActiveFixedChildrenColKeysRef","rightActiveFixedColKeyRef","rightActiveFixedChildrenColKeysRef","styleScrollXRef","scrollX","leftFixedColumnsRef","columns","filter","column","fixed","rightFixedColumnsRef","fixedColumnLeftMapRef","left","traverse","cols","forEach","col","positionInfo","start","end","children","value","fixedColumnRightMapRef","right","i","length","deriveActiveLeftFixedColumn","_a","_b","leftFixedColumns","leftWidth","fixedColumnLeftMap","leftActiveFixedColKey","key","deriveActiveLeftFixedChildrenColumns","activeLeftFixedColumn","find","nextActiveLeftFixedColumn","push","deriveActiveRightFixedColumn","rightFixedColumns","scrollWidth","Number","tableWidth","rightWidth","rightActiveFixedColKey","fixedColumnRightMap","Math","round","deriveActiveRightFixedChildrenColumns","activeRightFixedColumn","nextActiveRightFixedColumn","getScrollElements","header","getHeaderElement","body","getBodyElement","scrollMainTableBodyToTop","scrollTop","handleTableHeaderScroll","syncScrollState","handleTableBodyScroll","e","onScroll","call","scrollPart","maxHeight","flexHeight","setHeaderScrollLeft"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/data-table/src/use-scroll.js"],"sourcesContent":["import { beforeNextFrameOnce } from 'seemly';\nimport { computed, watch, ref } from 'vue';\nimport { formatLength } from '../../_utils';\nimport { getNumberColWidth, getColKey } from './utils';\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function useScroll(props, { mainTableInstRef, mergedCurrentPageRef, bodyWidthRef, scrollPartRef }) {\n    let scrollLeft = 0;\n    const leftActiveFixedColKeyRef = ref(null);\n    const leftActiveFixedChildrenColKeysRef = ref([]);\n    const rightActiveFixedColKeyRef = ref(null);\n    const rightActiveFixedChildrenColKeysRef = ref([]);\n    const styleScrollXRef = computed(() => {\n        return formatLength(props.scrollX);\n    });\n    const leftFixedColumnsRef = computed(() => {\n        return props.columns.filter((column) => column.fixed === 'left');\n    });\n    const rightFixedColumnsRef = computed(() => {\n        return props.columns.filter((column) => column.fixed === 'right');\n    });\n    const fixedColumnLeftMapRef = computed(() => {\n        const columns = {};\n        let left = 0;\n        function traverse(cols) {\n            cols.forEach((col) => {\n                const positionInfo = { start: left, end: 0 };\n                columns[getColKey(col)] = positionInfo;\n                if ('children' in col) {\n                    traverse(col.children);\n                    positionInfo.end = left;\n                }\n                else {\n                    left += getNumberColWidth(col) || 0;\n                    positionInfo.end = left;\n                }\n            });\n        }\n        traverse(leftFixedColumnsRef.value);\n        return columns;\n    });\n    const fixedColumnRightMapRef = computed(() => {\n        const columns = {};\n        let right = 0;\n        function traverse(cols) {\n            for (let i = cols.length - 1; i >= 0; --i) {\n                const col = cols[i];\n                const positionInfo = { start: right, end: 0 };\n                columns[getColKey(col)] = positionInfo;\n                if ('children' in col) {\n                    traverse(col.children);\n                    positionInfo.end = right;\n                }\n                else {\n                    right += getNumberColWidth(col) || 0;\n                    positionInfo.end = right;\n                }\n            }\n        }\n        traverse(rightFixedColumnsRef.value);\n        return columns;\n    });\n    function deriveActiveLeftFixedColumn() {\n        var _a, _b;\n        // target is header element\n        const { value: leftFixedColumns } = leftFixedColumnsRef;\n        let leftWidth = 0;\n        const { value: fixedColumnLeftMap } = fixedColumnLeftMapRef;\n        let leftActiveFixedColKey = null;\n        for (let i = 0; i < leftFixedColumns.length; ++i) {\n            const key = getColKey(leftFixedColumns[i]);\n            if (scrollLeft > (((_a = fixedColumnLeftMap[key]) === null || _a === void 0 ? void 0 : _a.start) || 0) - leftWidth) {\n                leftActiveFixedColKey = key;\n                leftWidth = ((_b = fixedColumnLeftMap[key]) === null || _b === void 0 ? void 0 : _b.end) || 0;\n            }\n            else {\n                break;\n            }\n        }\n        leftActiveFixedColKeyRef.value = leftActiveFixedColKey;\n    }\n    function deriveActiveLeftFixedChildrenColumns() {\n        leftActiveFixedChildrenColKeysRef.value = [];\n        let activeLeftFixedColumn = props.columns.find((col) => getColKey(col) === leftActiveFixedColKeyRef.value);\n        while (activeLeftFixedColumn && 'children' in activeLeftFixedColumn) {\n            const length = activeLeftFixedColumn.children.length;\n            if (length === 0)\n                break;\n            const nextActiveLeftFixedColumn = activeLeftFixedColumn.children[length - 1];\n            leftActiveFixedChildrenColKeysRef.value.push(getColKey(nextActiveLeftFixedColumn));\n            activeLeftFixedColumn = nextActiveLeftFixedColumn;\n        }\n    }\n    function deriveActiveRightFixedColumn() {\n        var _a, _b;\n        // target is header element\n        const { value: rightFixedColumns } = rightFixedColumnsRef;\n        const scrollWidth = Number(props.scrollX);\n        const { value: tableWidth } = bodyWidthRef;\n        if (tableWidth === null)\n            return;\n        let rightWidth = 0;\n        let rightActiveFixedColKey = null;\n        const { value: fixedColumnRightMap } = fixedColumnRightMapRef;\n        for (let i = rightFixedColumns.length - 1; i >= 0; --i) {\n            const key = getColKey(rightFixedColumns[i]);\n            if (Math.round(scrollLeft +\n                (((_a = fixedColumnRightMap[key]) === null || _a === void 0 ? void 0 : _a.start) || 0) +\n                tableWidth -\n                rightWidth) < scrollWidth) {\n                rightActiveFixedColKey = key;\n                rightWidth = ((_b = fixedColumnRightMap[key]) === null || _b === void 0 ? void 0 : _b.end) || 0;\n            }\n            else {\n                break;\n            }\n        }\n        rightActiveFixedColKeyRef.value = rightActiveFixedColKey;\n    }\n    function deriveActiveRightFixedChildrenColumns() {\n        rightActiveFixedChildrenColKeysRef.value = [];\n        let activeRightFixedColumn = props.columns.find((col) => getColKey(col) === rightActiveFixedColKeyRef.value);\n        while (activeRightFixedColumn &&\n            'children' in activeRightFixedColumn &&\n            activeRightFixedColumn.children.length) {\n            const nextActiveRightFixedColumn = activeRightFixedColumn.children[0];\n            rightActiveFixedChildrenColKeysRef.value.push(getColKey(nextActiveRightFixedColumn));\n            activeRightFixedColumn = nextActiveRightFixedColumn;\n        }\n    }\n    function getScrollElements() {\n        const header = mainTableInstRef.value\n            ? mainTableInstRef.value.getHeaderElement()\n            : null;\n        const body = mainTableInstRef.value\n            ? mainTableInstRef.value.getBodyElement()\n            : null;\n        return {\n            header,\n            body\n        };\n    }\n    function scrollMainTableBodyToTop() {\n        const { body } = getScrollElements();\n        if (body) {\n            body.scrollTop = 0;\n        }\n    }\n    function handleTableHeaderScroll() {\n        if (scrollPartRef.value === 'head') {\n            beforeNextFrameOnce(syncScrollState);\n        }\n    }\n    function handleTableBodyScroll(e) {\n        var _a;\n        (_a = props.onScroll) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        if (scrollPartRef.value === 'body') {\n            beforeNextFrameOnce(syncScrollState);\n        }\n    }\n    function syncScrollState() {\n        // We can't simply use props.scrollX to determine whether the table has\n        // need to be sync since user may set column width for each column.\n        // Just let it be, the scroll listener won't be triggered for a basic table.\n        const { header, body } = getScrollElements();\n        if (!body)\n            return;\n        const { value: tableWidth } = bodyWidthRef;\n        if (tableWidth === null)\n            return;\n        const { value: scrollPart } = scrollPartRef;\n        if (props.maxHeight || props.flexHeight) {\n            if (!header)\n                return;\n            // we need to deal with overscroll\n            if (scrollPart === 'head') {\n                scrollLeft = header.scrollLeft;\n                body.scrollLeft = scrollLeft;\n            }\n            else {\n                scrollLeft = body.scrollLeft;\n                header.scrollLeft = scrollLeft;\n            }\n        }\n        else {\n            scrollLeft = body.scrollLeft;\n        }\n        deriveActiveLeftFixedColumn();\n        deriveActiveLeftFixedChildrenColumns();\n        deriveActiveRightFixedColumn();\n        deriveActiveRightFixedChildrenColumns();\n    }\n    function setHeaderScrollLeft(left) {\n        const { header } = getScrollElements();\n        if (!header)\n            return;\n        header.scrollLeft = left;\n        syncScrollState();\n    }\n    watch(mergedCurrentPageRef, () => {\n        scrollMainTableBodyToTop();\n    });\n    return {\n        styleScrollXRef,\n        fixedColumnLeftMapRef,\n        fixedColumnRightMapRef,\n        leftFixedColumnsRef,\n        rightFixedColumnsRef,\n        leftActiveFixedColKeyRef,\n        leftActiveFixedChildrenColKeysRef,\n        rightActiveFixedColKeyRef,\n        rightActiveFixedChildrenColKeysRef,\n        syncScrollState,\n        handleTableBodyScroll,\n        handleTableHeaderScroll,\n        setHeaderScrollLeft\n    };\n}\n"],"mappings":";AAAA,SAASA,mBAAT,QAAoC,QAApC;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,GAA1B,QAAqC,KAArC;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,SAASC,iBAAT,EAA4BC,SAA5B,QAA6C,SAA7C,C,CACA;;AACA,OAAO,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;EAAEC,gBAAF;EAAoBC,oBAApB;EAA0CC,YAA1C;EAAwDC;AAAxD,CAA1B,EAAmG;EACtG,IAAIC,UAAU,GAAG,CAAjB;EACA,MAAMC,wBAAwB,GAAGX,GAAG,CAAC,IAAD,CAApC;EACA,MAAMY,iCAAiC,GAAGZ,GAAG,CAAC,EAAD,CAA7C;EACA,MAAMa,yBAAyB,GAAGb,GAAG,CAAC,IAAD,CAArC;EACA,MAAMc,kCAAkC,GAAGd,GAAG,CAAC,EAAD,CAA9C;EACA,MAAMe,eAAe,GAAGjB,QAAQ,CAAC,MAAM;IACnC,OAAOG,YAAY,CAACI,KAAK,CAACW,OAAP,CAAnB;EACH,CAF+B,CAAhC;EAGA,MAAMC,mBAAmB,GAAGnB,QAAQ,CAAC,MAAM;IACvC,OAAOO,KAAK,CAACa,OAAN,CAAcC,MAAd,CAAsBC,MAAD,IAAYA,MAAM,CAACC,KAAP,KAAiB,MAAlD,CAAP;EACH,CAFmC,CAApC;EAGA,MAAMC,oBAAoB,GAAGxB,QAAQ,CAAC,MAAM;IACxC,OAAOO,KAAK,CAACa,OAAN,CAAcC,MAAd,CAAsBC,MAAD,IAAYA,MAAM,CAACC,KAAP,KAAiB,OAAlD,CAAP;EACH,CAFoC,CAArC;EAGA,MAAME,qBAAqB,GAAGzB,QAAQ,CAAC,MAAM;IACzC,MAAMoB,OAAO,GAAG,EAAhB;IACA,IAAIM,IAAI,GAAG,CAAX;;IACA,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;MACpBA,IAAI,CAACC,OAAL,CAAcC,GAAD,IAAS;QAClB,MAAMC,YAAY,GAAG;UAAEC,KAAK,EAAEN,IAAT;UAAeO,GAAG,EAAE;QAApB,CAArB;QACAb,OAAO,CAACf,SAAS,CAACyB,GAAD,CAAV,CAAP,GAA0BC,YAA1B;;QACA,IAAI,cAAcD,GAAlB,EAAuB;UACnBH,QAAQ,CAACG,GAAG,CAACI,QAAL,CAAR;UACAH,YAAY,CAACE,GAAb,GAAmBP,IAAnB;QACH,CAHD,MAIK;UACDA,IAAI,IAAItB,iBAAiB,CAAC0B,GAAD,CAAjB,IAA0B,CAAlC;UACAC,YAAY,CAACE,GAAb,GAAmBP,IAAnB;QACH;MACJ,CAXD;IAYH;;IACDC,QAAQ,CAACR,mBAAmB,CAACgB,KAArB,CAAR;IACA,OAAOf,OAAP;EACH,CAnBqC,CAAtC;EAoBA,MAAMgB,sBAAsB,GAAGpC,QAAQ,CAAC,MAAM;IAC1C,MAAMoB,OAAO,GAAG,EAAhB;IACA,IAAIiB,KAAK,GAAG,CAAZ;;IACA,SAASV,QAAT,CAAkBC,IAAlB,EAAwB;MACpB,KAAK,IAAIU,CAAC,GAAGV,IAAI,CAACW,MAAL,GAAc,CAA3B,EAA8BD,CAAC,IAAI,CAAnC,EAAsC,EAAEA,CAAxC,EAA2C;QACvC,MAAMR,GAAG,GAAGF,IAAI,CAACU,CAAD,CAAhB;QACA,MAAMP,YAAY,GAAG;UAAEC,KAAK,EAAEK,KAAT;UAAgBJ,GAAG,EAAE;QAArB,CAArB;QACAb,OAAO,CAACf,SAAS,CAACyB,GAAD,CAAV,CAAP,GAA0BC,YAA1B;;QACA,IAAI,cAAcD,GAAlB,EAAuB;UACnBH,QAAQ,CAACG,GAAG,CAACI,QAAL,CAAR;UACAH,YAAY,CAACE,GAAb,GAAmBI,KAAnB;QACH,CAHD,MAIK;UACDA,KAAK,IAAIjC,iBAAiB,CAAC0B,GAAD,CAAjB,IAA0B,CAAnC;UACAC,YAAY,CAACE,GAAb,GAAmBI,KAAnB;QACH;MACJ;IACJ;;IACDV,QAAQ,CAACH,oBAAoB,CAACW,KAAtB,CAAR;IACA,OAAOf,OAAP;EACH,CApBsC,CAAvC;;EAqBA,SAASoB,2BAAT,GAAuC;IACnC,IAAIC,EAAJ,EAAQC,EAAR,CADmC,CAEnC;;;IACA,MAAM;MAAEP,KAAK,EAAEQ;IAAT,IAA8BxB,mBAApC;IACA,IAAIyB,SAAS,GAAG,CAAhB;IACA,MAAM;MAAET,KAAK,EAAEU;IAAT,IAAgCpB,qBAAtC;IACA,IAAIqB,qBAAqB,GAAG,IAA5B;;IACA,KAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGK,gBAAgB,CAACJ,MAArC,EAA6C,EAAED,CAA/C,EAAkD;MAC9C,MAAMS,GAAG,GAAG1C,SAAS,CAACsC,gBAAgB,CAACL,CAAD,CAAjB,CAArB;;MACA,IAAI1B,UAAU,GAAG,CAAC,CAAC,CAAC6B,EAAE,GAAGI,kBAAkB,CAACE,GAAD,CAAxB,MAAmC,IAAnC,IAA2CN,EAAE,KAAK,KAAK,CAAvD,GAA2D,KAAK,CAAhE,GAAoEA,EAAE,CAACT,KAAxE,KAAkF,CAAnF,IAAwFY,SAAzG,EAAoH;QAChHE,qBAAqB,GAAGC,GAAxB;QACAH,SAAS,GAAG,CAAC,CAACF,EAAE,GAAGG,kBAAkB,CAACE,GAAD,CAAxB,MAAmC,IAAnC,IAA2CL,EAAE,KAAK,KAAK,CAAvD,GAA2D,KAAK,CAAhE,GAAoEA,EAAE,CAACT,GAAxE,KAAgF,CAA5F;MACH,CAHD,MAIK;QACD;MACH;IACJ;;IACDpB,wBAAwB,CAACsB,KAAzB,GAAiCW,qBAAjC;EACH;;EACD,SAASE,oCAAT,GAAgD;IAC5ClC,iCAAiC,CAACqB,KAAlC,GAA0C,EAA1C;IACA,IAAIc,qBAAqB,GAAG1C,KAAK,CAACa,OAAN,CAAc8B,IAAd,CAAoBpB,GAAD,IAASzB,SAAS,CAACyB,GAAD,CAAT,KAAmBjB,wBAAwB,CAACsB,KAAxE,CAA5B;;IACA,OAAOc,qBAAqB,IAAI,cAAcA,qBAA9C,EAAqE;MACjE,MAAMV,MAAM,GAAGU,qBAAqB,CAACf,QAAtB,CAA+BK,MAA9C;MACA,IAAIA,MAAM,KAAK,CAAf,EACI;MACJ,MAAMY,yBAAyB,GAAGF,qBAAqB,CAACf,QAAtB,CAA+BK,MAAM,GAAG,CAAxC,CAAlC;MACAzB,iCAAiC,CAACqB,KAAlC,CAAwCiB,IAAxC,CAA6C/C,SAAS,CAAC8C,yBAAD,CAAtD;MACAF,qBAAqB,GAAGE,yBAAxB;IACH;EACJ;;EACD,SAASE,4BAAT,GAAwC;IACpC,IAAIZ,EAAJ,EAAQC,EAAR,CADoC,CAEpC;;;IACA,MAAM;MAAEP,KAAK,EAAEmB;IAAT,IAA+B9B,oBAArC;IACA,MAAM+B,WAAW,GAAGC,MAAM,CAACjD,KAAK,CAACW,OAAP,CAA1B;IACA,MAAM;MAAEiB,KAAK,EAAEsB;IAAT,IAAwB/C,YAA9B;IACA,IAAI+C,UAAU,KAAK,IAAnB,EACI;IACJ,IAAIC,UAAU,GAAG,CAAjB;IACA,IAAIC,sBAAsB,GAAG,IAA7B;IACA,MAAM;MAAExB,KAAK,EAAEyB;IAAT,IAAiCxB,sBAAvC;;IACA,KAAK,IAAIE,CAAC,GAAGgB,iBAAiB,CAACf,MAAlB,GAA2B,CAAxC,EAA2CD,CAAC,IAAI,CAAhD,EAAmD,EAAEA,CAArD,EAAwD;MACpD,MAAMS,GAAG,GAAG1C,SAAS,CAACiD,iBAAiB,CAAChB,CAAD,CAAlB,CAArB;;MACA,IAAIuB,IAAI,CAACC,KAAL,CAAWlD,UAAU,IACpB,CAAC,CAAC6B,EAAE,GAAGmB,mBAAmB,CAACb,GAAD,CAAzB,MAAoC,IAApC,IAA4CN,EAAE,KAAK,KAAK,CAAxD,GAA4D,KAAK,CAAjE,GAAqEA,EAAE,CAACT,KAAzE,KAAmF,CAD/D,CAAV,GAEXyB,UAFW,GAGXC,UAHA,IAGcH,WAHlB,EAG+B;QAC3BI,sBAAsB,GAAGZ,GAAzB;QACAW,UAAU,GAAG,CAAC,CAAChB,EAAE,GAAGkB,mBAAmB,CAACb,GAAD,CAAzB,MAAoC,IAApC,IAA4CL,EAAE,KAAK,KAAK,CAAxD,GAA4D,KAAK,CAAjE,GAAqEA,EAAE,CAACT,GAAzE,KAAiF,CAA9F;MACH,CAND,MAOK;QACD;MACH;IACJ;;IACDlB,yBAAyB,CAACoB,KAA1B,GAAkCwB,sBAAlC;EACH;;EACD,SAASI,qCAAT,GAAiD;IAC7C/C,kCAAkC,CAACmB,KAAnC,GAA2C,EAA3C;IACA,IAAI6B,sBAAsB,GAAGzD,KAAK,CAACa,OAAN,CAAc8B,IAAd,CAAoBpB,GAAD,IAASzB,SAAS,CAACyB,GAAD,CAAT,KAAmBf,yBAAyB,CAACoB,KAAzE,CAA7B;;IACA,OAAO6B,sBAAsB,IACzB,cAAcA,sBADX,IAEHA,sBAAsB,CAAC9B,QAAvB,CAAgCK,MAFpC,EAE4C;MACxC,MAAM0B,0BAA0B,GAAGD,sBAAsB,CAAC9B,QAAvB,CAAgC,CAAhC,CAAnC;MACAlB,kCAAkC,CAACmB,KAAnC,CAAyCiB,IAAzC,CAA8C/C,SAAS,CAAC4D,0BAAD,CAAvD;MACAD,sBAAsB,GAAGC,0BAAzB;IACH;EACJ;;EACD,SAASC,iBAAT,GAA6B;IACzB,MAAMC,MAAM,GAAG3D,gBAAgB,CAAC2B,KAAjB,GACT3B,gBAAgB,CAAC2B,KAAjB,CAAuBiC,gBAAvB,EADS,GAET,IAFN;IAGA,MAAMC,IAAI,GAAG7D,gBAAgB,CAAC2B,KAAjB,GACP3B,gBAAgB,CAAC2B,KAAjB,CAAuBmC,cAAvB,EADO,GAEP,IAFN;IAGA,OAAO;MACHH,MADG;MAEHE;IAFG,CAAP;EAIH;;EACD,SAASE,wBAAT,GAAoC;IAChC,MAAM;MAAEF;IAAF,IAAWH,iBAAiB,EAAlC;;IACA,IAAIG,IAAJ,EAAU;MACNA,IAAI,CAACG,SAAL,GAAiB,CAAjB;IACH;EACJ;;EACD,SAASC,uBAAT,GAAmC;IAC/B,IAAI9D,aAAa,CAACwB,KAAd,KAAwB,MAA5B,EAAoC;MAChCpC,mBAAmB,CAAC2E,eAAD,CAAnB;IACH;EACJ;;EACD,SAASC,qBAAT,CAA+BC,CAA/B,EAAkC;IAC9B,IAAInC,EAAJ;;IACA,CAACA,EAAE,GAAGlC,KAAK,CAACsE,QAAZ,MAA0B,IAA1B,IAAkCpC,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACqC,IAAH,CAAQvE,KAAR,EAAeqE,CAAf,CAA3D;;IACA,IAAIjE,aAAa,CAACwB,KAAd,KAAwB,MAA5B,EAAoC;MAChCpC,mBAAmB,CAAC2E,eAAD,CAAnB;IACH;EACJ;;EACD,SAASA,eAAT,GAA2B;IACvB;IACA;IACA;IACA,MAAM;MAAEP,MAAF;MAAUE;IAAV,IAAmBH,iBAAiB,EAA1C;IACA,IAAI,CAACG,IAAL,EACI;IACJ,MAAM;MAAElC,KAAK,EAAEsB;IAAT,IAAwB/C,YAA9B;IACA,IAAI+C,UAAU,KAAK,IAAnB,EACI;IACJ,MAAM;MAAEtB,KAAK,EAAE4C;IAAT,IAAwBpE,aAA9B;;IACA,IAAIJ,KAAK,CAACyE,SAAN,IAAmBzE,KAAK,CAAC0E,UAA7B,EAAyC;MACrC,IAAI,CAACd,MAAL,EACI,OAFiC,CAGrC;;MACA,IAAIY,UAAU,KAAK,MAAnB,EAA2B;QACvBnE,UAAU,GAAGuD,MAAM,CAACvD,UAApB;QACAyD,IAAI,CAACzD,UAAL,GAAkBA,UAAlB;MACH,CAHD,MAIK;QACDA,UAAU,GAAGyD,IAAI,CAACzD,UAAlB;QACAuD,MAAM,CAACvD,UAAP,GAAoBA,UAApB;MACH;IACJ,CAZD,MAaK;MACDA,UAAU,GAAGyD,IAAI,CAACzD,UAAlB;IACH;;IACD4B,2BAA2B;IAC3BQ,oCAAoC;IACpCK,4BAA4B;IAC5BU,qCAAqC;EACxC;;EACD,SAASmB,mBAAT,CAA6BxD,IAA7B,EAAmC;IAC/B,MAAM;MAAEyC;IAAF,IAAaD,iBAAiB,EAApC;IACA,IAAI,CAACC,MAAL,EACI;IACJA,MAAM,CAACvD,UAAP,GAAoBc,IAApB;IACAgD,eAAe;EAClB;;EACDzE,KAAK,CAACQ,oBAAD,EAAuB,MAAM;IAC9B8D,wBAAwB;EAC3B,CAFI,CAAL;EAGA,OAAO;IACHtD,eADG;IAEHQ,qBAFG;IAGHW,sBAHG;IAIHjB,mBAJG;IAKHK,oBALG;IAMHX,wBANG;IAOHC,iCAPG;IAQHC,yBARG;IASHC,kCATG;IAUH0D,eAVG;IAWHC,qBAXG;IAYHF,uBAZG;IAaHS;EAbG,CAAP;AAeH"},"metadata":{},"sourceType":"module"}