{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nfunction lowBit(n) {\n  return n & -n;\n}\n\nexport class FinweckTree {\n  /**\n   * @param l length of the array\n   * @param min min value of the array\n   */\n  constructor(l, min) {\n    this.l = l;\n    this.min = min;\n    const ft = new Array(l + 1);\n\n    for (let i = 0; i < l + 1; ++i) {\n      ft[i] = 0;\n    }\n\n    this.ft = ft;\n  }\n  /**\n   * Add arr[i] by n, start from 0\n   * @param i the index of the element to be added\n   * @param n the value to be added\n   */\n\n\n  add(i, n) {\n    if (n === 0) return;\n    const {\n      l,\n      ft\n    } = this;\n    i += 1;\n\n    while (i <= l) {\n      ft[i] += n;\n      i += lowBit(i);\n    }\n  }\n  /**\n   * Get the value of index i\n   * @param i index\n   * @returns value of the index\n   */\n\n\n  get(i) {\n    return this.sum(i + 1) - this.sum(i);\n  }\n  /**\n   * Get the sum of first i elements\n   * @param i count of head elements to be added\n   * @returns the sum of first i elements\n   */\n\n\n  sum(i) {\n    if (i === undefined) i = this.l;\n    if (i <= 0) return 0;\n    const {\n      ft,\n      min,\n      l\n    } = this;\n    if (i > l) throw new Error('[FinweckTree.sum]: `i` is larger than length.');\n    let ret = i * min;\n\n    while (i > 0) {\n      ret += ft[i];\n      i -= lowBit(i);\n    }\n\n    return ret;\n  }\n  /**\n   * Get the largest count of head elements whose sum are <= threshold\n   * @param threshold\n   * @returns the largest count of head elements whose sum are <= threshold\n   */\n\n\n  getBound(threshold) {\n    let l = 0;\n    let r = this.l;\n\n    while (r > l) {\n      const m = Math.floor((l + r) / 2);\n      const sumM = this.sum(m);\n\n      if (sumM > threshold) {\n        r = m;\n        continue;\n      } else if (sumM < threshold) {\n        if (l === m) {\n          if (this.sum(l + 1) <= threshold) return l + 1;\n          return m;\n        }\n\n        l = m;\n      } else {\n        return m;\n      }\n    }\n\n    return l;\n  }\n\n}","map":{"version":3,"names":["lowBit","n","FinweckTree","constructor","l","min","ft","Array","i","add","get","sum","undefined","Error","ret","getBound","threshold","r","m","Math","floor","sumM"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/vueuc/es/shared/finweck-tree.js"],"sourcesContent":["function lowBit(n) {\n    return n & -n;\n}\nexport class FinweckTree {\n    /**\n     * @param l length of the array\n     * @param min min value of the array\n     */\n    constructor(l, min) {\n        this.l = l;\n        this.min = min;\n        const ft = new Array(l + 1);\n        for (let i = 0; i < l + 1; ++i) {\n            ft[i] = 0;\n        }\n        this.ft = ft;\n    }\n    /**\n     * Add arr[i] by n, start from 0\n     * @param i the index of the element to be added\n     * @param n the value to be added\n     */\n    add(i, n) {\n        if (n === 0)\n            return;\n        const { l, ft } = this;\n        i += 1;\n        while (i <= l) {\n            ft[i] += n;\n            i += lowBit(i);\n        }\n    }\n    /**\n     * Get the value of index i\n     * @param i index\n     * @returns value of the index\n     */\n    get(i) {\n        return this.sum(i + 1) - this.sum(i);\n    }\n    /**\n     * Get the sum of first i elements\n     * @param i count of head elements to be added\n     * @returns the sum of first i elements\n     */\n    sum(i) {\n        if (i === undefined)\n            i = this.l;\n        if (i <= 0)\n            return 0;\n        const { ft, min, l } = this;\n        if (i > l)\n            throw new Error('[FinweckTree.sum]: `i` is larger than length.');\n        let ret = i * min;\n        while (i > 0) {\n            ret += ft[i];\n            i -= lowBit(i);\n        }\n        return ret;\n    }\n    /**\n     * Get the largest count of head elements whose sum are <= threshold\n     * @param threshold\n     * @returns the largest count of head elements whose sum are <= threshold\n     */\n    getBound(threshold) {\n        let l = 0;\n        let r = this.l;\n        while (r > l) {\n            const m = Math.floor((l + r) / 2);\n            const sumM = this.sum(m);\n            if (sumM > threshold) {\n                r = m;\n                continue;\n            }\n            else if (sumM < threshold) {\n                if (l === m) {\n                    if (this.sum(l + 1) <= threshold)\n                        return l + 1;\n                    return m;\n                }\n                l = m;\n            }\n            else {\n                return m;\n            }\n        }\n        return l;\n    }\n}\n"],"mappings":";;AAAA,SAASA,MAAT,CAAgBC,CAAhB,EAAmB;EACf,OAAOA,CAAC,GAAG,CAACA,CAAZ;AACH;;AACD,OAAO,MAAMC,WAAN,CAAkB;EACrB;AACJ;AACA;AACA;EACIC,WAAW,CAACC,CAAD,EAAIC,GAAJ,EAAS;IAChB,KAAKD,CAAL,GAASA,CAAT;IACA,KAAKC,GAAL,GAAWA,GAAX;IACA,MAAMC,EAAE,GAAG,IAAIC,KAAJ,CAAUH,CAAC,GAAG,CAAd,CAAX;;IACA,KAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,CAAC,GAAG,CAAxB,EAA2B,EAAEI,CAA7B,EAAgC;MAC5BF,EAAE,CAACE,CAAD,CAAF,GAAQ,CAAR;IACH;;IACD,KAAKF,EAAL,GAAUA,EAAV;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIG,GAAG,CAACD,CAAD,EAAIP,CAAJ,EAAO;IACN,IAAIA,CAAC,KAAK,CAAV,EACI;IACJ,MAAM;MAAEG,CAAF;MAAKE;IAAL,IAAY,IAAlB;IACAE,CAAC,IAAI,CAAL;;IACA,OAAOA,CAAC,IAAIJ,CAAZ,EAAe;MACXE,EAAE,CAACE,CAAD,CAAF,IAASP,CAAT;MACAO,CAAC,IAAIR,MAAM,CAACQ,CAAD,CAAX;IACH;EACJ;EACD;AACJ;AACA;AACA;AACA;;;EACIE,GAAG,CAACF,CAAD,EAAI;IACH,OAAO,KAAKG,GAAL,CAASH,CAAC,GAAG,CAAb,IAAkB,KAAKG,GAAL,CAASH,CAAT,CAAzB;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIG,GAAG,CAACH,CAAD,EAAI;IACH,IAAIA,CAAC,KAAKI,SAAV,EACIJ,CAAC,GAAG,KAAKJ,CAAT;IACJ,IAAII,CAAC,IAAI,CAAT,EACI,OAAO,CAAP;IACJ,MAAM;MAAEF,EAAF;MAAMD,GAAN;MAAWD;IAAX,IAAiB,IAAvB;IACA,IAAII,CAAC,GAAGJ,CAAR,EACI,MAAM,IAAIS,KAAJ,CAAU,+CAAV,CAAN;IACJ,IAAIC,GAAG,GAAGN,CAAC,GAAGH,GAAd;;IACA,OAAOG,CAAC,GAAG,CAAX,EAAc;MACVM,GAAG,IAAIR,EAAE,CAACE,CAAD,CAAT;MACAA,CAAC,IAAIR,MAAM,CAACQ,CAAD,CAAX;IACH;;IACD,OAAOM,GAAP;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIC,QAAQ,CAACC,SAAD,EAAY;IAChB,IAAIZ,CAAC,GAAG,CAAR;IACA,IAAIa,CAAC,GAAG,KAAKb,CAAb;;IACA,OAAOa,CAAC,GAAGb,CAAX,EAAc;MACV,MAAMc,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAW,CAAChB,CAAC,GAAGa,CAAL,IAAU,CAArB,CAAV;MACA,MAAMI,IAAI,GAAG,KAAKV,GAAL,CAASO,CAAT,CAAb;;MACA,IAAIG,IAAI,GAAGL,SAAX,EAAsB;QAClBC,CAAC,GAAGC,CAAJ;QACA;MACH,CAHD,MAIK,IAAIG,IAAI,GAAGL,SAAX,EAAsB;QACvB,IAAIZ,CAAC,KAAKc,CAAV,EAAa;UACT,IAAI,KAAKP,GAAL,CAASP,CAAC,GAAG,CAAb,KAAmBY,SAAvB,EACI,OAAOZ,CAAC,GAAG,CAAX;UACJ,OAAOc,CAAP;QACH;;QACDd,CAAC,GAAGc,CAAJ;MACH,CAPI,MAQA;QACD,OAAOA,CAAP;MACH;IACJ;;IACD,OAAOd,CAAP;EACH;;AArFoB"},"metadata":{},"sourceType":"module"}