{"ast":null,"code":"import { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst mousePositionRef = ref(null);\n\nfunction clickHandler(e) {\n  if (e.clientX > 0 || e.clientY > 0) {\n    mousePositionRef.value = {\n      x: e.clientX,\n      y: e.clientY\n    };\n  } else {\n    // x = 0 & y = 0\n    const {\n      target\n    } = e;\n\n    if (target instanceof Element) {\n      const {\n        left,\n        top,\n        width,\n        height\n      } = target.getBoundingClientRect();\n\n      if (left > 0 || top > 0) {\n        // impossible to be triggered by real click\n        mousePositionRef.value = {\n          x: left + width / 2,\n          y: top + height / 2\n        };\n      } else {\n        mousePositionRef.value = {\n          x: 0,\n          y: 0\n        };\n      }\n    } else {\n      mousePositionRef.value = null;\n    }\n  }\n}\n\nlet usedCount = 0;\nlet managable = true;\nexport default function useClickPosition() {\n  if (!isBrowser) return readonly(ref(null));\n  if (usedCount === 0) on('click', document, clickHandler, true);\n\n  const setup = () => {\n    usedCount += 1;\n  };\n\n  if (managable && (managable = hasInstance())) {\n    onBeforeMount(setup);\n    onBeforeUnmount(() => {\n      usedCount -= 1;\n      if (usedCount === 0) off('click', document, clickHandler, true);\n    });\n  } else {\n    setup();\n  }\n\n  return readonly(mousePositionRef);\n}","map":{"version":3,"names":["ref","readonly","onBeforeMount","onBeforeUnmount","on","off","hasInstance","isBrowser","mousePositionRef","clickHandler","e","clientX","clientY","value","x","y","target","Element","left","top","width","height","getBoundingClientRect","usedCount","managable","useClickPosition","document","setup"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/vooks/es/use-click-position.js"],"sourcesContent":["import { ref, readonly, onBeforeMount, onBeforeUnmount } from 'vue';\nimport { on, off } from 'evtd';\nimport { hasInstance, isBrowser } from './utils';\nconst mousePositionRef = ref(null);\nfunction clickHandler(e) {\n    if (e.clientX > 0 || e.clientY > 0) {\n        mousePositionRef.value = {\n            x: e.clientX,\n            y: e.clientY\n        };\n    }\n    else {\n        // x = 0 & y = 0\n        const { target } = e;\n        if (target instanceof Element) {\n            const { left, top, width, height } = target.getBoundingClientRect();\n            if (left > 0 || top > 0) {\n                // impossible to be triggered by real click\n                mousePositionRef.value = {\n                    x: left + width / 2,\n                    y: top + height / 2\n                };\n            }\n            else {\n                mousePositionRef.value = { x: 0, y: 0 };\n            }\n        }\n        else {\n            mousePositionRef.value = null;\n        }\n    }\n}\nlet usedCount = 0;\nlet managable = true;\nexport default function useClickPosition() {\n    if (!isBrowser)\n        return readonly(ref(null));\n    if (usedCount === 0)\n        on('click', document, clickHandler, true);\n    const setup = () => {\n        usedCount += 1;\n    };\n    if (managable && (managable = hasInstance())) {\n        onBeforeMount(setup);\n        onBeforeUnmount(() => {\n            usedCount -= 1;\n            if (usedCount === 0)\n                off('click', document, clickHandler, true);\n        });\n    }\n    else {\n        setup();\n    }\n    return readonly(mousePositionRef);\n}\n"],"mappings":"AAAA,SAASA,GAAT,EAAcC,QAAd,EAAwBC,aAAxB,EAAuCC,eAAvC,QAA8D,KAA9D;AACA,SAASC,EAAT,EAAaC,GAAb,QAAwB,MAAxB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,SAAvC;AACA,MAAMC,gBAAgB,GAAGR,GAAG,CAAC,IAAD,CAA5B;;AACA,SAASS,YAAT,CAAsBC,CAAtB,EAAyB;EACrB,IAAIA,CAAC,CAACC,OAAF,GAAY,CAAZ,IAAiBD,CAAC,CAACE,OAAF,GAAY,CAAjC,EAAoC;IAChCJ,gBAAgB,CAACK,KAAjB,GAAyB;MACrBC,CAAC,EAAEJ,CAAC,CAACC,OADgB;MAErBI,CAAC,EAAEL,CAAC,CAACE;IAFgB,CAAzB;EAIH,CALD,MAMK;IACD;IACA,MAAM;MAAEI;IAAF,IAAaN,CAAnB;;IACA,IAAIM,MAAM,YAAYC,OAAtB,EAA+B;MAC3B,MAAM;QAAEC,IAAF;QAAQC,GAAR;QAAaC,KAAb;QAAoBC;MAApB,IAA+BL,MAAM,CAACM,qBAAP,EAArC;;MACA,IAAIJ,IAAI,GAAG,CAAP,IAAYC,GAAG,GAAG,CAAtB,EAAyB;QACrB;QACAX,gBAAgB,CAACK,KAAjB,GAAyB;UACrBC,CAAC,EAAEI,IAAI,GAAGE,KAAK,GAAG,CADG;UAErBL,CAAC,EAAEI,GAAG,GAAGE,MAAM,GAAG;QAFG,CAAzB;MAIH,CAND,MAOK;QACDb,gBAAgB,CAACK,KAAjB,GAAyB;UAAEC,CAAC,EAAE,CAAL;UAAQC,CAAC,EAAE;QAAX,CAAzB;MACH;IACJ,CAZD,MAaK;MACDP,gBAAgB,CAACK,KAAjB,GAAyB,IAAzB;IACH;EACJ;AACJ;;AACD,IAAIU,SAAS,GAAG,CAAhB;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,eAAe,SAASC,gBAAT,GAA4B;EACvC,IAAI,CAAClB,SAAL,EACI,OAAON,QAAQ,CAACD,GAAG,CAAC,IAAD,CAAJ,CAAf;EACJ,IAAIuB,SAAS,KAAK,CAAlB,EACInB,EAAE,CAAC,OAAD,EAAUsB,QAAV,EAAoBjB,YAApB,EAAkC,IAAlC,CAAF;;EACJ,MAAMkB,KAAK,GAAG,MAAM;IAChBJ,SAAS,IAAI,CAAb;EACH,CAFD;;EAGA,IAAIC,SAAS,KAAKA,SAAS,GAAGlB,WAAW,EAA5B,CAAb,EAA8C;IAC1CJ,aAAa,CAACyB,KAAD,CAAb;IACAxB,eAAe,CAAC,MAAM;MAClBoB,SAAS,IAAI,CAAb;MACA,IAAIA,SAAS,KAAK,CAAlB,EACIlB,GAAG,CAAC,OAAD,EAAUqB,QAAV,EAAoBjB,YAApB,EAAkC,IAAlC,CAAH;IACP,CAJc,CAAf;EAKH,CAPD,MAQK;IACDkB,KAAK;EACR;;EACD,OAAO1B,QAAQ,CAACO,gBAAD,CAAf;AACH"},"metadata":{},"sourceType":"module"}