{"ast":null,"code":"import { ref, inject } from 'vue';\nimport { useMessage } from 'naive-ui';\nimport QueryString from 'qs';\nimport axios from 'axios'; // 加载业主信息\n\nexport default (() => {\n  // 获取消息对象\n  const message = useMessage(); // 获取全局变量\n\n  const global = inject(\"global\"); // 业主加载\n\n  const ownerLoading = ref(false); // 当前页码\n\n  const ownerPageNo = ref(1); // 总页数\n\n  const ownerPages = ref(1); // 业主数据\n\n  const ownerData = ref([]);\n  /**\r\n   * 加载业主信息\r\n   * @param {页码} page \r\n   */\n\n  const loadOwnerInfo = page => {\n    ownerLoading.value = true;\n    const params = {\n      page,\n      size: global.pageSize\n    };\n    axios({\n      method: 'get',\n      url: global.api + '/getAllOwner',\n      params\n    }).then(res => {\n      // 设置业主数据\n      ownerData.value = res.data.list; // 设置当前页码\n\n      ownerPageNo.value = res.data.pageNum; // 设置总页数\n\n      ownerPages.value = res.data.pages;\n    }).catch(err => {\n      message.error(\"业主列表加载异常！\" + err);\n    }).finally(() => {\n      ownerLoading.value = false;\n    });\n  };\n  /**\r\n   * 页码发生改变时触发\r\n   * @param {页码} page \r\n   */\n\n\n  const ownerPageUpdate = page => {\n    loadOwnerInfo(page); // 加载数据\n  };\n\n  return {\n    ownerPageNo,\n    // 业主数据页码\n    ownerPages,\n    // 业主数据总页数\n    ownerData,\n    // 业主数据\n    ownerLoading,\n    // 业主加载\n    loadOwnerInfo,\n    // 加载业主信息\n    ownerPageUpdate // 页码改变时事件\n\n  };\n});","map":{"version":3,"names":["ref","inject","useMessage","QueryString","axios","message","global","ownerLoading","ownerPageNo","ownerPages","ownerData","loadOwnerInfo","page","value","params","size","pageSize","method","url","api","then","res","data","list","pageNum","pages","catch","err","error","finally","ownerPageUpdate"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/src/hook/real_estate/ownerInformation/loadOwnerHook.js"],"sourcesContent":["import { ref, inject } from 'vue'\r\nimport { useMessage } from 'naive-ui'\r\nimport QueryString from 'qs'\r\nimport axios from 'axios'\r\n\r\n// 加载业主信息\r\nexport default () => {\r\n    // 获取消息对象\r\n    const message = useMessage();\r\n\r\n    // 获取全局变量\r\n    const global = inject(\"global\")\r\n    // 业主加载\r\n    const ownerLoading = ref(false);\r\n\r\n    // 当前页码\r\n    const ownerPageNo = ref(1);\r\n    // 总页数\r\n    const ownerPages = ref(1);\r\n    // 业主数据\r\n    const ownerData = ref([])\r\n\r\n    /**\r\n     * 加载业主信息\r\n     * @param {页码} page \r\n     */\r\n    const loadOwnerInfo = (page) => {\r\n        ownerLoading.value = true\r\n        const params = {\r\n            page,\r\n            size: global.pageSize\r\n        }\r\n        axios({\r\n            method: 'get',\r\n            url: global.api + '/getAllOwner',\r\n            params\r\n        }).then(res => {\r\n            // 设置业主数据\r\n            ownerData.value = res.data.list\r\n            // 设置当前页码\r\n            ownerPageNo.value = res.data.pageNum\r\n            // 设置总页数\r\n            ownerPages.value = res.data.pages\r\n        }).catch(err => {\r\n            message.error(\"业主列表加载异常！\" + err);\r\n        }).finally(() => {\r\n            ownerLoading.value = false\r\n        })\r\n    }\r\n    \r\n    /**\r\n     * 页码发生改变时触发\r\n     * @param {页码} page \r\n     */\r\n    const ownerPageUpdate = (page) => {\r\n        loadOwnerInfo(page) // 加载数据\r\n    }\r\n\r\n    return {\r\n        ownerPageNo, // 业主数据页码\r\n        ownerPages, // 业主数据总页数\r\n        ownerData, // 业主数据\r\n        ownerLoading, // 业主加载\r\n        loadOwnerInfo, // 加载业主信息\r\n        ownerPageUpdate, // 页码改变时事件\r\n    }\r\n}"],"mappings":"AAAA,SAASA,GAAT,EAAcC,MAAd,QAA4B,KAA5B;AACA,SAASC,UAAT,QAA2B,UAA3B;AACA,OAAOC,WAAP,MAAwB,IAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,gBAAe,MAAM;EACjB;EACA,MAAMC,OAAO,GAAGH,UAAU,EAA1B,CAFiB,CAIjB;;EACA,MAAMI,MAAM,GAAGL,MAAM,CAAC,QAAD,CAArB,CALiB,CAMjB;;EACA,MAAMM,YAAY,GAAGP,GAAG,CAAC,KAAD,CAAxB,CAPiB,CASjB;;EACA,MAAMQ,WAAW,GAAGR,GAAG,CAAC,CAAD,CAAvB,CAViB,CAWjB;;EACA,MAAMS,UAAU,GAAGT,GAAG,CAAC,CAAD,CAAtB,CAZiB,CAajB;;EACA,MAAMU,SAAS,GAAGV,GAAG,CAAC,EAAD,CAArB;EAEA;AACJ;AACA;AACA;;EACI,MAAMW,aAAa,GAAIC,IAAD,IAAU;IAC5BL,YAAY,CAACM,KAAb,GAAqB,IAArB;IACA,MAAMC,MAAM,GAAG;MACXF,IADW;MAEXG,IAAI,EAAET,MAAM,CAACU;IAFF,CAAf;IAIAZ,KAAK,CAAC;MACFa,MAAM,EAAE,KADN;MAEFC,GAAG,EAAEZ,MAAM,CAACa,GAAP,GAAa,cAFhB;MAGFL;IAHE,CAAD,CAAL,CAIGM,IAJH,CAIQC,GAAG,IAAI;MACX;MACAX,SAAS,CAACG,KAAV,GAAkBQ,GAAG,CAACC,IAAJ,CAASC,IAA3B,CAFW,CAGX;;MACAf,WAAW,CAACK,KAAZ,GAAoBQ,GAAG,CAACC,IAAJ,CAASE,OAA7B,CAJW,CAKX;;MACAf,UAAU,CAACI,KAAX,GAAmBQ,GAAG,CAACC,IAAJ,CAASG,KAA5B;IACH,CAXD,EAWGC,KAXH,CAWSC,GAAG,IAAI;MACZtB,OAAO,CAACuB,KAAR,CAAc,cAAcD,GAA5B;IACH,CAbD,EAaGE,OAbH,CAaW,MAAM;MACbtB,YAAY,CAACM,KAAb,GAAqB,KAArB;IACH,CAfD;EAgBH,CAtBD;EAwBA;AACJ;AACA;AACA;;;EACI,MAAMiB,eAAe,GAAIlB,IAAD,IAAU;IAC9BD,aAAa,CAACC,IAAD,CAAb,CAD8B,CACV;EACvB,CAFD;;EAIA,OAAO;IACHJ,WADG;IACU;IACbC,UAFG;IAES;IACZC,SAHG;IAGQ;IACXH,YAJG;IAIW;IACdI,aALG;IAKY;IACfmB,eANG,CAMc;;EANd,CAAP;AAQH,CA5DD"},"metadata":{},"sourceType":"module"}