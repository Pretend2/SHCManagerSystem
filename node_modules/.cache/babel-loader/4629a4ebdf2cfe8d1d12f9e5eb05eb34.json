{"ast":null,"code":"import { nextTick, Transition, h, defineComponent, ref, onMounted, inject } from 'vue';\nimport { keep } from '../../_utils';\nimport { notificationProviderInjectionKey } from './context';\nimport { Notification, notificationProps, notificationPropKeys } from './Notification';\nexport const notificationEnvOptions = Object.assign(Object.assign({}, notificationProps), {\n  duration: Number,\n  onClose: Function,\n  onLeave: Function,\n  onAfterEnter: Function,\n  onAfterLeave: Function,\n\n  /** @deprecated */\n  onHide: Function,\n\n  /** @deprecated */\n  onAfterShow: Function,\n\n  /** @deprecated */\n  onAfterHide: Function\n});\nexport const NotificationEnvironment = defineComponent({\n  name: 'NotificationEnvironment',\n  props: Object.assign(Object.assign({}, notificationEnvOptions), {\n    // private\n    internalKey: {\n      type: String,\n      required: true\n    },\n    onInternalAfterLeave: {\n      type: Function,\n      required: true\n    }\n  }),\n\n  setup(props) {\n    const {\n      wipTransitionCountRef // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    } = inject(notificationProviderInjectionKey);\n    const showRef = ref(true);\n    let timerId = null;\n\n    function hide() {\n      showRef.value = false;\n\n      if (timerId) {\n        window.clearTimeout(timerId);\n      }\n    }\n\n    function handleBeforeEnter(el) {\n      wipTransitionCountRef.value++;\n      void nextTick(() => {\n        el.style.height = `${el.offsetHeight}px`;\n        el.style.maxHeight = '0';\n        el.style.transition = 'none';\n        void el.offsetHeight;\n        el.style.transition = '';\n        el.style.maxHeight = el.style.height;\n      });\n    }\n\n    function handleAfterEnter(el) {\n      wipTransitionCountRef.value--;\n      el.style.height = '';\n      el.style.maxHeight = '';\n      const {\n        onAfterEnter,\n        onAfterShow\n      } = props;\n      if (onAfterEnter) onAfterEnter(); // deprecated\n\n      if (onAfterShow) onAfterShow();\n    }\n\n    function handleBeforeLeave(el) {\n      wipTransitionCountRef.value++;\n      el.style.maxHeight = `${el.offsetHeight}px`;\n      el.style.height = `${el.offsetHeight}px`;\n      void el.offsetHeight;\n    }\n\n    function handleLeave(el) {\n      const {\n        onHide\n      } = props;\n      if (onHide) onHide();\n      el.style.maxHeight = '0';\n      void el.offsetHeight;\n    }\n\n    function handleAfterLeave() {\n      wipTransitionCountRef.value--;\n      const {\n        onAfterLeave,\n        onInternalAfterLeave,\n        onAfterHide,\n        internalKey\n      } = props;\n      if (onAfterLeave) onAfterLeave();\n      onInternalAfterLeave(internalKey); // deprecated\n\n      if (onAfterHide) onAfterHide();\n    }\n\n    function setHideTimeout() {\n      const {\n        duration\n      } = props;\n\n      if (duration) {\n        timerId = window.setTimeout(hide, duration);\n      }\n    }\n\n    function handleMouseenter(e) {\n      if (e.currentTarget !== e.target) return;\n\n      if (timerId !== null) {\n        window.clearTimeout(timerId);\n        timerId = null;\n      }\n    }\n\n    function handleMouseleave(e) {\n      if (e.currentTarget !== e.target) return;\n      setHideTimeout();\n    }\n\n    function handleClose() {\n      const {\n        onClose\n      } = props;\n\n      if (onClose) {\n        void Promise.resolve(onClose()).then(feedback => {\n          if (feedback === false) return;\n          hide();\n        });\n      } else {\n        hide();\n      }\n    }\n\n    onMounted(() => {\n      if (props.duration) {\n        timerId = window.setTimeout(hide, props.duration);\n      }\n    });\n    return {\n      show: showRef,\n      hide,\n      handleClose,\n      handleAfterLeave,\n      handleLeave,\n      handleBeforeLeave,\n      handleAfterEnter,\n      handleBeforeEnter,\n      handleMouseenter,\n      handleMouseleave\n    };\n  },\n\n  render() {\n    return h(Transition, {\n      name: \"notification-transition\",\n      appear: true,\n      // convert to any since Element is not compitable with HTMLElement\n      onBeforeEnter: this.handleBeforeEnter,\n      onAfterEnter: this.handleAfterEnter,\n      onBeforeLeave: this.handleBeforeLeave,\n      onLeave: this.handleLeave,\n      onAfterLeave: this.handleAfterLeave\n    }, {\n      default: () => {\n        return this.show ? h(Notification, Object.assign({}, keep(this.$props, notificationPropKeys), {\n          onClose: this.handleClose,\n          onMouseenter: this.duration && this.keepAliveOnHover ? this.handleMouseenter : undefined,\n          onMouseleave: this.duration && this.keepAliveOnHover ? this.handleMouseleave : undefined\n        })) : null;\n      }\n    });\n  }\n\n});","map":{"version":3,"names":["nextTick","Transition","h","defineComponent","ref","onMounted","inject","keep","notificationProviderInjectionKey","Notification","notificationProps","notificationPropKeys","notificationEnvOptions","Object","assign","duration","Number","onClose","Function","onLeave","onAfterEnter","onAfterLeave","onHide","onAfterShow","onAfterHide","NotificationEnvironment","name","props","internalKey","type","String","required","onInternalAfterLeave","setup","wipTransitionCountRef","showRef","timerId","hide","value","window","clearTimeout","handleBeforeEnter","el","style","height","offsetHeight","maxHeight","transition","handleAfterEnter","handleBeforeLeave","handleLeave","handleAfterLeave","setHideTimeout","setTimeout","handleMouseenter","e","currentTarget","target","handleMouseleave","handleClose","Promise","resolve","then","feedback","show","render","appear","onBeforeEnter","onBeforeLeave","default","$props","onMouseenter","keepAliveOnHover","undefined","onMouseleave"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/notification/src/NotificationEnvironment.js"],"sourcesContent":["import { nextTick, Transition, h, defineComponent, ref, onMounted, inject } from 'vue';\nimport { keep } from '../../_utils';\nimport { notificationProviderInjectionKey } from './context';\nimport { Notification, notificationProps, notificationPropKeys } from './Notification';\nexport const notificationEnvOptions = Object.assign(Object.assign({}, notificationProps), { duration: Number, onClose: Function, onLeave: Function, onAfterEnter: Function, onAfterLeave: Function, \n    /** @deprecated */\n    onHide: Function, \n    /** @deprecated */\n    onAfterShow: Function, \n    /** @deprecated */\n    onAfterHide: Function });\nexport const NotificationEnvironment = defineComponent({\n    name: 'NotificationEnvironment',\n    props: Object.assign(Object.assign({}, notificationEnvOptions), { \n        // private\n        internalKey: {\n            type: String,\n            required: true\n        }, onInternalAfterLeave: {\n            type: Function,\n            required: true\n        } }),\n    setup(props) {\n        const { wipTransitionCountRef\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n         } = inject(notificationProviderInjectionKey);\n        const showRef = ref(true);\n        let timerId = null;\n        function hide() {\n            showRef.value = false;\n            if (timerId) {\n                window.clearTimeout(timerId);\n            }\n        }\n        function handleBeforeEnter(el) {\n            wipTransitionCountRef.value++;\n            void nextTick(() => {\n                el.style.height = `${el.offsetHeight}px`;\n                el.style.maxHeight = '0';\n                el.style.transition = 'none';\n                void el.offsetHeight;\n                el.style.transition = '';\n                el.style.maxHeight = el.style.height;\n            });\n        }\n        function handleAfterEnter(el) {\n            wipTransitionCountRef.value--;\n            el.style.height = '';\n            el.style.maxHeight = '';\n            const { onAfterEnter, onAfterShow } = props;\n            if (onAfterEnter)\n                onAfterEnter();\n            // deprecated\n            if (onAfterShow)\n                onAfterShow();\n        }\n        function handleBeforeLeave(el) {\n            wipTransitionCountRef.value++;\n            el.style.maxHeight = `${el.offsetHeight}px`;\n            el.style.height = `${el.offsetHeight}px`;\n            void el.offsetHeight;\n        }\n        function handleLeave(el) {\n            const { onHide } = props;\n            if (onHide)\n                onHide();\n            el.style.maxHeight = '0';\n            void el.offsetHeight;\n        }\n        function handleAfterLeave() {\n            wipTransitionCountRef.value--;\n            const { onAfterLeave, onInternalAfterLeave, onAfterHide, internalKey } = props;\n            if (onAfterLeave)\n                onAfterLeave();\n            onInternalAfterLeave(internalKey);\n            // deprecated\n            if (onAfterHide)\n                onAfterHide();\n        }\n        function setHideTimeout() {\n            const { duration } = props;\n            if (duration) {\n                timerId = window.setTimeout(hide, duration);\n            }\n        }\n        function handleMouseenter(e) {\n            if (e.currentTarget !== e.target)\n                return;\n            if (timerId !== null) {\n                window.clearTimeout(timerId);\n                timerId = null;\n            }\n        }\n        function handleMouseleave(e) {\n            if (e.currentTarget !== e.target)\n                return;\n            setHideTimeout();\n        }\n        function handleClose() {\n            const { onClose } = props;\n            if (onClose) {\n                void Promise.resolve(onClose()).then((feedback) => {\n                    if (feedback === false)\n                        return;\n                    hide();\n                });\n            }\n            else {\n                hide();\n            }\n        }\n        onMounted(() => {\n            if (props.duration) {\n                timerId = window.setTimeout(hide, props.duration);\n            }\n        });\n        return {\n            show: showRef,\n            hide,\n            handleClose,\n            handleAfterLeave,\n            handleLeave,\n            handleBeforeLeave,\n            handleAfterEnter,\n            handleBeforeEnter,\n            handleMouseenter,\n            handleMouseleave\n        };\n    },\n    render() {\n        return (h(Transition, { name: \"notification-transition\", appear: true, \n            // convert to any since Element is not compitable with HTMLElement\n            onBeforeEnter: this.handleBeforeEnter, onAfterEnter: this.handleAfterEnter, onBeforeLeave: this.handleBeforeLeave, onLeave: this.handleLeave, onAfterLeave: this.handleAfterLeave }, {\n            default: () => {\n                return this.show ? (h(Notification, Object.assign({}, keep(this.$props, notificationPropKeys), { onClose: this.handleClose, onMouseenter: this.duration && this.keepAliveOnHover\n                        ? this.handleMouseenter\n                        : undefined, onMouseleave: this.duration && this.keepAliveOnHover\n                        ? this.handleMouseleave\n                        : undefined }))) : null;\n            }\n        }));\n    }\n});\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,eAAlC,EAAmDC,GAAnD,EAAwDC,SAAxD,EAAmEC,MAAnE,QAAiF,KAAjF;AACA,SAASC,IAAT,QAAqB,cAArB;AACA,SAASC,gCAAT,QAAiD,WAAjD;AACA,SAASC,YAAT,EAAuBC,iBAAvB,EAA0CC,oBAA1C,QAAsE,gBAAtE;AACA,OAAO,MAAMC,sBAAsB,GAAGC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,iBAAlB,CAAd,EAAoD;EAAEK,QAAQ,EAAEC,MAAZ;EAAoBC,OAAO,EAAEC,QAA7B;EAAuCC,OAAO,EAAED,QAAhD;EAA0DE,YAAY,EAAEF,QAAxE;EAAkFG,YAAY,EAAEH,QAAhG;;EACtF;EACAI,MAAM,EAAEJ,QAF8E;;EAGtF;EACAK,WAAW,EAAEL,QAJyE;;EAKtF;EACAM,WAAW,EAAEN;AANyE,CAApD,CAA/B;AAOP,OAAO,MAAMO,uBAAuB,GAAGtB,eAAe,CAAC;EACnDuB,IAAI,EAAE,yBAD6C;EAEnDC,KAAK,EAAEd,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,sBAAlB,CAAd,EAAyD;IAC5D;IACAgB,WAAW,EAAE;MACTC,IAAI,EAAEC,MADG;MAETC,QAAQ,EAAE;IAFD,CAF+C;IAKzDC,oBAAoB,EAAE;MACrBH,IAAI,EAAEX,QADe;MAErBa,QAAQ,EAAE;IAFW;EALmC,CAAzD,CAF4C;;EAWnDE,KAAK,CAACN,KAAD,EAAQ;IACT,MAAM;MAAEO,qBAAF,CACN;;IADM,IAED5B,MAAM,CAACE,gCAAD,CAFX;IAGA,MAAM2B,OAAO,GAAG/B,GAAG,CAAC,IAAD,CAAnB;IACA,IAAIgC,OAAO,GAAG,IAAd;;IACA,SAASC,IAAT,GAAgB;MACZF,OAAO,CAACG,KAAR,GAAgB,KAAhB;;MACA,IAAIF,OAAJ,EAAa;QACTG,MAAM,CAACC,YAAP,CAAoBJ,OAApB;MACH;IACJ;;IACD,SAASK,iBAAT,CAA2BC,EAA3B,EAA+B;MAC3BR,qBAAqB,CAACI,KAAtB;MACA,KAAKtC,QAAQ,CAAC,MAAM;QAChB0C,EAAE,CAACC,KAAH,CAASC,MAAT,GAAmB,GAAEF,EAAE,CAACG,YAAa,IAArC;QACAH,EAAE,CAACC,KAAH,CAASG,SAAT,GAAqB,GAArB;QACAJ,EAAE,CAACC,KAAH,CAASI,UAAT,GAAsB,MAAtB;QACA,KAAKL,EAAE,CAACG,YAAR;QACAH,EAAE,CAACC,KAAH,CAASI,UAAT,GAAsB,EAAtB;QACAL,EAAE,CAACC,KAAH,CAASG,SAAT,GAAqBJ,EAAE,CAACC,KAAH,CAASC,MAA9B;MACH,CAPY,CAAb;IAQH;;IACD,SAASI,gBAAT,CAA0BN,EAA1B,EAA8B;MAC1BR,qBAAqB,CAACI,KAAtB;MACAI,EAAE,CAACC,KAAH,CAASC,MAAT,GAAkB,EAAlB;MACAF,EAAE,CAACC,KAAH,CAASG,SAAT,GAAqB,EAArB;MACA,MAAM;QAAE1B,YAAF;QAAgBG;MAAhB,IAAgCI,KAAtC;MACA,IAAIP,YAAJ,EACIA,YAAY,GANU,CAO1B;;MACA,IAAIG,WAAJ,EACIA,WAAW;IAClB;;IACD,SAAS0B,iBAAT,CAA2BP,EAA3B,EAA+B;MAC3BR,qBAAqB,CAACI,KAAtB;MACAI,EAAE,CAACC,KAAH,CAASG,SAAT,GAAsB,GAAEJ,EAAE,CAACG,YAAa,IAAxC;MACAH,EAAE,CAACC,KAAH,CAASC,MAAT,GAAmB,GAAEF,EAAE,CAACG,YAAa,IAArC;MACA,KAAKH,EAAE,CAACG,YAAR;IACH;;IACD,SAASK,WAAT,CAAqBR,EAArB,EAAyB;MACrB,MAAM;QAAEpB;MAAF,IAAaK,KAAnB;MACA,IAAIL,MAAJ,EACIA,MAAM;MACVoB,EAAE,CAACC,KAAH,CAASG,SAAT,GAAqB,GAArB;MACA,KAAKJ,EAAE,CAACG,YAAR;IACH;;IACD,SAASM,gBAAT,GAA4B;MACxBjB,qBAAqB,CAACI,KAAtB;MACA,MAAM;QAAEjB,YAAF;QAAgBW,oBAAhB;QAAsCR,WAAtC;QAAmDI;MAAnD,IAAmED,KAAzE;MACA,IAAIN,YAAJ,EACIA,YAAY;MAChBW,oBAAoB,CAACJ,WAAD,CAApB,CALwB,CAMxB;;MACA,IAAIJ,WAAJ,EACIA,WAAW;IAClB;;IACD,SAAS4B,cAAT,GAA0B;MACtB,MAAM;QAAErC;MAAF,IAAeY,KAArB;;MACA,IAAIZ,QAAJ,EAAc;QACVqB,OAAO,GAAGG,MAAM,CAACc,UAAP,CAAkBhB,IAAlB,EAAwBtB,QAAxB,CAAV;MACH;IACJ;;IACD,SAASuC,gBAAT,CAA0BC,CAA1B,EAA6B;MACzB,IAAIA,CAAC,CAACC,aAAF,KAAoBD,CAAC,CAACE,MAA1B,EACI;;MACJ,IAAIrB,OAAO,KAAK,IAAhB,EAAsB;QAClBG,MAAM,CAACC,YAAP,CAAoBJ,OAApB;QACAA,OAAO,GAAG,IAAV;MACH;IACJ;;IACD,SAASsB,gBAAT,CAA0BH,CAA1B,EAA6B;MACzB,IAAIA,CAAC,CAACC,aAAF,KAAoBD,CAAC,CAACE,MAA1B,EACI;MACJL,cAAc;IACjB;;IACD,SAASO,WAAT,GAAuB;MACnB,MAAM;QAAE1C;MAAF,IAAcU,KAApB;;MACA,IAAIV,OAAJ,EAAa;QACT,KAAK2C,OAAO,CAACC,OAAR,CAAgB5C,OAAO,EAAvB,EAA2B6C,IAA3B,CAAiCC,QAAD,IAAc;UAC/C,IAAIA,QAAQ,KAAK,KAAjB,EACI;UACJ1B,IAAI;QACP,CAJI,CAAL;MAKH,CAND,MAOK;QACDA,IAAI;MACP;IACJ;;IACDhC,SAAS,CAAC,MAAM;MACZ,IAAIsB,KAAK,CAACZ,QAAV,EAAoB;QAChBqB,OAAO,GAAGG,MAAM,CAACc,UAAP,CAAkBhB,IAAlB,EAAwBV,KAAK,CAACZ,QAA9B,CAAV;MACH;IACJ,CAJQ,CAAT;IAKA,OAAO;MACHiD,IAAI,EAAE7B,OADH;MAEHE,IAFG;MAGHsB,WAHG;MAIHR,gBAJG;MAKHD,WALG;MAMHD,iBANG;MAOHD,gBAPG;MAQHP,iBARG;MASHa,gBATG;MAUHI;IAVG,CAAP;EAYH,CArHkD;;EAsHnDO,MAAM,GAAG;IACL,OAAQ/D,CAAC,CAACD,UAAD,EAAa;MAAEyB,IAAI,EAAE,yBAAR;MAAmCwC,MAAM,EAAE,IAA3C;MAClB;MACAC,aAAa,EAAE,KAAK1B,iBAFF;MAEqBrB,YAAY,EAAE,KAAK4B,gBAFxC;MAE0DoB,aAAa,EAAE,KAAKnB,iBAF9E;MAEiG9B,OAAO,EAAE,KAAK+B,WAF/G;MAE4H7B,YAAY,EAAE,KAAK8B;IAF/I,CAAb,EAEgL;MACrLkB,OAAO,EAAE,MAAM;QACX,OAAO,KAAKL,IAAL,GAAa9D,CAAC,CAACO,YAAD,EAAeI,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,IAAI,CAAC,KAAK+D,MAAN,EAAc3D,oBAAd,CAAtB,EAA2D;UAAEM,OAAO,EAAE,KAAK0C,WAAhB;UAA6BY,YAAY,EAAE,KAAKxD,QAAL,IAAiB,KAAKyD,gBAAtB,GAChI,KAAKlB,gBAD2H,GAEhImB,SAFqF;UAE1EC,YAAY,EAAE,KAAK3D,QAAL,IAAiB,KAAKyD,gBAAtB,GACzB,KAAKd,gBADoB,GAEzBe;QAJqF,CAA3D,CAAf,CAAd,GAIoB,IAJ3B;MAKH;IAPoL,CAFhL,CAAT;EAWH;;AAlIkD,CAAD,CAA/C"},"metadata":{},"sourceType":"module"}