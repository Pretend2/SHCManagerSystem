{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from '../../input';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { call, useAdjustedTo, warn } from '../../_utils';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from '../../_mixins';\nimport { mentionLight } from '../styles';\nimport { getRelativePosition } from './utils';\nimport style from './styles/index.cssr';\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), {\n  to: useAdjustedTo.propTo,\n  autosize: [Boolean, Object],\n  options: {\n    type: Array,\n    default: []\n  },\n  type: {\n    type: String,\n    default: 'text'\n  },\n  separator: {\n    type: String,\n    validator: separator => {\n      if (separator.length !== 1) {\n        warn('mention', \"`separator`'s length must be 1.\");\n        return false;\n      }\n\n      return true;\n    },\n    default: ' '\n  },\n  bordered: {\n    type: Boolean,\n    default: undefined\n  },\n  disabled: Boolean,\n  value: String,\n  defaultValue: {\n    type: String,\n    default: ''\n  },\n  loading: Boolean,\n  prefix: {\n    type: [String, Array],\n    default: '@'\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  placement: {\n    type: String,\n    default: 'bottom-start'\n  },\n  size: String,\n  renderLabel: Function,\n  status: String,\n  'onUpdate:value': [Array, Function],\n  onUpdateValue: [Array, Function],\n  onSearch: Function,\n  onSelect: Function,\n  onFocus: Function,\n  onBlur: Function,\n  // private\n  internalDebug: Boolean\n});\nexport default defineComponent({\n  name: 'Mention',\n  props: mentionProps,\n\n  setup(props) {\n    const {\n      namespaceRef,\n      mergedClsPrefixRef,\n      mergedBorderedRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n    const formItem = useFormItem(props);\n    const inputInstRef = ref(null);\n    const cursorRef = ref(null);\n    const followerRef = ref(null);\n    const partialPatternRef = ref('');\n    let cachedPrefix = null; // cached pattern end is for partial pattern\n    // for example @abc|def\n    // end is after `c`\n\n    let cachedPartialPatternStart = null;\n    let cachedPartialPatternEnd = null;\n    const filteredOptionsRef = computed(() => {\n      const {\n        value: pattern\n      } = partialPatternRef;\n      return props.options.filter(option => {\n        if (!pattern) return true;\n\n        if (typeof option.label === 'string') {\n          return option.label.startsWith(pattern);\n        }\n\n        if (typeof option.value === 'string') {\n          return option.value.startsWith(pattern);\n        }\n\n        return false;\n      });\n    });\n    const treeMateRef = computed(() => {\n      return createTreeMate(filteredOptionsRef.value, {\n        getKey: v => {\n          return v.value;\n        }\n      });\n    });\n    const selectMenuInstRef = ref(null);\n    const showMenuRef = ref(false);\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = toRef(props, 'value');\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const cssVarsRef = computed(() => {\n      const {\n        self: {\n          menuBoxShadow\n        }\n      } = themeRef.value;\n      return {\n        '--n-menu-box-shadow': menuBoxShadow\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('mention', undefined, cssVarsRef, props) : undefined;\n\n    function doUpdateShowMenu(show) {\n      if (props.disabled) return;\n\n      if (!show) {\n        cachedPrefix = null;\n        cachedPartialPatternStart = null;\n        cachedPartialPatternEnd = null;\n      }\n\n      showMenuRef.value = show;\n    }\n\n    function doUpdateValue(value) {\n      const {\n        onUpdateValue,\n        'onUpdate:value': _onUpdateValue\n      } = props;\n      const {\n        nTriggerFormChange,\n        nTriggerFormInput\n      } = formItem;\n\n      if (_onUpdateValue) {\n        call(_onUpdateValue, value);\n      }\n\n      if (onUpdateValue) {\n        call(onUpdateValue, value);\n      }\n\n      nTriggerFormInput();\n      nTriggerFormChange();\n      uncontrolledValueRef.value = value;\n    }\n\n    function getInputEl() {\n      return props.type === 'text' ? inputInstRef.value.inputElRef : inputInstRef.value.textareaElRef;\n    }\n\n    function deriveShowMenu() {\n      var _a;\n\n      const inputEl = getInputEl();\n\n      if (document.activeElement !== inputEl) {\n        doUpdateShowMenu(false);\n        return;\n      }\n\n      const {\n        selectionEnd\n      } = inputEl;\n\n      if (selectionEnd === null) {\n        doUpdateShowMenu(false);\n        return;\n      }\n\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const {\n        prefix\n      } = props;\n      const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n\n      for (let i = selectionEnd - 1; i >= 0; --i) {\n        const char = inputValue[i];\n\n        if (char === separator || char === '\\n' || char === '\\r') {\n          doUpdateShowMenu(false);\n          return;\n        }\n\n        if (prefixArray.includes(char)) {\n          const partialPattern = inputValue.slice(i + 1, selectionEnd);\n          doUpdateShowMenu(true);\n          (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n          partialPatternRef.value = partialPattern;\n          cachedPrefix = char;\n          cachedPartialPatternStart = i + 1;\n          cachedPartialPatternEnd = selectionEnd;\n          return;\n        }\n      }\n\n      doUpdateShowMenu(false);\n    }\n\n    function syncCursor() {\n      const {\n        value: cursorAnchor\n      } = cursorRef;\n      if (!cursorAnchor) return;\n      const inputEl = getInputEl();\n      const cursorPos = getRelativePosition(inputEl);\n      cursorPos.left += inputEl.parentElement.offsetLeft;\n      cursorAnchor.style.left = `${cursorPos.left}px`;\n      cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n    }\n\n    function syncPosition() {\n      var _a;\n\n      if (!showMenuRef.value) return;\n      (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n    }\n\n    function handleInputUpdateValue(value) {\n      doUpdateValue(value); // Vue update is mirco task.\n      // So DOM must have been done when sync start in marco task.\n      // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n      // element is immediatelly updated. The behavior is wired but that's what\n      // happens.\n\n      syncAfterCursorMove();\n    }\n\n    function syncAfterCursorMove() {\n      setTimeout(() => {\n        syncCursor();\n        deriveShowMenu();\n        void nextTick().then(syncPosition);\n      }, 0);\n    }\n\n    function handleInputKeyDown(e) {\n      var _a, _b;\n\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing) return;\n        syncAfterCursorMove();\n      } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'Enter') {\n        if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing) return;\n        const {\n          value: selectMenuInst\n        } = selectMenuInstRef;\n\n        if (showMenuRef.value) {\n          if (selectMenuInst) {\n            e.preventDefault();\n\n            if (e.key === 'ArrowUp') {\n              selectMenuInst.prev();\n            } else if (e.key === 'ArrowDown') {\n              selectMenuInst.next();\n            } else {\n              // Enter\n              const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n\n              if (pendingOptionTmNode) {\n                handleSelect(pendingOptionTmNode);\n              } else {\n                doUpdateShowMenu(false);\n              }\n            }\n          }\n        } else {\n          syncAfterCursorMove();\n        }\n      }\n    }\n\n    function handleInputFocus(e) {\n      const {\n        onFocus\n      } = props;\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n      const {\n        nTriggerFormFocus\n      } = formItem;\n      nTriggerFormFocus();\n      syncAfterCursorMove();\n    }\n\n    function focus() {\n      var _a;\n\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n\n    function blur() {\n      var _a;\n\n      (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n\n    function handleInputBlur(e) {\n      const {\n        onBlur\n      } = props;\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n      const {\n        nTriggerFormBlur\n      } = formItem;\n      nTriggerFormBlur();\n      doUpdateShowMenu(false);\n    }\n\n    function handleSelect(tmNode) {\n      var _a;\n\n      if (cachedPrefix === null || cachedPartialPatternStart === null || cachedPartialPatternEnd === null) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n        }\n\n        return;\n      }\n\n      const {\n        rawNode: {\n          value = ''\n        }\n      } = tmNode;\n      const inputEl = getInputEl();\n      const inputValue = inputEl.value;\n      const {\n        separator\n      } = props;\n      const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n      const alreadySeparated = nextEndPart.startsWith(separator);\n      const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n      doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) + nextMiddlePart + nextEndPart);\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n      const nextSelectionEnd = cachedPartialPatternStart + nextMiddlePart.length + (alreadySeparated ? 1 : 0);\n      void nextTick().then(() => {\n        // input value is updated\n        inputEl.selectionStart = nextSelectionEnd;\n        inputEl.selectionEnd = nextSelectionEnd;\n        deriveShowMenu();\n      });\n    }\n\n    function handleInputMouseDown() {\n      if (!props.disabled) {\n        syncAfterCursorMove();\n      }\n    }\n\n    return {\n      namespace: namespaceRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedBordered: mergedBorderedRef,\n      mergedSize: formItem.mergedSizeRef,\n      mergedStatus: formItem.mergedStatusRef,\n      mergedTheme: themeRef,\n      treeMate: treeMateRef,\n      selectMenuInstRef,\n      inputInstRef,\n      cursorRef,\n      followerRef,\n      showMenu: showMenuRef,\n      adjustedTo: useAdjustedTo(props),\n      isMounted: useIsMounted(),\n      mergedValue: mergedValueRef,\n      handleInputFocus,\n      handleInputBlur,\n      handleInputUpdateValue,\n      handleInputKeyDown,\n      handleSelect,\n      handleInputMouseDown,\n      focus,\n      blur,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    };\n  },\n\n  render() {\n    const {\n      mergedTheme,\n      mergedClsPrefix,\n      $slots\n    } = this;\n    return h(\"div\", {\n      class: `${mergedClsPrefix}-mention`\n    }, h(NInput, {\n      status: this.mergedStatus,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      theme: mergedTheme.peers.Input,\n      size: this.mergedSize,\n      autosize: this.autosize,\n      type: this.type,\n      ref: \"inputInstRef\",\n      placeholder: this.placeholder,\n      onMousedown: this.handleInputMouseDown,\n      onUpdateValue: this.handleInputUpdateValue,\n      onKeydown: this.handleInputKeyDown,\n      onFocus: this.handleInputFocus,\n      onBlur: this.handleInputBlur,\n      bordered: this.mergedBordered,\n      disabled: this.disabled,\n      value: this.mergedValue\n    }), h(VBinder, null, {\n      default: () => [h(VTarget, null, {\n        default: () => {\n          const style = {\n            position: 'absolute',\n            width: 0,\n            height: 0\n          };\n\n          if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n            style.width = '1px';\n            style.height = '1px';\n            style.background = 'red';\n          }\n\n          return h(\"div\", {\n            style: style,\n            ref: \"cursorRef\"\n          });\n        }\n      }), h(VFollower, {\n        ref: \"followerRef\",\n        placement: this.placement,\n        show: this.showMenu,\n        containerClass: this.namespace,\n        to: this.adjustedTo,\n        teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey\n      }, {\n        default: () => h(Transition, {\n          name: \"fade-in-scale-up-transition\",\n          appear: this.isMounted\n        }, {\n          default: () => {\n            const {\n              mergedTheme,\n              onRender\n            } = this;\n            onRender === null || onRender === void 0 ? void 0 : onRender();\n            return this.showMenu ? h(NInternalSelectMenu, {\n              clsPrefix: mergedClsPrefix,\n              theme: mergedTheme.peers.InternalSelectMenu,\n              themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu,\n              autoPending: true,\n              ref: \"selectMenuInstRef\",\n              class: [`${mergedClsPrefix}-mention-menu`, this.themeClass],\n              loading: this.loading,\n              treeMate: this.treeMate,\n              virtualScroll: false,\n              style: this.cssVars,\n              onToggle: this.handleSelect,\n              renderLabel: this.renderLabel\n            }, $slots) : null;\n          }\n        })\n      })]\n    }));\n  }\n\n});","map":{"version":3,"names":["defineComponent","h","ref","toRef","nextTick","computed","Transition","createTreeMate","VBinder","VFollower","VTarget","useIsMounted","useMergedState","NInput","NInternalSelectMenu","call","useAdjustedTo","warn","useConfig","useFormItem","useTheme","useThemeClass","mentionLight","getRelativePosition","style","mentionProps","Object","assign","props","to","propTo","autosize","Boolean","options","type","Array","default","String","separator","validator","length","bordered","undefined","disabled","value","defaultValue","loading","prefix","placeholder","placement","size","renderLabel","Function","status","onUpdateValue","onSearch","onSelect","onFocus","onBlur","internalDebug","name","setup","namespaceRef","mergedClsPrefixRef","mergedBorderedRef","inlineThemeDisabled","themeRef","formItem","inputInstRef","cursorRef","followerRef","partialPatternRef","cachedPrefix","cachedPartialPatternStart","cachedPartialPatternEnd","filteredOptionsRef","pattern","filter","option","label","startsWith","treeMateRef","getKey","v","selectMenuInstRef","showMenuRef","uncontrolledValueRef","controlledValueRef","mergedValueRef","cssVarsRef","self","menuBoxShadow","themeClassHandle","doUpdateShowMenu","show","doUpdateValue","_onUpdateValue","nTriggerFormChange","nTriggerFormInput","getInputEl","inputElRef","textareaElRef","deriveShowMenu","_a","inputEl","document","activeElement","selectionEnd","inputValue","prefixArray","i","char","includes","partialPattern","slice","syncCursor","cursorAnchor","cursorPos","left","parentElement","offsetLeft","top","height","syncPosition","handleInputUpdateValue","syncAfterCursorMove","setTimeout","then","handleInputKeyDown","e","_b","key","isCompositing","selectMenuInst","preventDefault","prev","next","pendingOptionTmNode","getPendingTmNode","handleSelect","handleInputFocus","nTriggerFormFocus","focus","blur","handleInputBlur","nTriggerFormBlur","tmNode","process","env","NODE_ENV","rawNode","nextEndPart","alreadySeparated","nextMiddlePart","nextSelectionEnd","selectionStart","handleInputMouseDown","namespace","mergedClsPrefix","mergedBordered","mergedSize","mergedSizeRef","mergedStatus","mergedStatusRef","mergedTheme","treeMate","showMenu","adjustedTo","isMounted","mergedValue","cssVars","themeClass","onRender","render","$slots","class","themeOverrides","peerOverrides","Input","theme","peers","onMousedown","onKeydown","position","width","background","containerClass","teleportDisabled","tdkey","appear","clsPrefix","InternalSelectMenu","autoPending","virtualScroll","onToggle"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/mention/src/Mention.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, h, ref, toRef, nextTick, computed, Transition } from 'vue';\nimport { createTreeMate } from 'treemate';\nimport { VBinder, VFollower, VTarget } from 'vueuc';\nimport { useIsMounted, useMergedState } from 'vooks';\nimport { NInput } from '../../input';\nimport { NInternalSelectMenu } from '../../_internal';\nimport { call, useAdjustedTo, warn } from '../../_utils';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from '../../_mixins';\nimport { mentionLight } from '../styles';\nimport { getRelativePosition } from './utils';\nimport style from './styles/index.cssr';\nexport const mentionProps = Object.assign(Object.assign({}, useTheme.props), { to: useAdjustedTo.propTo, autosize: [Boolean, Object], options: {\n        type: Array,\n        default: []\n    }, type: {\n        type: String,\n        default: 'text'\n    }, separator: {\n        type: String,\n        validator: (separator) => {\n            if (separator.length !== 1) {\n                warn('mention', \"`separator`'s length must be 1.\");\n                return false;\n            }\n            return true;\n        },\n        default: ' '\n    }, bordered: {\n        type: Boolean,\n        default: undefined\n    }, disabled: Boolean, value: String, defaultValue: {\n        type: String,\n        default: ''\n    }, loading: Boolean, prefix: {\n        type: [String, Array],\n        default: '@'\n    }, placeholder: {\n        type: String,\n        default: ''\n    }, placement: {\n        type: String,\n        default: 'bottom-start'\n    }, size: String, renderLabel: Function, status: String, 'onUpdate:value': [Array, Function], onUpdateValue: [Array, Function], onSearch: Function, onSelect: Function, onFocus: Function, onBlur: Function, \n    // private\n    internalDebug: Boolean });\nexport default defineComponent({\n    name: 'Mention',\n    props: mentionProps,\n    setup(props) {\n        const { namespaceRef, mergedClsPrefixRef, mergedBorderedRef, inlineThemeDisabled } = useConfig(props);\n        const themeRef = useTheme('Mention', '-mention', style, mentionLight, props, mergedClsPrefixRef);\n        const formItem = useFormItem(props);\n        const inputInstRef = ref(null);\n        const cursorRef = ref(null);\n        const followerRef = ref(null);\n        const partialPatternRef = ref('');\n        let cachedPrefix = null;\n        // cached pattern end is for partial pattern\n        // for example @abc|def\n        // end is after `c`\n        let cachedPartialPatternStart = null;\n        let cachedPartialPatternEnd = null;\n        const filteredOptionsRef = computed(() => {\n            const { value: pattern } = partialPatternRef;\n            return props.options.filter((option) => {\n                if (!pattern)\n                    return true;\n                if (typeof option.label === 'string') {\n                    return option.label.startsWith(pattern);\n                }\n                if (typeof option.value === 'string') {\n                    return option.value.startsWith(pattern);\n                }\n                return false;\n            });\n        });\n        const treeMateRef = computed(() => {\n            return createTreeMate(filteredOptionsRef.value, {\n                getKey: (v) => {\n                    return v.value;\n                }\n            });\n        });\n        const selectMenuInstRef = ref(null);\n        const showMenuRef = ref(false);\n        const uncontrolledValueRef = ref(props.defaultValue);\n        const controlledValueRef = toRef(props, 'value');\n        const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n        const cssVarsRef = computed(() => {\n            const { self: { menuBoxShadow } } = themeRef.value;\n            return {\n                '--n-menu-box-shadow': menuBoxShadow\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('mention', undefined, cssVarsRef, props)\n            : undefined;\n        function doUpdateShowMenu(show) {\n            if (props.disabled)\n                return;\n            if (!show) {\n                cachedPrefix = null;\n                cachedPartialPatternStart = null;\n                cachedPartialPatternEnd = null;\n            }\n            showMenuRef.value = show;\n        }\n        function doUpdateValue(value) {\n            const { onUpdateValue, 'onUpdate:value': _onUpdateValue } = props;\n            const { nTriggerFormChange, nTriggerFormInput } = formItem;\n            if (_onUpdateValue) {\n                call(_onUpdateValue, value);\n            }\n            if (onUpdateValue) {\n                call(onUpdateValue, value);\n            }\n            nTriggerFormInput();\n            nTriggerFormChange();\n            uncontrolledValueRef.value = value;\n        }\n        function getInputEl() {\n            return props.type === 'text'\n                ? inputInstRef.value.inputElRef\n                : inputInstRef.value.textareaElRef;\n        }\n        function deriveShowMenu() {\n            var _a;\n            const inputEl = getInputEl();\n            if (document.activeElement !== inputEl) {\n                doUpdateShowMenu(false);\n                return;\n            }\n            const { selectionEnd } = inputEl;\n            if (selectionEnd === null) {\n                doUpdateShowMenu(false);\n                return;\n            }\n            const inputValue = inputEl.value;\n            const { separator } = props;\n            const { prefix } = props;\n            const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n            for (let i = selectionEnd - 1; i >= 0; --i) {\n                const char = inputValue[i];\n                if (char === separator || char === '\\n' || char === '\\r') {\n                    doUpdateShowMenu(false);\n                    return;\n                }\n                if (prefixArray.includes(char)) {\n                    const partialPattern = inputValue.slice(i + 1, selectionEnd);\n                    doUpdateShowMenu(true);\n                    (_a = props.onSearch) === null || _a === void 0 ? void 0 : _a.call(props, partialPattern, char);\n                    partialPatternRef.value = partialPattern;\n                    cachedPrefix = char;\n                    cachedPartialPatternStart = i + 1;\n                    cachedPartialPatternEnd = selectionEnd;\n                    return;\n                }\n            }\n            doUpdateShowMenu(false);\n        }\n        function syncCursor() {\n            const { value: cursorAnchor } = cursorRef;\n            if (!cursorAnchor)\n                return;\n            const inputEl = getInputEl();\n            const cursorPos = getRelativePosition(inputEl);\n            cursorPos.left += inputEl.parentElement.offsetLeft;\n            cursorAnchor.style.left = `${cursorPos.left}px`;\n            cursorAnchor.style.top = `${cursorPos.top + cursorPos.height}px`;\n        }\n        function syncPosition() {\n            var _a;\n            if (!showMenuRef.value)\n                return;\n            (_a = followerRef.value) === null || _a === void 0 ? void 0 : _a.syncPosition();\n        }\n        function handleInputUpdateValue(value) {\n            doUpdateValue(value);\n            // Vue update is mirco task.\n            // So DOM must have been done when sync start in marco task.\n            // I can't use nextTick(), Chrome doesn't update scrollLeft of INPUT\n            // element is immediatelly updated. The behavior is wired but that's what\n            // happens.\n            syncAfterCursorMove();\n        }\n        function syncAfterCursorMove() {\n            setTimeout(() => {\n                syncCursor();\n                deriveShowMenu();\n                void nextTick().then(syncPosition);\n            }, 0);\n        }\n        function handleInputKeyDown(e) {\n            var _a, _b;\n            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n                if ((_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.isCompositing)\n                    return;\n                syncAfterCursorMove();\n            }\n            else if (e.key === 'ArrowUp' ||\n                e.key === 'ArrowDown' ||\n                e.key === 'Enter') {\n                if ((_b = inputInstRef.value) === null || _b === void 0 ? void 0 : _b.isCompositing)\n                    return;\n                const { value: selectMenuInst } = selectMenuInstRef;\n                if (showMenuRef.value) {\n                    if (selectMenuInst) {\n                        e.preventDefault();\n                        if (e.key === 'ArrowUp') {\n                            selectMenuInst.prev();\n                        }\n                        else if (e.key === 'ArrowDown') {\n                            selectMenuInst.next();\n                        }\n                        else {\n                            // Enter\n                            const pendingOptionTmNode = selectMenuInst.getPendingTmNode();\n                            if (pendingOptionTmNode) {\n                                handleSelect(pendingOptionTmNode);\n                            }\n                            else {\n                                doUpdateShowMenu(false);\n                            }\n                        }\n                    }\n                }\n                else {\n                    syncAfterCursorMove();\n                }\n            }\n        }\n        function handleInputFocus(e) {\n            const { onFocus } = props;\n            onFocus === null || onFocus === void 0 ? void 0 : onFocus(e);\n            const { nTriggerFormFocus } = formItem;\n            nTriggerFormFocus();\n            syncAfterCursorMove();\n        }\n        function focus() {\n            var _a;\n            (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n        function blur() {\n            var _a;\n            (_a = inputInstRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        function handleInputBlur(e) {\n            const { onBlur } = props;\n            onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);\n            const { nTriggerFormBlur } = formItem;\n            nTriggerFormBlur();\n            doUpdateShowMenu(false);\n        }\n        function handleSelect(tmNode) {\n            var _a;\n            if (cachedPrefix === null ||\n                cachedPartialPatternStart === null ||\n                cachedPartialPatternEnd === null) {\n                if (process.env.NODE_ENV !== 'production') {\n                    warn('mention', 'Cache works unexpectly, this is probably a bug. Please create an issue.');\n                }\n                return;\n            }\n            const { rawNode: { value = '' } } = tmNode;\n            const inputEl = getInputEl();\n            const inputValue = inputEl.value;\n            const { separator } = props;\n            const nextEndPart = inputValue.slice(cachedPartialPatternEnd);\n            const alreadySeparated = nextEndPart.startsWith(separator);\n            const nextMiddlePart = `${value}${alreadySeparated ? '' : separator}`;\n            doUpdateValue(inputValue.slice(0, cachedPartialPatternStart) +\n                nextMiddlePart +\n                nextEndPart);\n            (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, tmNode.rawNode, cachedPrefix);\n            const nextSelectionEnd = cachedPartialPatternStart +\n                nextMiddlePart.length +\n                (alreadySeparated ? 1 : 0);\n            void nextTick().then(() => {\n                // input value is updated\n                inputEl.selectionStart = nextSelectionEnd;\n                inputEl.selectionEnd = nextSelectionEnd;\n                deriveShowMenu();\n            });\n        }\n        function handleInputMouseDown() {\n            if (!props.disabled) {\n                syncAfterCursorMove();\n            }\n        }\n        return {\n            namespace: namespaceRef,\n            mergedClsPrefix: mergedClsPrefixRef,\n            mergedBordered: mergedBorderedRef,\n            mergedSize: formItem.mergedSizeRef,\n            mergedStatus: formItem.mergedStatusRef,\n            mergedTheme: themeRef,\n            treeMate: treeMateRef,\n            selectMenuInstRef,\n            inputInstRef,\n            cursorRef,\n            followerRef,\n            showMenu: showMenuRef,\n            adjustedTo: useAdjustedTo(props),\n            isMounted: useIsMounted(),\n            mergedValue: mergedValueRef,\n            handleInputFocus,\n            handleInputBlur,\n            handleInputUpdateValue,\n            handleInputKeyDown,\n            handleSelect,\n            handleInputMouseDown,\n            focus,\n            blur,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        };\n    },\n    render() {\n        const { mergedTheme, mergedClsPrefix, $slots } = this;\n        return (h(\"div\", { class: `${mergedClsPrefix}-mention` },\n            h(NInput, { status: this.mergedStatus, themeOverrides: mergedTheme.peerOverrides.Input, theme: mergedTheme.peers.Input, size: this.mergedSize, autosize: this.autosize, type: this.type, ref: \"inputInstRef\", placeholder: this.placeholder, onMousedown: this.handleInputMouseDown, onUpdateValue: this.handleInputUpdateValue, onKeydown: this.handleInputKeyDown, onFocus: this.handleInputFocus, onBlur: this.handleInputBlur, bordered: this.mergedBordered, disabled: this.disabled, value: this.mergedValue }),\n            h(VBinder, null, {\n                default: () => [\n                    h(VTarget, null, {\n                        default: () => {\n                            const style = {\n                                position: 'absolute',\n                                width: 0,\n                                height: 0\n                            };\n                            if (process.env.NODE_ENV !== 'production' && this.internalDebug) {\n                                style.width = '1px';\n                                style.height = '1px';\n                                style.background = 'red';\n                            }\n                            return h(\"div\", { style: style, ref: \"cursorRef\" });\n                        }\n                    }),\n                    h(VFollower, { ref: \"followerRef\", placement: this.placement, show: this.showMenu, containerClass: this.namespace, to: this.adjustedTo, teleportDisabled: this.adjustedTo === useAdjustedTo.tdkey }, {\n                        default: () => (h(Transition, { name: \"fade-in-scale-up-transition\", appear: this.isMounted }, {\n                            default: () => {\n                                const { mergedTheme, onRender } = this;\n                                onRender === null || onRender === void 0 ? void 0 : onRender();\n                                return this.showMenu ? (h(NInternalSelectMenu, { clsPrefix: mergedClsPrefix, theme: mergedTheme.peers.InternalSelectMenu, themeOverrides: mergedTheme.peerOverrides.InternalSelectMenu, autoPending: true, ref: \"selectMenuInstRef\", class: [\n                                        `${mergedClsPrefix}-mention-menu`,\n                                        this.themeClass\n                                    ], loading: this.loading, treeMate: this.treeMate, virtualScroll: false, style: this.cssVars, onToggle: this.handleSelect, renderLabel: this.renderLabel }, $slots)) : null;\n                            }\n                        }))\n                    })\n                ]\n            })));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}