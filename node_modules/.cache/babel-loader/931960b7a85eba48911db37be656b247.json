{"ast":null,"code":"import { h, defineComponent, inject, computed } from 'vue';\nimport { NDropdown } from '../../../dropdown';\nimport { NBaseIcon } from '../../../_internal';\nimport { ChevronDownIcon } from '../../../_internal/icons';\nimport { dataTableInjectionKey } from '../interface';\nconst allKey = '_n_all__';\nconst noneKey = '_n_none__';\n\nfunction createSelectHandler(options, rawPaginatedDataRef, doCheckAll, doUncheckAll) {\n  if (!options) return () => {};\n  return key => {\n    for (const option of options) {\n      switch (key) {\n        case allKey:\n          doCheckAll(true);\n          return;\n\n        case noneKey:\n          doUncheckAll(true);\n          return;\n\n        default:\n          if (typeof option === 'object' && option.key === key) {\n            option.onSelect(rawPaginatedDataRef.value);\n            return;\n          }\n\n      }\n    }\n  };\n}\n\nfunction createDropdownOptions(options, localeRef) {\n  if (!options) return [];\n  return options.map(option => {\n    switch (option) {\n      case 'all':\n        return {\n          label: localeRef.checkTableAll,\n          key: allKey\n        };\n\n      case 'none':\n        return {\n          label: localeRef.uncheckTableAll,\n          key: noneKey\n        };\n\n      default:\n        return option;\n    }\n  });\n}\n\nexport default defineComponent({\n  name: 'DataTableSelectionMenu',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const {\n      props: dataTableProps,\n      localeRef,\n      checkOptionsRef,\n      rawPaginatedDataRef,\n      doCheckAll,\n      doUncheckAll // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    } = inject(dataTableInjectionKey);\n    const handleSelectRef = computed(() => createSelectHandler(checkOptionsRef.value, rawPaginatedDataRef, doCheckAll, doUncheckAll));\n    const optionsRef = computed(() => createDropdownOptions(checkOptionsRef.value, localeRef.value));\n    return () => {\n      var _a, _b, _c, _d;\n\n      const {\n        clsPrefix\n      } = props;\n      return h(NDropdown, {\n        theme: (_b = (_a = dataTableProps.theme) === null || _a === void 0 ? void 0 : _a.peers) === null || _b === void 0 ? void 0 : _b.Dropdown,\n        themeOverrides: (_d = (_c = dataTableProps.themeOverrides) === null || _c === void 0 ? void 0 : _c.peers) === null || _d === void 0 ? void 0 : _d.Dropdown,\n        options: optionsRef.value,\n        onSelect: handleSelectRef.value\n      }, {\n        default: () => h(NBaseIcon, {\n          clsPrefix: clsPrefix,\n          class: `${clsPrefix}-data-table-check-extra`\n        }, {\n          default: () => h(ChevronDownIcon, null)\n        })\n      });\n    };\n  }\n\n});","map":{"version":3,"names":["h","defineComponent","inject","computed","NDropdown","NBaseIcon","ChevronDownIcon","dataTableInjectionKey","allKey","noneKey","createSelectHandler","options","rawPaginatedDataRef","doCheckAll","doUncheckAll","key","option","onSelect","value","createDropdownOptions","localeRef","map","label","checkTableAll","uncheckTableAll","name","props","clsPrefix","type","String","required","setup","dataTableProps","checkOptionsRef","handleSelectRef","optionsRef","_a","_b","_c","_d","theme","peers","Dropdown","themeOverrides","default","class"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/data-table/src/TableParts/SelectionMenu.js"],"sourcesContent":["import { h, defineComponent, inject, computed } from 'vue';\nimport { NDropdown } from '../../../dropdown';\nimport { NBaseIcon } from '../../../_internal';\nimport { ChevronDownIcon } from '../../../_internal/icons';\nimport { dataTableInjectionKey } from '../interface';\nconst allKey = '_n_all__';\nconst noneKey = '_n_none__';\nfunction createSelectHandler(options, rawPaginatedDataRef, doCheckAll, doUncheckAll) {\n    if (!options)\n        return () => { };\n    return (key) => {\n        for (const option of options) {\n            switch (key) {\n                case allKey:\n                    doCheckAll(true);\n                    return;\n                case noneKey:\n                    doUncheckAll(true);\n                    return;\n                default:\n                    if (typeof option === 'object' && option.key === key) {\n                        option.onSelect(rawPaginatedDataRef.value);\n                        return;\n                    }\n            }\n        }\n    };\n}\nfunction createDropdownOptions(options, localeRef) {\n    if (!options)\n        return [];\n    return options.map((option) => {\n        switch (option) {\n            case 'all':\n                return {\n                    label: localeRef.checkTableAll,\n                    key: allKey\n                };\n            case 'none':\n                return {\n                    label: localeRef.uncheckTableAll,\n                    key: noneKey\n                };\n            default:\n                return option;\n        }\n    });\n}\nexport default defineComponent({\n    name: 'DataTableSelectionMenu',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        }\n    },\n    setup(props) {\n        const { props: dataTableProps, localeRef, checkOptionsRef, rawPaginatedDataRef, doCheckAll, doUncheckAll\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n         } = inject(dataTableInjectionKey);\n        const handleSelectRef = computed(() => createSelectHandler(checkOptionsRef.value, rawPaginatedDataRef, doCheckAll, doUncheckAll));\n        const optionsRef = computed(() => createDropdownOptions(checkOptionsRef.value, localeRef.value));\n        return () => {\n            var _a, _b, _c, _d;\n            const { clsPrefix } = props;\n            return (h(NDropdown, { theme: (_b = (_a = dataTableProps.theme) === null || _a === void 0 ? void 0 : _a.peers) === null || _b === void 0 ? void 0 : _b.Dropdown, themeOverrides: (_d = (_c = dataTableProps.themeOverrides) === null || _c === void 0 ? void 0 : _c.peers) === null || _d === void 0 ? void 0 : _d.Dropdown, options: optionsRef.value, onSelect: handleSelectRef.value }, {\n                default: () => (h(NBaseIcon, { clsPrefix: clsPrefix, class: `${clsPrefix}-data-table-check-extra` }, {\n                    default: () => h(ChevronDownIcon, null)\n                }))\n            }));\n        };\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}