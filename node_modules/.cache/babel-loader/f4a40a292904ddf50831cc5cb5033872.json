{"ast":null,"code":"import { h, ref, defineComponent, inject, Transition, withDirectives } from 'vue';\nimport { clickoutside } from 'vdirs';\nimport FocusDetector from '../../_internal/focus-detector';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../_utils';\nimport { NEmpty } from '../../empty';\nimport { NBaseMenuMask } from '../../_internal';\nimport NCascaderSubmenu from './CascaderSubmenu';\nimport { cascaderInjectionKey } from './interface';\nexport default defineComponent({\n  name: 'NCascaderMenu',\n  props: {\n    value: [String, Number, Array],\n    placement: {\n      type: String,\n      default: 'bottom-start'\n    },\n    show: Boolean,\n    menuModel: {\n      type: Array,\n      required: true\n    },\n    loading: Boolean,\n    onFocus: {\n      type: Function,\n      required: true\n    },\n    onBlur: {\n      type: Function,\n      required: true\n    },\n    onKeydown: {\n      type: Function,\n      required: true\n    },\n    onMousedown: {\n      type: Function,\n      required: true\n    },\n    onTabout: {\n      type: Function,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const {\n      localeRef,\n      isMountedRef,\n      mergedClsPrefixRef,\n      syncCascaderMenuPosition,\n      handleCascaderMenuClickOutside,\n      mergedThemeRef // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    } = inject(cascaderInjectionKey);\n    const submenuInstRefs = [];\n    const maskInstRef = ref(null);\n    const selfElRef = ref(null);\n\n    function handleResize() {\n      syncCascaderMenuPosition();\n    }\n\n    useOnResize(selfElRef, handleResize);\n\n    function showErrorMessage(label) {\n      var _a;\n\n      const {\n        value: {\n          loadingRequiredMessage\n        }\n      } = localeRef;\n      (_a = maskInstRef.value) === null || _a === void 0 ? void 0 : _a.showOnce(loadingRequiredMessage(label));\n    }\n\n    function handleClickOutside(e) {\n      handleCascaderMenuClickOutside(e);\n    }\n\n    function handleFocusin(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onFocus(e);\n      }\n    }\n\n    function handleFocusout(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onBlur(e);\n      }\n    }\n\n    const exposedRef = {\n      scroll(depth, index, elSize) {\n        const submenuInst = submenuInstRefs[depth];\n\n        if (submenuInst) {\n          submenuInst.scroll(index, elSize);\n        }\n      },\n\n      showErrorMessage\n    };\n    return Object.assign({\n      isMounted: isMountedRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      submenuInstRefs,\n      maskInstRef,\n      mergedTheme: mergedThemeRef,\n      handleFocusin,\n      handleFocusout,\n      handleClickOutside\n    }, exposedRef);\n  },\n\n  render() {\n    const {\n      submenuInstRefs,\n      mergedClsPrefix,\n      mergedTheme\n    } = this;\n    return h(Transition, {\n      name: \"fade-in-scale-up-transition\",\n      appear: this.isMounted\n    }, {\n      default: () => {\n        if (!this.show) return null;\n        return withDirectives(h(\"div\", {\n          tabindex: \"0\",\n          ref: \"selfElRef\",\n          class: `${mergedClsPrefix}-cascader-menu`,\n          onMousedown: this.onMousedown,\n          onFocusin: this.handleFocusin,\n          onFocusout: this.handleFocusout,\n          onKeydown: this.onKeydown\n        }, this.menuModel[0].length ? h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-submenu-wrapper`\n        }, this.menuModel.map((submenuOptions, index) => h(NCascaderSubmenu, {\n          ref: instance => {\n            if (instance) {\n              submenuInstRefs[index] = instance;\n            }\n          },\n          key: index,\n          tmNodes: submenuOptions,\n          depth: index + 1\n        })), h(NBaseMenuMask, {\n          clsPrefix: mergedClsPrefix,\n          ref: \"maskInstRef\"\n        })) : h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu__empty`\n        }, resolveSlot(this.$slots.empty, () => [h(NEmpty, {\n          theme: mergedTheme.peers.Empty,\n          themeOverrides: mergedTheme.peerOverrides.Empty\n        })])), resolveWrappedSlot(this.$slots.action, children => children && h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu-action`,\n          \"data-action\": true\n        }, children)), h(FocusDetector, {\n          onFocus: this.onTabout\n        })), [[clickoutside, this.handleClickOutside, undefined, {\n          capture: true\n        }]]);\n      }\n    });\n  }\n\n});","map":{"version":3,"names":["h","ref","defineComponent","inject","Transition","withDirectives","clickoutside","FocusDetector","resolveSlot","resolveWrappedSlot","useOnResize","NEmpty","NBaseMenuMask","NCascaderSubmenu","cascaderInjectionKey","name","props","value","String","Number","Array","placement","type","default","show","Boolean","menuModel","required","loading","onFocus","Function","onBlur","onKeydown","onMousedown","onTabout","setup","localeRef","isMountedRef","mergedClsPrefixRef","syncCascaderMenuPosition","handleCascaderMenuClickOutside","mergedThemeRef","submenuInstRefs","maskInstRef","selfElRef","handleResize","showErrorMessage","label","_a","loadingRequiredMessage","showOnce","handleClickOutside","e","handleFocusin","selfEl","contains","relatedTarget","handleFocusout","exposedRef","scroll","depth","index","elSize","submenuInst","Object","assign","isMounted","mergedClsPrefix","mergedTheme","render","appear","tabindex","class","onFocusin","onFocusout","length","map","submenuOptions","instance","key","tmNodes","clsPrefix","$slots","empty","theme","peers","Empty","themeOverrides","peerOverrides","action","children","undefined","capture"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/cascader/src/CascaderMenu.js"],"sourcesContent":["import { h, ref, defineComponent, inject, Transition, withDirectives } from 'vue';\nimport { clickoutside } from 'vdirs';\nimport FocusDetector from '../../_internal/focus-detector';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../_utils';\nimport { NEmpty } from '../../empty';\nimport { NBaseMenuMask } from '../../_internal';\nimport NCascaderSubmenu from './CascaderSubmenu';\nimport { cascaderInjectionKey } from './interface';\nexport default defineComponent({\n    name: 'NCascaderMenu',\n    props: {\n        value: [String, Number, Array],\n        placement: {\n            type: String,\n            default: 'bottom-start'\n        },\n        show: Boolean,\n        menuModel: {\n            type: Array,\n            required: true\n        },\n        loading: Boolean,\n        onFocus: {\n            type: Function,\n            required: true\n        },\n        onBlur: {\n            type: Function,\n            required: true\n        },\n        onKeydown: {\n            type: Function,\n            required: true\n        },\n        onMousedown: {\n            type: Function,\n            required: true\n        },\n        onTabout: {\n            type: Function,\n            required: true\n        }\n    },\n    setup(props) {\n        const { localeRef, isMountedRef, mergedClsPrefixRef, syncCascaderMenuPosition, handleCascaderMenuClickOutside, mergedThemeRef\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n         } = inject(cascaderInjectionKey);\n        const submenuInstRefs = [];\n        const maskInstRef = ref(null);\n        const selfElRef = ref(null);\n        function handleResize() {\n            syncCascaderMenuPosition();\n        }\n        useOnResize(selfElRef, handleResize);\n        function showErrorMessage(label) {\n            var _a;\n            const { value: { loadingRequiredMessage } } = localeRef;\n            (_a = maskInstRef.value) === null || _a === void 0 ? void 0 : _a.showOnce(loadingRequiredMessage(label));\n        }\n        function handleClickOutside(e) {\n            handleCascaderMenuClickOutside(e);\n        }\n        function handleFocusin(e) {\n            const { value: selfEl } = selfElRef;\n            if (!selfEl)\n                return;\n            if (!selfEl.contains(e.relatedTarget)) {\n                props.onFocus(e);\n            }\n        }\n        function handleFocusout(e) {\n            const { value: selfEl } = selfElRef;\n            if (!selfEl)\n                return;\n            if (!selfEl.contains(e.relatedTarget)) {\n                props.onBlur(e);\n            }\n        }\n        const exposedRef = {\n            scroll(depth, index, elSize) {\n                const submenuInst = submenuInstRefs[depth];\n                if (submenuInst) {\n                    submenuInst.scroll(index, elSize);\n                }\n            },\n            showErrorMessage\n        };\n        return Object.assign({ isMounted: isMountedRef, mergedClsPrefix: mergedClsPrefixRef, selfElRef,\n            submenuInstRefs,\n            maskInstRef, mergedTheme: mergedThemeRef, handleFocusin,\n            handleFocusout,\n            handleClickOutside }, exposedRef);\n    },\n    render() {\n        const { submenuInstRefs, mergedClsPrefix, mergedTheme } = this;\n        return (h(Transition, { name: \"fade-in-scale-up-transition\", appear: this.isMounted }, {\n            default: () => {\n                if (!this.show)\n                    return null;\n                return withDirectives(h(\"div\", { tabindex: \"0\", ref: \"selfElRef\", class: `${mergedClsPrefix}-cascader-menu`, onMousedown: this.onMousedown, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onKeydown: this.onKeydown },\n                    this.menuModel[0].length ? (h(\"div\", { class: `${mergedClsPrefix}-cascader-submenu-wrapper` },\n                        this.menuModel.map((submenuOptions, index) => (h(NCascaderSubmenu, { ref: ((instance) => {\n                                if (instance) {\n                                    submenuInstRefs[index] = instance;\n                                }\n                            }), key: index, tmNodes: submenuOptions, depth: index + 1 }))),\n                        h(NBaseMenuMask, { clsPrefix: mergedClsPrefix, ref: \"maskInstRef\" }))) : (h(\"div\", { class: `${mergedClsPrefix}-cascader-menu__empty` }, resolveSlot(this.$slots.empty, () => [\n                        h(NEmpty, { theme: mergedTheme.peers.Empty, themeOverrides: mergedTheme.peerOverrides.Empty })\n                    ]))),\n                    resolveWrappedSlot(this.$slots.action, (children) => children && (h(\"div\", { class: `${mergedClsPrefix}-cascader-menu-action`, \"data-action\": true }, children))),\n                    h(FocusDetector, { onFocus: this.onTabout })), [\n                    [\n                        clickoutside,\n                        this.handleClickOutside,\n                        undefined,\n                        { capture: true }\n                    ]\n                ]);\n            }\n        }));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}