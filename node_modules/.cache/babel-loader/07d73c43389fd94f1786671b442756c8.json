{"ast":null,"code":"import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from '../../input';\nimport { colorPickerInjectionKey } from './context'; // 0 - 255\n\nfunction normalizeRgbUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 255));\n  }\n\n  return false;\n} // 0 - 360\n\n\nfunction normalizeHueUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 360));\n  }\n\n  return false;\n} // 0 - 100\n\n\nfunction normalizeSlvUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value), 100));\n  }\n\n  return false;\n}\n\nfunction normalizeHexaUnit(value) {\n  const trimmedValue = value.trim();\n\n  if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n    return [4, 5, 7, 9].includes(trimmedValue.length);\n  }\n\n  return false;\n} // 0 - 100%\n\n\nfunction normalizeAlphaUnit(value) {\n  if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n    return Math.max(0, Math.min(parseInt(value) / 100, 100));\n  }\n\n  return false;\n}\n\nconst inputThemeOverrides = {\n  paddingSmall: '0 4px'\n};\nexport default defineComponent({\n  name: 'ColorInputUnit',\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    showAlpha: Boolean,\n    onUpdateValue: {\n      type: Function,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const inputValueRef = ref(''); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    const {\n      themeRef\n    } = inject(colorPickerInjectionKey, null);\n    watchEffect(() => {\n      inputValueRef.value = getInputString();\n    });\n\n    function getInputString() {\n      const {\n        value\n      } = props;\n      if (value === null) return '';\n      const {\n        label\n      } = props;\n\n      if (label === 'HEX') {\n        return value;\n      }\n\n      if (label === 'A') {\n        return `${Math.floor(value * 100)}%`;\n      }\n\n      return String(Math.floor(value));\n    }\n\n    function handleInputUpdateValue(value) {\n      inputValueRef.value = value;\n    }\n\n    function handleInputChange(value) {\n      let unit;\n      let valid;\n\n      switch (props.label) {\n        case 'HEX':\n          valid = normalizeHexaUnit(value);\n\n          if (valid) {\n            props.onUpdateValue(value);\n          }\n\n          inputValueRef.value = getInputString(); // to normalized new value\n\n          break;\n\n        case 'H':\n          unit = normalizeHueUnit(value);\n\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n\n          break;\n\n        case 'S':\n        case 'L':\n        case 'V':\n          unit = normalizeSlvUnit(value);\n\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n\n          break;\n\n        case 'A':\n          unit = normalizeAlphaUnit(value);\n\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n\n          break;\n\n        case 'R':\n        case 'G':\n        case 'B':\n          unit = normalizeRgbUnit(value);\n\n          if (unit === false) {\n            inputValueRef.value = getInputString();\n          } else {\n            props.onUpdateValue(unit);\n          }\n\n          break;\n      }\n    }\n\n    return {\n      mergedTheme: themeRef,\n      inputValue: inputValueRef,\n      handleInputChange,\n      handleInputUpdateValue\n    };\n  },\n\n  render() {\n    const {\n      mergedTheme\n    } = this;\n    return h(NInput, {\n      size: \"small\",\n      placeholder: this.label,\n      theme: mergedTheme.peers.Input,\n      themeOverrides: mergedTheme.peerOverrides.Input,\n      builtinThemeOverrides: inputThemeOverrides,\n      value: this.inputValue,\n      onUpdateValue: this.handleInputUpdateValue,\n      onChange: this.handleInputChange,\n      // add more space for xxx% input\n      style: this.label === 'A' ? 'flex-grow: 1.25;' : ''\n    });\n  }\n\n});","map":{"version":3,"names":["defineComponent","h","inject","ref","watchEffect","NInput","colorPickerInjectionKey","normalizeRgbUnit","value","test","trim","Math","max","min","parseInt","normalizeHueUnit","normalizeSlvUnit","normalizeHexaUnit","trimmedValue","includes","length","normalizeAlphaUnit","inputThemeOverrides","paddingSmall","name","props","label","type","String","required","Number","default","showAlpha","Boolean","onUpdateValue","Function","setup","inputValueRef","themeRef","getInputString","floor","handleInputUpdateValue","handleInputChange","unit","valid","mergedTheme","inputValue","render","size","placeholder","theme","peers","Input","themeOverrides","peerOverrides","builtinThemeOverrides","onChange","style"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/color-picker/src/ColorInputUnit.js"],"sourcesContent":["import { defineComponent, h, inject, ref, watchEffect } from 'vue';\nimport { NInput } from '../../input';\nimport { colorPickerInjectionKey } from './context';\n// 0 - 255\nfunction normalizeRgbUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 255));\n    }\n    return false;\n}\n// 0 - 360\nfunction normalizeHueUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 360));\n    }\n    return false;\n}\n// 0 - 100\nfunction normalizeSlvUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value), 100));\n    }\n    return false;\n}\nfunction normalizeHexaUnit(value) {\n    const trimmedValue = value.trim();\n    if (/^#[0-9a-fA-F]+$/.test(trimmedValue)) {\n        return [4, 5, 7, 9].includes(trimmedValue.length);\n    }\n    return false;\n}\n// 0 - 100%\nfunction normalizeAlphaUnit(value) {\n    if (/^\\d{1,3}\\.?\\d*%$/.test(value.trim())) {\n        return Math.max(0, Math.min(parseInt(value) / 100, 100));\n    }\n    return false;\n}\nconst inputThemeOverrides = {\n    paddingSmall: '0 4px'\n};\nexport default defineComponent({\n    name: 'ColorInputUnit',\n    props: {\n        label: {\n            type: String,\n            required: true\n        },\n        value: {\n            type: [Number, String],\n            default: null\n        },\n        showAlpha: Boolean,\n        onUpdateValue: {\n            type: Function,\n            required: true\n        }\n    },\n    setup(props) {\n        const inputValueRef = ref('');\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { themeRef } = inject(colorPickerInjectionKey, null);\n        watchEffect(() => {\n            inputValueRef.value = getInputString();\n        });\n        function getInputString() {\n            const { value } = props;\n            if (value === null)\n                return '';\n            const { label } = props;\n            if (label === 'HEX') {\n                return value;\n            }\n            if (label === 'A') {\n                return `${Math.floor(value * 100)}%`;\n            }\n            return String(Math.floor(value));\n        }\n        function handleInputUpdateValue(value) {\n            inputValueRef.value = value;\n        }\n        function handleInputChange(value) {\n            let unit;\n            let valid;\n            switch (props.label) {\n                case 'HEX':\n                    valid = normalizeHexaUnit(value);\n                    if (valid) {\n                        props.onUpdateValue(value);\n                    }\n                    inputValueRef.value = getInputString(); // to normalized new value\n                    break;\n                case 'H':\n                    unit = normalizeHueUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'S':\n                case 'L':\n                case 'V':\n                    unit = normalizeSlvUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'A':\n                    unit = normalizeAlphaUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n                case 'R':\n                case 'G':\n                case 'B':\n                    unit = normalizeRgbUnit(value);\n                    if (unit === false) {\n                        inputValueRef.value = getInputString();\n                    }\n                    else {\n                        props.onUpdateValue(unit);\n                    }\n                    break;\n            }\n        }\n        return {\n            mergedTheme: themeRef,\n            inputValue: inputValueRef,\n            handleInputChange,\n            handleInputUpdateValue\n        };\n    },\n    render() {\n        const { mergedTheme } = this;\n        return (h(NInput, { size: \"small\", placeholder: this.label, theme: mergedTheme.peers.Input, themeOverrides: mergedTheme.peerOverrides.Input, builtinThemeOverrides: inputThemeOverrides, value: this.inputValue, onUpdateValue: this.handleInputUpdateValue, onChange: this.handleInputChange, \n            // add more space for xxx% input\n            style: this.label === 'A' ? 'flex-grow: 1.25;' : '' }));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}