{"ast":null,"code":"import { h, toRef, ref, inject, defineComponent, watch } from 'vue';\nimport { useMemo } from 'vooks';\nimport { useInjectionCollection, useInjectionElementCollection } from '../../_utils/composable';\nimport { createInjectionKey, getTitleAttribute } from '../../_utils';\nexport const anchorInjectionKey = createInjectionKey('n-anchor');\nexport const anchorLinkProps = {\n  title: String,\n  href: String\n};\nexport default defineComponent({\n  name: 'AnchorLink',\n  props: anchorLinkProps,\n\n  setup(props, {\n    slots\n  }) {\n    const titleRef = ref(null); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n    const NAnchor = inject(anchorInjectionKey);\n    const hrefRef = toRef(props, 'href');\n    const activeRef = useMemo(() => {\n      return hrefRef.value && hrefRef.value === NAnchor.activeHref.value;\n    });\n    useInjectionCollection(anchorInjectionKey, 'collectedLinkHrefs', hrefRef);\n    useInjectionElementCollection(anchorInjectionKey, 'titleEls', () => titleRef.value);\n    watch(activeRef, value => {\n      if (value && titleRef.value) {\n        NAnchor.updateBarPosition(titleRef.value);\n      }\n    });\n\n    function handleClick() {\n      if (props.href !== undefined) {\n        NAnchor.setActiveHref(props.href);\n      }\n    }\n\n    return () => {\n      var _a;\n\n      const {\n        value: mergedClsPrefix\n      } = NAnchor.mergedClsPrefix;\n      return h(\"div\", {\n        class: [`${mergedClsPrefix}-anchor-link`, activeRef.value && `${mergedClsPrefix}-anchor-link--active`]\n      }, h(\"a\", {\n        ref: titleRef,\n        class: [`${mergedClsPrefix}-anchor-link__title`],\n        href: props.href,\n        title: getTitleAttribute(props.title),\n        onClick: handleClick\n      }, props.title), (_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots));\n    };\n  }\n\n});","map":{"version":3,"names":["h","toRef","ref","inject","defineComponent","watch","useMemo","useInjectionCollection","useInjectionElementCollection","createInjectionKey","getTitleAttribute","anchorInjectionKey","anchorLinkProps","title","String","href","name","props","setup","slots","titleRef","NAnchor","hrefRef","activeRef","value","activeHref","updateBarPosition","handleClick","undefined","setActiveHref","_a","mergedClsPrefix","class","onClick","default","call"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/anchor/src/Link.js"],"sourcesContent":["import { h, toRef, ref, inject, defineComponent, watch } from 'vue';\nimport { useMemo } from 'vooks';\nimport { useInjectionCollection, useInjectionElementCollection } from '../../_utils/composable';\nimport { createInjectionKey, getTitleAttribute } from '../../_utils';\nexport const anchorInjectionKey = createInjectionKey('n-anchor');\nexport const anchorLinkProps = {\n    title: String,\n    href: String\n};\nexport default defineComponent({\n    name: 'AnchorLink',\n    props: anchorLinkProps,\n    setup(props, { slots }) {\n        const titleRef = ref(null);\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const NAnchor = inject(anchorInjectionKey);\n        const hrefRef = toRef(props, 'href');\n        const activeRef = useMemo(() => {\n            return hrefRef.value && hrefRef.value === NAnchor.activeHref.value;\n        });\n        useInjectionCollection(anchorInjectionKey, 'collectedLinkHrefs', hrefRef);\n        useInjectionElementCollection(anchorInjectionKey, 'titleEls', () => titleRef.value);\n        watch(activeRef, (value) => {\n            if (value && titleRef.value) {\n                NAnchor.updateBarPosition(titleRef.value);\n            }\n        });\n        function handleClick() {\n            if (props.href !== undefined) {\n                NAnchor.setActiveHref(props.href);\n            }\n        }\n        return () => {\n            var _a;\n            const { value: mergedClsPrefix } = NAnchor.mergedClsPrefix;\n            return (h(\"div\", { class: [\n                    `${mergedClsPrefix}-anchor-link`,\n                    activeRef.value && `${mergedClsPrefix}-anchor-link--active`\n                ] },\n                h(\"a\", { ref: titleRef, class: [`${mergedClsPrefix}-anchor-link__title`], href: props.href, title: getTitleAttribute(props.title), onClick: handleClick }, props.title), (_a = slots.default) === null || _a === void 0 ? void 0 :\n                _a.call(slots)));\n        };\n    }\n});\n"],"mappings":"AAAA,SAASA,CAAT,EAAYC,KAAZ,EAAmBC,GAAnB,EAAwBC,MAAxB,EAAgCC,eAAhC,EAAiDC,KAAjD,QAA8D,KAA9D;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,sBAAT,EAAiCC,6BAAjC,QAAsE,yBAAtE;AACA,SAASC,kBAAT,EAA6BC,iBAA7B,QAAsD,cAAtD;AACA,OAAO,MAAMC,kBAAkB,GAAGF,kBAAkB,CAAC,UAAD,CAA7C;AACP,OAAO,MAAMG,eAAe,GAAG;EAC3BC,KAAK,EAAEC,MADoB;EAE3BC,IAAI,EAAED;AAFqB,CAAxB;AAIP,eAAeV,eAAe,CAAC;EAC3BY,IAAI,EAAE,YADqB;EAE3BC,KAAK,EAAEL,eAFoB;;EAG3BM,KAAK,CAACD,KAAD,EAAQ;IAAEE;EAAF,CAAR,EAAmB;IACpB,MAAMC,QAAQ,GAAGlB,GAAG,CAAC,IAAD,CAApB,CADoB,CAEpB;;IACA,MAAMmB,OAAO,GAAGlB,MAAM,CAACQ,kBAAD,CAAtB;IACA,MAAMW,OAAO,GAAGrB,KAAK,CAACgB,KAAD,EAAQ,MAAR,CAArB;IACA,MAAMM,SAAS,GAAGjB,OAAO,CAAC,MAAM;MAC5B,OAAOgB,OAAO,CAACE,KAAR,IAAiBF,OAAO,CAACE,KAAR,KAAkBH,OAAO,CAACI,UAAR,CAAmBD,KAA7D;IACH,CAFwB,CAAzB;IAGAjB,sBAAsB,CAACI,kBAAD,EAAqB,oBAArB,EAA2CW,OAA3C,CAAtB;IACAd,6BAA6B,CAACG,kBAAD,EAAqB,UAArB,EAAiC,MAAMS,QAAQ,CAACI,KAAhD,CAA7B;IACAnB,KAAK,CAACkB,SAAD,EAAaC,KAAD,IAAW;MACxB,IAAIA,KAAK,IAAIJ,QAAQ,CAACI,KAAtB,EAA6B;QACzBH,OAAO,CAACK,iBAAR,CAA0BN,QAAQ,CAACI,KAAnC;MACH;IACJ,CAJI,CAAL;;IAKA,SAASG,WAAT,GAAuB;MACnB,IAAIV,KAAK,CAACF,IAAN,KAAea,SAAnB,EAA8B;QAC1BP,OAAO,CAACQ,aAAR,CAAsBZ,KAAK,CAACF,IAA5B;MACH;IACJ;;IACD,OAAO,MAAM;MACT,IAAIe,EAAJ;;MACA,MAAM;QAAEN,KAAK,EAAEO;MAAT,IAA6BV,OAAO,CAACU,eAA3C;MACA,OAAQ/B,CAAC,CAAC,KAAD,EAAQ;QAAEgC,KAAK,EAAE,CACjB,GAAED,eAAgB,cADD,EAElBR,SAAS,CAACC,KAAV,IAAoB,GAAEO,eAAgB,sBAFpB;MAAT,CAAR,EAIL/B,CAAC,CAAC,GAAD,EAAM;QAAEE,GAAG,EAAEkB,QAAP;QAAiBY,KAAK,EAAE,CAAE,GAAED,eAAgB,qBAApB,CAAxB;QAAmEhB,IAAI,EAAEE,KAAK,CAACF,IAA/E;QAAqFF,KAAK,EAAEH,iBAAiB,CAACO,KAAK,CAACJ,KAAP,CAA7G;QAA4HoB,OAAO,EAAEN;MAArI,CAAN,EAA0JV,KAAK,CAACJ,KAAhK,CAJI,EAIoK,CAACiB,EAAE,GAAGX,KAAK,CAACe,OAAZ,MAAyB,IAAzB,IAAiCJ,EAAE,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GACzKA,EAAE,CAACK,IAAH,CAAQhB,KAAR,CALK,CAAT;IAMH,CATD;EAUH;;AAjC0B,CAAD,CAA9B"},"metadata":{},"sourceType":"module"}