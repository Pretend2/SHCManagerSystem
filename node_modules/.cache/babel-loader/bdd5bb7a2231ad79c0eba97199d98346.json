{"ast":null,"code":"import { h, defineComponent, ref, watchEffect } from 'vue';\nimport { onFontsReady } from 'vooks';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { isBrowser, warnOnce } from '../../_utils';\nimport { watermarkLight } from '../styles';\nimport style from './styles/index.cssr';\n\nfunction getRatio(context) {\n  if (!context) {\n    return 1;\n  }\n\n  const backingStore = context.backingStorePixelRatio || context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n  return (window.devicePixelRatio || 1) / backingStore;\n}\n\nexport const watermarkProps = Object.assign(Object.assign({}, useTheme.props), {\n  debug: Boolean,\n  cross: Boolean,\n  fullscreen: Boolean,\n  width: {\n    type: Number,\n    default: 32\n  },\n  height: {\n    type: Number,\n    default: 32\n  },\n  zIndex: {\n    type: Number,\n    default: 10\n  },\n  xGap: {\n    type: Number,\n    default: 0\n  },\n  yGap: {\n    type: Number,\n    default: 0\n  },\n  yOffset: {\n    type: Number,\n    default: 0\n  },\n  xOffset: {\n    type: Number,\n    default: 0\n  },\n  rotate: {\n    type: Number,\n    default: 0\n  },\n  image: String,\n  imageOpacity: {\n    type: Number,\n    default: 1\n  },\n  imageHeight: Number,\n  imageWidth: Number,\n  content: String,\n  selectable: {\n    type: Boolean,\n    default: true\n  },\n  fontSize: {\n    type: Number,\n    default: 14\n  },\n  fontFamily: String,\n  fontStyle: {\n    type: String,\n    default: 'normal'\n  },\n  fontVariant: {\n    type: String,\n    default: ''\n  },\n  fontWeight: {\n    type: Number,\n    default: 400\n  },\n  fontColor: {\n    type: String,\n    default: 'rgba(128, 128, 128, .3)'\n  },\n  fontStretch: {\n    type: String,\n    default: ''\n  },\n  lineHeight: {\n    type: Number,\n    default: 14\n  },\n  globalRotate: {\n    type: Number,\n    default: 0\n  }\n});\nexport default defineComponent({\n  name: 'Watermark',\n  props: watermarkProps,\n\n  setup(props, {\n    slots\n  }) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    const themeRef = useTheme('Watermark', '-watermark', style, watermarkLight, props, mergedClsPrefixRef);\n    const base64UrlRef = ref('');\n    const canvas = isBrowser ? document.createElement('canvas') : null;\n    const ctx = canvas ? canvas.getContext('2d') : null;\n    const fontsReadyRef = ref(false);\n    onFontsReady(() => fontsReadyRef.value = true);\n    watchEffect(() => {\n      if (!canvas) return;\n      void fontsReadyRef.value;\n      const ratio = getRatio(ctx);\n      const {\n        xGap,\n        yGap,\n        width,\n        height,\n        yOffset,\n        xOffset,\n        rotate,\n        image,\n        content,\n        fontColor,\n        fontStyle,\n        fontVariant,\n        fontStretch,\n        fontWeight,\n        fontFamily,\n        fontSize,\n        lineHeight,\n        debug\n      } = props;\n      const canvasWidth = (xGap + width) * ratio;\n      const canvasHeight = (yGap + height) * ratio;\n      const canvasOffsetLeft = xOffset * ratio;\n      const canvasOffsetTop = yOffset * ratio;\n      canvas.width = canvasWidth;\n      canvas.height = canvasHeight;\n\n      if (ctx) {\n        ctx.translate(0, 0);\n        const markWidth = width * ratio;\n        const markHeight = height * ratio;\n\n        if (debug) {\n          ctx.strokeStyle = 'grey';\n          ctx.strokeRect(0, 0, markWidth, markHeight);\n        }\n\n        ctx.rotate(rotate * (Math.PI / 180));\n\n        if (image) {\n          const img = new Image();\n          img.crossOrigin = 'anonymous';\n          img.referrerPolicy = 'no-referrer';\n          img.src = image;\n\n          img.onload = () => {\n            ctx.globalAlpha = props.imageOpacity;\n            const {\n              imageWidth,\n              imageHeight\n            } = props;\n            ctx.drawImage(img, canvasOffsetLeft, canvasOffsetTop, (props.imageWidth || (imageHeight ? img.width * imageHeight / img.height : img.width)) * ratio, (props.imageHeight || (imageWidth ? img.height * imageWidth / img.width : img.height)) * ratio);\n            base64UrlRef.value = canvas.toDataURL();\n          };\n        } else if (content) {\n          if (debug) {\n            ctx.strokeStyle = 'green';\n            ctx.strokeRect(0, 0, markWidth, markHeight);\n          }\n\n          ctx.font = `${fontStyle} ${fontVariant} ${fontWeight} ${fontStretch} ${fontSize * ratio}px/${lineHeight * ratio}px ${fontFamily || themeRef.value.self.fontFamily}`;\n          ctx.fillStyle = fontColor;\n          ctx.fillText(content, canvasOffsetLeft, canvasOffsetTop + lineHeight * ratio);\n          base64UrlRef.value = canvas.toDataURL();\n        }\n      } else {\n        warnOnce('watermark', 'Canvas is not supported in the browser.');\n      }\n    });\n    return () => {\n      var _a;\n\n      const {\n        globalRotate,\n        fullscreen,\n        zIndex\n      } = props;\n      const mergedClsPrefix = mergedClsPrefixRef.value;\n      const isFullScreenGlobalRotate = globalRotate !== 0 && fullscreen;\n      const rotatedImageOffset = 'max(142vh, 142vw)';\n      const watermarkNode = h(\"div\", {\n        class: [`${mergedClsPrefix}-watermark`, globalRotate !== 0 && `${mergedClsPrefix}-watermark--global-rotate`, fullscreen && `${mergedClsPrefix}-watermark--fullscreen`],\n        style: {\n          transform: globalRotate ? `translateX(-50%) translateY(-50%) rotate(${globalRotate}deg)` : undefined,\n          zIndex: isFullScreenGlobalRotate ? undefined : zIndex,\n          backgroundSize: `${props.xGap + props.width}px`,\n          backgroundPosition: globalRotate === 0 ? props.cross ? `${props.width / 2}px ${props.height / 2}px, 0 0` : '' : props.cross ? `calc(${rotatedImageOffset} + ${props.width / 2}px) calc(${rotatedImageOffset} + ${props.height / 2}px), ${rotatedImageOffset} ${rotatedImageOffset}` : rotatedImageOffset,\n          backgroundImage: props.cross ? `url(${base64UrlRef.value}), url(${base64UrlRef.value})` : `url(${base64UrlRef.value})`\n        }\n      });\n      if (props.fullscreen && !globalRotate) return watermarkNode;\n      return h(\"div\", {\n        class: [`${mergedClsPrefix}-watermark-container`, globalRotate !== 0 && `${mergedClsPrefix}-watermark-container--global-rotate`, fullscreen && `${mergedClsPrefix}-watermark-container--fullscreen`, props.selectable && `${mergedClsPrefix}-watermark-container--selectable`],\n        style: {\n          zIndex: isFullScreenGlobalRotate ? zIndex : undefined\n        }\n      }, (_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots), watermarkNode);\n    };\n  }\n\n});","map":{"version":3,"names":["h","defineComponent","ref","watchEffect","onFontsReady","useConfig","useTheme","isBrowser","warnOnce","watermarkLight","style","getRatio","context","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","window","devicePixelRatio","watermarkProps","Object","assign","props","debug","Boolean","cross","fullscreen","width","type","Number","default","height","zIndex","xGap","yGap","yOffset","xOffset","rotate","image","String","imageOpacity","imageHeight","imageWidth","content","selectable","fontSize","fontFamily","fontStyle","fontVariant","fontWeight","fontColor","fontStretch","lineHeight","globalRotate","name","setup","slots","mergedClsPrefixRef","themeRef","base64UrlRef","canvas","document","createElement","ctx","getContext","fontsReadyRef","value","ratio","canvasWidth","canvasHeight","canvasOffsetLeft","canvasOffsetTop","translate","markWidth","markHeight","strokeStyle","strokeRect","Math","PI","img","Image","crossOrigin","referrerPolicy","src","onload","globalAlpha","drawImage","toDataURL","font","self","fillStyle","fillText","_a","mergedClsPrefix","isFullScreenGlobalRotate","rotatedImageOffset","watermarkNode","class","transform","undefined","backgroundSize","backgroundPosition","backgroundImage","call"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/watermark/src/Watermark.js"],"sourcesContent":["import { h, defineComponent, ref, watchEffect } from 'vue';\nimport { onFontsReady } from 'vooks';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { isBrowser, warnOnce } from '../../_utils';\nimport { watermarkLight } from '../styles';\nimport style from './styles/index.cssr';\nfunction getRatio(context) {\n    if (!context) {\n        return 1;\n    }\n    const backingStore = context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n    return (window.devicePixelRatio || 1) / backingStore;\n}\nexport const watermarkProps = Object.assign(Object.assign({}, useTheme.props), { debug: Boolean, cross: Boolean, fullscreen: Boolean, width: {\n        type: Number,\n        default: 32\n    }, height: {\n        type: Number,\n        default: 32\n    }, zIndex: {\n        type: Number,\n        default: 10\n    }, xGap: {\n        type: Number,\n        default: 0\n    }, yGap: {\n        type: Number,\n        default: 0\n    }, yOffset: {\n        type: Number,\n        default: 0\n    }, xOffset: {\n        type: Number,\n        default: 0\n    }, rotate: {\n        type: Number,\n        default: 0\n    }, image: String, imageOpacity: { type: Number, default: 1 }, imageHeight: Number, imageWidth: Number, content: String, selectable: {\n        type: Boolean,\n        default: true\n    }, fontSize: {\n        type: Number,\n        default: 14\n    }, fontFamily: String, fontStyle: {\n        type: String,\n        default: 'normal'\n    }, fontVariant: {\n        type: String,\n        default: ''\n    }, fontWeight: {\n        type: Number,\n        default: 400\n    }, fontColor: {\n        type: String,\n        default: 'rgba(128, 128, 128, .3)'\n    }, fontStretch: {\n        type: String,\n        default: ''\n    }, lineHeight: {\n        type: Number,\n        default: 14\n    }, globalRotate: {\n        type: Number,\n        default: 0\n    } });\nexport default defineComponent({\n    name: 'Watermark',\n    props: watermarkProps,\n    setup(props, { slots }) {\n        const { mergedClsPrefixRef } = useConfig(props);\n        const themeRef = useTheme('Watermark', '-watermark', style, watermarkLight, props, mergedClsPrefixRef);\n        const base64UrlRef = ref('');\n        const canvas = isBrowser ? document.createElement('canvas') : null;\n        const ctx = canvas ? canvas.getContext('2d') : null;\n        const fontsReadyRef = ref(false);\n        onFontsReady(() => (fontsReadyRef.value = true));\n        watchEffect(() => {\n            if (!canvas)\n                return;\n            void fontsReadyRef.value;\n            const ratio = getRatio(ctx);\n            const { xGap, yGap, width, height, yOffset, xOffset, rotate, image, content, fontColor, fontStyle, fontVariant, fontStretch, fontWeight, fontFamily, fontSize, lineHeight, debug } = props;\n            const canvasWidth = (xGap + width) * ratio;\n            const canvasHeight = (yGap + height) * ratio;\n            const canvasOffsetLeft = xOffset * ratio;\n            const canvasOffsetTop = yOffset * ratio;\n            canvas.width = canvasWidth;\n            canvas.height = canvasHeight;\n            if (ctx) {\n                ctx.translate(0, 0);\n                const markWidth = width * ratio;\n                const markHeight = height * ratio;\n                if (debug) {\n                    ctx.strokeStyle = 'grey';\n                    ctx.strokeRect(0, 0, markWidth, markHeight);\n                }\n                ctx.rotate(rotate * (Math.PI / 180));\n                if (image) {\n                    const img = new Image();\n                    img.crossOrigin = 'anonymous';\n                    img.referrerPolicy = 'no-referrer';\n                    img.src = image;\n                    img.onload = () => {\n                        ctx.globalAlpha = props.imageOpacity;\n                        const { imageWidth, imageHeight } = props;\n                        ctx.drawImage(img, canvasOffsetLeft, canvasOffsetTop, (props.imageWidth ||\n                            (imageHeight\n                                ? (img.width * imageHeight) / img.height\n                                : img.width)) * ratio, (props.imageHeight ||\n                            (imageWidth\n                                ? (img.height * imageWidth) / img.width\n                                : img.height)) * ratio);\n                        base64UrlRef.value = canvas.toDataURL();\n                    };\n                }\n                else if (content) {\n                    if (debug) {\n                        ctx.strokeStyle = 'green';\n                        ctx.strokeRect(0, 0, markWidth, markHeight);\n                    }\n                    ctx.font = `${fontStyle} ${fontVariant} ${fontWeight} ${fontStretch} ${fontSize * ratio}px/${lineHeight * ratio}px ${fontFamily || themeRef.value.self.fontFamily}`;\n                    ctx.fillStyle = fontColor;\n                    ctx.fillText(content, canvasOffsetLeft, canvasOffsetTop + lineHeight * ratio);\n                    base64UrlRef.value = canvas.toDataURL();\n                }\n            }\n            else {\n                warnOnce('watermark', 'Canvas is not supported in the browser.');\n            }\n        });\n        return () => {\n            var _a;\n            const { globalRotate, fullscreen, zIndex } = props;\n            const mergedClsPrefix = mergedClsPrefixRef.value;\n            const isFullScreenGlobalRotate = globalRotate !== 0 && fullscreen;\n            const rotatedImageOffset = 'max(142vh, 142vw)';\n            const watermarkNode = (h(\"div\", { class: [\n                    `${mergedClsPrefix}-watermark`,\n                    globalRotate !== 0 && `${mergedClsPrefix}-watermark--global-rotate`,\n                    fullscreen && `${mergedClsPrefix}-watermark--fullscreen`\n                ], style: {\n                    transform: globalRotate\n                        ? `translateX(-50%) translateY(-50%) rotate(${globalRotate}deg)`\n                        : undefined,\n                    zIndex: isFullScreenGlobalRotate ? undefined : zIndex,\n                    backgroundSize: `${props.xGap + props.width}px`,\n                    backgroundPosition: globalRotate === 0\n                        ? props.cross\n                            ? `${props.width / 2}px ${props.height / 2}px, 0 0`\n                            : ''\n                        : props.cross\n                            ? `calc(${rotatedImageOffset} + ${props.width / 2}px) calc(${rotatedImageOffset} + ${props.height / 2}px), ${rotatedImageOffset} ${rotatedImageOffset}`\n                            : rotatedImageOffset,\n                    backgroundImage: props.cross\n                        ? `url(${base64UrlRef.value}), url(${base64UrlRef.value})`\n                        : `url(${base64UrlRef.value})`\n                } }));\n            if (props.fullscreen && !globalRotate)\n                return watermarkNode;\n            return (h(\"div\", { class: [\n                    `${mergedClsPrefix}-watermark-container`,\n                    globalRotate !== 0 &&\n                        `${mergedClsPrefix}-watermark-container--global-rotate`,\n                    fullscreen && `${mergedClsPrefix}-watermark-container--fullscreen`,\n                    props.selectable &&\n                        `${mergedClsPrefix}-watermark-container--selectable`\n                ], style: {\n                    zIndex: isFullScreenGlobalRotate ? zIndex : undefined\n                } }, (_a = slots.default) === null || _a === void 0 ? void 0 :\n                _a.call(slots),\n                watermarkNode));\n        };\n    }\n});\n"],"mappings":"AAAA,SAASA,CAAT,EAAYC,eAAZ,EAA6BC,GAA7B,EAAkCC,WAAlC,QAAqD,KAArD;AACA,SAASC,YAAT,QAA6B,OAA7B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,eAApC;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,cAApC;AACA,SAASC,cAAT,QAA+B,WAA/B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;;AACA,SAASC,QAAT,CAAkBC,OAAlB,EAA2B;EACvB,IAAI,CAACA,OAAL,EAAc;IACV,OAAO,CAAP;EACH;;EACD,MAAMC,YAAY,GAAGD,OAAO,CAACE,sBAAR,IACjBF,OAAO,CAACG,4BADS,IAEjBH,OAAO,CAACI,yBAFS,IAGjBJ,OAAO,CAACK,wBAHS,IAIjBL,OAAO,CAACM,uBAJS,IAKjBN,OAAO,CAACE,sBALS,IAMjB,CANJ;EAOA,OAAO,CAACK,MAAM,CAACC,gBAAP,IAA2B,CAA5B,IAAiCP,YAAxC;AACH;;AACD,OAAO,MAAMQ,cAAc,GAAGC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBjB,QAAQ,CAACkB,KAA3B,CAAd,EAAiD;EAAEC,KAAK,EAAEC,OAAT;EAAkBC,KAAK,EAAED,OAAzB;EAAkCE,UAAU,EAAEF,OAA9C;EAAuDG,KAAK,EAAE;IACrIC,IAAI,EAAEC,MAD+H;IAErIC,OAAO,EAAE;EAF4H,CAA9D;EAGxEC,MAAM,EAAE;IACPH,IAAI,EAAEC,MADC;IAEPC,OAAO,EAAE;EAFF,CAHgE;EAMxEE,MAAM,EAAE;IACPJ,IAAI,EAAEC,MADC;IAEPC,OAAO,EAAE;EAFF,CANgE;EASxEG,IAAI,EAAE;IACLL,IAAI,EAAEC,MADD;IAELC,OAAO,EAAE;EAFJ,CATkE;EAYxEI,IAAI,EAAE;IACLN,IAAI,EAAEC,MADD;IAELC,OAAO,EAAE;EAFJ,CAZkE;EAexEK,OAAO,EAAE;IACRP,IAAI,EAAEC,MADE;IAERC,OAAO,EAAE;EAFD,CAf+D;EAkBxEM,OAAO,EAAE;IACRR,IAAI,EAAEC,MADE;IAERC,OAAO,EAAE;EAFD,CAlB+D;EAqBxEO,MAAM,EAAE;IACPT,IAAI,EAAEC,MADC;IAEPC,OAAO,EAAE;EAFF,CArBgE;EAwBxEQ,KAAK,EAAEC,MAxBiE;EAwBzDC,YAAY,EAAE;IAAEZ,IAAI,EAAEC,MAAR;IAAgBC,OAAO,EAAE;EAAzB,CAxB2C;EAwBbW,WAAW,EAAEZ,MAxBA;EAwBQa,UAAU,EAAEb,MAxBpB;EAwB4Bc,OAAO,EAAEJ,MAxBrC;EAwB6CK,UAAU,EAAE;IAChIhB,IAAI,EAAEJ,OAD0H;IAEhIM,OAAO,EAAE;EAFuH,CAxBzD;EA2BxEe,QAAQ,EAAE;IACTjB,IAAI,EAAEC,MADG;IAETC,OAAO,EAAE;EAFA,CA3B8D;EA8BxEgB,UAAU,EAAEP,MA9B4D;EA8BpDQ,SAAS,EAAE;IAC9BnB,IAAI,EAAEW,MADwB;IAE9BT,OAAO,EAAE;EAFqB,CA9ByC;EAiCxEkB,WAAW,EAAE;IACZpB,IAAI,EAAEW,MADM;IAEZT,OAAO,EAAE;EAFG,CAjC2D;EAoCxEmB,UAAU,EAAE;IACXrB,IAAI,EAAEC,MADK;IAEXC,OAAO,EAAE;EAFE,CApC4D;EAuCxEoB,SAAS,EAAE;IACVtB,IAAI,EAAEW,MADI;IAEVT,OAAO,EAAE;EAFC,CAvC6D;EA0CxEqB,WAAW,EAAE;IACZvB,IAAI,EAAEW,MADM;IAEZT,OAAO,EAAE;EAFG,CA1C2D;EA6CxEsB,UAAU,EAAE;IACXxB,IAAI,EAAEC,MADK;IAEXC,OAAO,EAAE;EAFE,CA7C4D;EAgDxEuB,YAAY,EAAE;IACbzB,IAAI,EAAEC,MADO;IAEbC,OAAO,EAAE;EAFI;AAhD0D,CAAjD,CAAvB;AAoDP,eAAe/B,eAAe,CAAC;EAC3BuD,IAAI,EAAE,WADqB;EAE3BhC,KAAK,EAAEH,cAFoB;;EAG3BoC,KAAK,CAACjC,KAAD,EAAQ;IAAEkC;EAAF,CAAR,EAAmB;IACpB,MAAM;MAAEC;IAAF,IAAyBtD,SAAS,CAACmB,KAAD,CAAxC;IACA,MAAMoC,QAAQ,GAAGtD,QAAQ,CAAC,WAAD,EAAc,YAAd,EAA4BI,KAA5B,EAAmCD,cAAnC,EAAmDe,KAAnD,EAA0DmC,kBAA1D,CAAzB;IACA,MAAME,YAAY,GAAG3D,GAAG,CAAC,EAAD,CAAxB;IACA,MAAM4D,MAAM,GAAGvD,SAAS,GAAGwD,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAH,GAAsC,IAA9D;IACA,MAAMC,GAAG,GAAGH,MAAM,GAAGA,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAH,GAA6B,IAA/C;IACA,MAAMC,aAAa,GAAGjE,GAAG,CAAC,KAAD,CAAzB;IACAE,YAAY,CAAC,MAAO+D,aAAa,CAACC,KAAd,GAAsB,IAA9B,CAAZ;IACAjE,WAAW,CAAC,MAAM;MACd,IAAI,CAAC2D,MAAL,EACI;MACJ,KAAKK,aAAa,CAACC,KAAnB;MACA,MAAMC,KAAK,GAAG1D,QAAQ,CAACsD,GAAD,CAAtB;MACA,MAAM;QAAE9B,IAAF;QAAQC,IAAR;QAAcP,KAAd;QAAqBI,MAArB;QAA6BI,OAA7B;QAAsCC,OAAtC;QAA+CC,MAA/C;QAAuDC,KAAvD;QAA8DK,OAA9D;QAAuEO,SAAvE;QAAkFH,SAAlF;QAA6FC,WAA7F;QAA0GG,WAA1G;QAAuHF,UAAvH;QAAmIH,UAAnI;QAA+ID,QAA/I;QAAyJO,UAAzJ;QAAqK7B;MAArK,IAA+KD,KAArL;MACA,MAAM8C,WAAW,GAAG,CAACnC,IAAI,GAAGN,KAAR,IAAiBwC,KAArC;MACA,MAAME,YAAY,GAAG,CAACnC,IAAI,GAAGH,MAAR,IAAkBoC,KAAvC;MACA,MAAMG,gBAAgB,GAAGlC,OAAO,GAAG+B,KAAnC;MACA,MAAMI,eAAe,GAAGpC,OAAO,GAAGgC,KAAlC;MACAP,MAAM,CAACjC,KAAP,GAAeyC,WAAf;MACAR,MAAM,CAAC7B,MAAP,GAAgBsC,YAAhB;;MACA,IAAIN,GAAJ,EAAS;QACLA,GAAG,CAACS,SAAJ,CAAc,CAAd,EAAiB,CAAjB;QACA,MAAMC,SAAS,GAAG9C,KAAK,GAAGwC,KAA1B;QACA,MAAMO,UAAU,GAAG3C,MAAM,GAAGoC,KAA5B;;QACA,IAAI5C,KAAJ,EAAW;UACPwC,GAAG,CAACY,WAAJ,GAAkB,MAAlB;UACAZ,GAAG,CAACa,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqBH,SAArB,EAAgCC,UAAhC;QACH;;QACDX,GAAG,CAAC1B,MAAJ,CAAWA,MAAM,IAAIwC,IAAI,CAACC,EAAL,GAAU,GAAd,CAAjB;;QACA,IAAIxC,KAAJ,EAAW;UACP,MAAMyC,GAAG,GAAG,IAAIC,KAAJ,EAAZ;UACAD,GAAG,CAACE,WAAJ,GAAkB,WAAlB;UACAF,GAAG,CAACG,cAAJ,GAAqB,aAArB;UACAH,GAAG,CAACI,GAAJ,GAAU7C,KAAV;;UACAyC,GAAG,CAACK,MAAJ,GAAa,MAAM;YACfrB,GAAG,CAACsB,WAAJ,GAAkB/D,KAAK,CAACkB,YAAxB;YACA,MAAM;cAAEE,UAAF;cAAcD;YAAd,IAA8BnB,KAApC;YACAyC,GAAG,CAACuB,SAAJ,CAAcP,GAAd,EAAmBT,gBAAnB,EAAqCC,eAArC,EAAsD,CAACjD,KAAK,CAACoB,UAAN,KAClDD,WAAW,GACLsC,GAAG,CAACpD,KAAJ,GAAYc,WAAb,GAA4BsC,GAAG,CAAChD,MAD1B,GAENgD,GAAG,CAACpD,KAHyC,CAAD,IAG9BwC,KAHxB,EAG+B,CAAC7C,KAAK,CAACmB,WAAN,KAC3BC,UAAU,GACJqC,GAAG,CAAChD,MAAJ,GAAaW,UAAd,GAA4BqC,GAAG,CAACpD,KAD3B,GAELoD,GAAG,CAAChD,MAHkB,CAAD,IAGNoC,KANzB;YAOAR,YAAY,CAACO,KAAb,GAAqBN,MAAM,CAAC2B,SAAP,EAArB;UACH,CAXD;QAYH,CAjBD,MAkBK,IAAI5C,OAAJ,EAAa;UACd,IAAIpB,KAAJ,EAAW;YACPwC,GAAG,CAACY,WAAJ,GAAkB,OAAlB;YACAZ,GAAG,CAACa,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqBH,SAArB,EAAgCC,UAAhC;UACH;;UACDX,GAAG,CAACyB,IAAJ,GAAY,GAAEzC,SAAU,IAAGC,WAAY,IAAGC,UAAW,IAAGE,WAAY,IAAGN,QAAQ,GAAGsB,KAAM,MAAKf,UAAU,GAAGe,KAAM,MAAKrB,UAAU,IAAIY,QAAQ,CAACQ,KAAT,CAAeuB,IAAf,CAAoB3C,UAAW,EAAlK;UACAiB,GAAG,CAAC2B,SAAJ,GAAgBxC,SAAhB;UACAa,GAAG,CAAC4B,QAAJ,CAAahD,OAAb,EAAsB2B,gBAAtB,EAAwCC,eAAe,GAAGnB,UAAU,GAAGe,KAAvE;UACAR,YAAY,CAACO,KAAb,GAAqBN,MAAM,CAAC2B,SAAP,EAArB;QACH;MACJ,CArCD,MAsCK;QACDjF,QAAQ,CAAC,WAAD,EAAc,yCAAd,CAAR;MACH;IACJ,CArDU,CAAX;IAsDA,OAAO,MAAM;MACT,IAAIsF,EAAJ;;MACA,MAAM;QAAEvC,YAAF;QAAgB3B,UAAhB;QAA4BM;MAA5B,IAAuCV,KAA7C;MACA,MAAMuE,eAAe,GAAGpC,kBAAkB,CAACS,KAA3C;MACA,MAAM4B,wBAAwB,GAAGzC,YAAY,KAAK,CAAjB,IAAsB3B,UAAvD;MACA,MAAMqE,kBAAkB,GAAG,mBAA3B;MACA,MAAMC,aAAa,GAAIlG,CAAC,CAAC,KAAD,EAAQ;QAAEmG,KAAK,EAAE,CAChC,GAAEJ,eAAgB,YADc,EAEjCxC,YAAY,KAAK,CAAjB,IAAuB,GAAEwC,eAAgB,2BAFR,EAGjCnE,UAAU,IAAK,GAAEmE,eAAgB,wBAHA,CAAT;QAIzBrF,KAAK,EAAE;UACN0F,SAAS,EAAE7C,YAAY,GAChB,4CAA2CA,YAAa,MADxC,GAEjB8C,SAHA;UAINnE,MAAM,EAAE8D,wBAAwB,GAAGK,SAAH,GAAenE,MAJzC;UAKNoE,cAAc,EAAG,GAAE9E,KAAK,CAACW,IAAN,GAAaX,KAAK,CAACK,KAAM,IALtC;UAMN0E,kBAAkB,EAAEhD,YAAY,KAAK,CAAjB,GACd/B,KAAK,CAACG,KAAN,GACK,GAAEH,KAAK,CAACK,KAAN,GAAc,CAAE,MAAKL,KAAK,CAACS,MAAN,GAAe,CAAE,SAD7C,GAEI,EAHU,GAIdT,KAAK,CAACG,KAAN,GACK,QAAOsE,kBAAmB,MAAKzE,KAAK,CAACK,KAAN,GAAc,CAAE,YAAWoE,kBAAmB,MAAKzE,KAAK,CAACS,MAAN,GAAe,CAAE,QAAOgE,kBAAmB,IAAGA,kBAAmB,EADxJ,GAEIA,kBAZJ;UAaNO,eAAe,EAAEhF,KAAK,CAACG,KAAN,GACV,OAAMkC,YAAY,CAACO,KAAM,UAASP,YAAY,CAACO,KAAM,GAD3C,GAEV,OAAMP,YAAY,CAACO,KAAM;QAf1B;MAJkB,CAAR,CAAxB;MAqBA,IAAI5C,KAAK,CAACI,UAAN,IAAoB,CAAC2B,YAAzB,EACI,OAAO2C,aAAP;MACJ,OAAQlG,CAAC,CAAC,KAAD,EAAQ;QAAEmG,KAAK,EAAE,CACjB,GAAEJ,eAAgB,sBADD,EAElBxC,YAAY,KAAK,CAAjB,IACK,GAAEwC,eAAgB,qCAHL,EAIlBnE,UAAU,IAAK,GAAEmE,eAAgB,kCAJf,EAKlBvE,KAAK,CAACsB,UAAN,IACK,GAAEiD,eAAgB,kCANL,CAAT;QAOVrF,KAAK,EAAE;UACNwB,MAAM,EAAE8D,wBAAwB,GAAG9D,MAAH,GAAYmE;QADtC;MAPG,CAAR,EASA,CAACP,EAAE,GAAGpC,KAAK,CAAC1B,OAAZ,MAAyB,IAAzB,IAAiC8D,EAAE,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GACLA,EAAE,CAACW,IAAH,CAAQ/C,KAAR,CAVK,EAWLwC,aAXK,CAAT;IAYH,CAzCD;EA0CH;;AA3G0B,CAAD,CAA9B"},"metadata":{},"sourceType":"module"}