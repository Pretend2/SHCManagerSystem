{"ast":null,"code":"import { ref, watch } from 'vue';\nexport function len(s) {\n  let count = 0; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  for (const _ of s) {\n    count++;\n  }\n\n  return count;\n}\nexport function isEmptyInputValue(value) {\n  return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n  const selectionRef = ref(null);\n\n  function recordCursor() {\n    const {\n      value: input\n    } = inputElRef;\n\n    if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n      reset();\n      return;\n    }\n\n    const {\n      selectionStart,\n      selectionEnd,\n      value\n    } = input;\n\n    if (selectionStart == null || selectionEnd == null) {\n      reset();\n      return;\n    }\n\n    selectionRef.value = {\n      start: selectionStart,\n      end: selectionEnd,\n      beforeText: value.slice(0, selectionStart),\n      afterText: value.slice(selectionEnd)\n    };\n  }\n\n  function restoreCursor() {\n    var _a;\n\n    const {\n      value: selection\n    } = selectionRef;\n    const {\n      value: inputEl\n    } = inputElRef;\n\n    if (!selection || !inputEl) {\n      return;\n    }\n\n    const {\n      value\n    } = inputEl;\n    const {\n      start,\n      beforeText,\n      afterText\n    } = selection;\n    let startPos = value.length;\n\n    if (value.endsWith(afterText)) {\n      startPos = value.length - afterText.length;\n    } else if (value.startsWith(beforeText)) {\n      startPos = beforeText.length;\n    } else {\n      const beforeLastChar = beforeText[start - 1];\n      const newIndex = value.indexOf(beforeLastChar, start - 1);\n\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n\n    (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n  }\n\n  function reset() {\n    selectionRef.value = null;\n  }\n\n  watch(inputElRef, reset);\n  return {\n    recordCursor,\n    restoreCursor\n  };\n}","map":{"version":3,"names":["ref","watch","len","s","count","_","isEmptyInputValue","value","useCursor","inputElRef","selectionRef","recordCursor","input","focus","reset","selectionStart","selectionEnd","start","end","beforeText","slice","afterText","restoreCursor","_a","selection","inputEl","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange","call"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/input/src/utils.js"],"sourcesContent":["import { ref, watch } from 'vue';\nexport function len(s) {\n    let count = 0;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const _ of s) {\n        count++;\n    }\n    return count;\n}\nexport function isEmptyInputValue(value) {\n    return value === '' || value == null;\n}\nexport function useCursor(inputElRef) {\n    const selectionRef = ref(null);\n    function recordCursor() {\n        const { value: input } = inputElRef;\n        if (!(input === null || input === void 0 ? void 0 : input.focus)) {\n            reset();\n            return;\n        }\n        const { selectionStart, selectionEnd, value } = input;\n        if (selectionStart == null || selectionEnd == null) {\n            reset();\n            return;\n        }\n        selectionRef.value = {\n            start: selectionStart,\n            end: selectionEnd,\n            beforeText: value.slice(0, selectionStart),\n            afterText: value.slice(selectionEnd)\n        };\n    }\n    function restoreCursor() {\n        var _a;\n        const { value: selection } = selectionRef;\n        const { value: inputEl } = inputElRef;\n        if (!selection || !inputEl) {\n            return;\n        }\n        const { value } = inputEl;\n        const { start, beforeText, afterText } = selection;\n        let startPos = value.length;\n        if (value.endsWith(afterText)) {\n            startPos = value.length - afterText.length;\n        }\n        else if (value.startsWith(beforeText)) {\n            startPos = beforeText.length;\n        }\n        else {\n            const beforeLastChar = beforeText[start - 1];\n            const newIndex = value.indexOf(beforeLastChar, start - 1);\n            if (newIndex !== -1) {\n                startPos = newIndex + 1;\n            }\n        }\n        (_a = inputEl.setSelectionRange) === null || _a === void 0 ? void 0 : _a.call(inputEl, startPos, startPos);\n    }\n    function reset() {\n        selectionRef.value = null;\n    }\n    watch(inputElRef, reset);\n    return {\n        recordCursor,\n        restoreCursor\n    };\n}\n"],"mappings":"AAAA,SAASA,GAAT,EAAcC,KAAd,QAA2B,KAA3B;AACA,OAAO,SAASC,GAAT,CAAaC,CAAb,EAAgB;EACnB,IAAIC,KAAK,GAAG,CAAZ,CADmB,CAEnB;;EACA,KAAK,MAAMC,CAAX,IAAgBF,CAAhB,EAAmB;IACfC,KAAK;EACR;;EACD,OAAOA,KAAP;AACH;AACD,OAAO,SAASE,iBAAT,CAA2BC,KAA3B,EAAkC;EACrC,OAAOA,KAAK,KAAK,EAAV,IAAgBA,KAAK,IAAI,IAAhC;AACH;AACD,OAAO,SAASC,SAAT,CAAmBC,UAAnB,EAA+B;EAClC,MAAMC,YAAY,GAAGV,GAAG,CAAC,IAAD,CAAxB;;EACA,SAASW,YAAT,GAAwB;IACpB,MAAM;MAAEJ,KAAK,EAAEK;IAAT,IAAmBH,UAAzB;;IACA,IAAI,EAAEG,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACC,KAAtD,CAAJ,EAAkE;MAC9DC,KAAK;MACL;IACH;;IACD,MAAM;MAAEC,cAAF;MAAkBC,YAAlB;MAAgCT;IAAhC,IAA0CK,KAAhD;;IACA,IAAIG,cAAc,IAAI,IAAlB,IAA0BC,YAAY,IAAI,IAA9C,EAAoD;MAChDF,KAAK;MACL;IACH;;IACDJ,YAAY,CAACH,KAAb,GAAqB;MACjBU,KAAK,EAAEF,cADU;MAEjBG,GAAG,EAAEF,YAFY;MAGjBG,UAAU,EAAEZ,KAAK,CAACa,KAAN,CAAY,CAAZ,EAAeL,cAAf,CAHK;MAIjBM,SAAS,EAAEd,KAAK,CAACa,KAAN,CAAYJ,YAAZ;IAJM,CAArB;EAMH;;EACD,SAASM,aAAT,GAAyB;IACrB,IAAIC,EAAJ;;IACA,MAAM;MAAEhB,KAAK,EAAEiB;IAAT,IAAuBd,YAA7B;IACA,MAAM;MAAEH,KAAK,EAAEkB;IAAT,IAAqBhB,UAA3B;;IACA,IAAI,CAACe,SAAD,IAAc,CAACC,OAAnB,EAA4B;MACxB;IACH;;IACD,MAAM;MAAElB;IAAF,IAAYkB,OAAlB;IACA,MAAM;MAAER,KAAF;MAASE,UAAT;MAAqBE;IAArB,IAAmCG,SAAzC;IACA,IAAIE,QAAQ,GAAGnB,KAAK,CAACoB,MAArB;;IACA,IAAIpB,KAAK,CAACqB,QAAN,CAAeP,SAAf,CAAJ,EAA+B;MAC3BK,QAAQ,GAAGnB,KAAK,CAACoB,MAAN,GAAeN,SAAS,CAACM,MAApC;IACH,CAFD,MAGK,IAAIpB,KAAK,CAACsB,UAAN,CAAiBV,UAAjB,CAAJ,EAAkC;MACnCO,QAAQ,GAAGP,UAAU,CAACQ,MAAtB;IACH,CAFI,MAGA;MACD,MAAMG,cAAc,GAAGX,UAAU,CAACF,KAAK,GAAG,CAAT,CAAjC;MACA,MAAMc,QAAQ,GAAGxB,KAAK,CAACyB,OAAN,CAAcF,cAAd,EAA8Bb,KAAK,GAAG,CAAtC,CAAjB;;MACA,IAAIc,QAAQ,KAAK,CAAC,CAAlB,EAAqB;QACjBL,QAAQ,GAAGK,QAAQ,GAAG,CAAtB;MACH;IACJ;;IACD,CAACR,EAAE,GAAGE,OAAO,CAACQ,iBAAd,MAAqC,IAArC,IAA6CV,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAACW,IAAH,CAAQT,OAAR,EAAiBC,QAAjB,EAA2BA,QAA3B,CAAtE;EACH;;EACD,SAASZ,KAAT,GAAiB;IACbJ,YAAY,CAACH,KAAb,GAAqB,IAArB;EACH;;EACDN,KAAK,CAACQ,UAAD,EAAaK,KAAb,CAAL;EACA,OAAO;IACHH,YADG;IAEHW;EAFG,CAAP;AAIH"},"metadata":{},"sourceType":"module"}