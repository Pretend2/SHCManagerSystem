{"ast":null,"code":"import { computed, defineComponent, h, inject, provide, ref } from 'vue';\nimport { renderArrow } from '../../popover/src/PopoverBody';\nimport { NxScrollbar } from '../../_internal/scrollbar';\nimport NDropdownDivider from './DropdownDivider'; // eslint-disable-next-line import/no-cycle\n\nimport NDropdownGroup from './DropdownGroup'; // eslint-disable-next-line import/no-cycle\n\nimport NDropdownOption from './DropdownOption';\nimport NDropdownRenderOption from './DropdownRenderOption';\nimport { isSubmenuNode, isGroupNode, isDividerNode, isRenderNode } from './utils';\nimport { dropdownInjectionKey, dropdownMenuInjectionKey } from './context';\nimport { modalBodyInjectionKey } from '../../modal/src/interface';\nimport { drawerBodyInjectionKey } from '../../drawer/src/interface';\nimport { popoverBodyInjectionKey } from '../../popover/src/interface';\nexport default defineComponent({\n  name: 'DropdownMenu',\n  props: {\n    scrollable: Boolean,\n    showArrow: Boolean,\n    arrowStyle: [String, Object],\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    tmNodes: {\n      type: Array,\n      default: () => []\n    },\n    parentKey: {\n      type: [String, Number],\n      default: null\n    }\n  },\n\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      renderIconRef,\n      childrenFieldRef\n    } = inject(dropdownInjectionKey);\n    provide(dropdownMenuInjectionKey, {\n      showIconRef: computed(() => {\n        const renderIcon = renderIconRef.value;\n        return props.tmNodes.some(tmNode => {\n          var _a;\n\n          if (tmNode.isGroup) {\n            return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({\n              rawNode: rawChild\n            }) => renderIcon ? renderIcon(rawChild) : rawChild.icon);\n          }\n\n          const {\n            rawNode\n          } = tmNode;\n          return renderIcon ? renderIcon(rawNode) : rawNode.icon;\n        });\n      }),\n      hasSubmenuRef: computed(() => {\n        const {\n          value: childrenField\n        } = childrenFieldRef;\n        return props.tmNodes.some(tmNode => {\n          var _a;\n\n          if (tmNode.isGroup) {\n            return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({\n              rawNode: rawChild\n            }) => isSubmenuNode(rawChild, childrenField));\n          }\n\n          const {\n            rawNode\n          } = tmNode;\n          return isSubmenuNode(rawNode, childrenField);\n        });\n      })\n    });\n    const bodyRef = ref(null);\n    provide(modalBodyInjectionKey, null);\n    provide(drawerBodyInjectionKey, null);\n    provide(popoverBodyInjectionKey, bodyRef);\n    return {\n      bodyRef\n    };\n  },\n\n  render() {\n    const {\n      parentKey,\n      clsPrefix,\n      scrollable\n    } = this;\n    const menuOptionsNode = this.tmNodes.map(tmNode => {\n      const {\n        rawNode\n      } = tmNode;\n      if (rawNode.show === false) return null;\n\n      if (isRenderNode(rawNode)) {\n        return h(NDropdownRenderOption, {\n          tmNode: tmNode,\n          key: tmNode.key\n        });\n      }\n\n      if (isDividerNode(rawNode)) {\n        return h(NDropdownDivider, {\n          clsPrefix: clsPrefix,\n          key: tmNode.key\n        });\n      }\n\n      if (isGroupNode(rawNode)) {\n        return h(NDropdownGroup, {\n          clsPrefix: clsPrefix,\n          tmNode: tmNode,\n          parentKey: parentKey,\n          key: tmNode.key\n        });\n      }\n\n      return h(NDropdownOption, {\n        clsPrefix: clsPrefix,\n        tmNode: tmNode,\n        parentKey: parentKey,\n        key: tmNode.key,\n        props: rawNode.props,\n        scrollable: scrollable\n      });\n    });\n    return h(\"div\", {\n      class: [`${clsPrefix}-dropdown-menu`, scrollable && `${clsPrefix}-dropdown-menu--scrollable`],\n      ref: \"bodyRef\"\n    }, scrollable ? h(NxScrollbar, {\n      contentClass: `${clsPrefix}-dropdown-menu__content`\n    }, {\n      default: () => menuOptionsNode\n    }) : menuOptionsNode, this.showArrow ? renderArrow({\n      clsPrefix,\n      arrowStyle: this.arrowStyle\n    }) : null);\n  }\n\n});","map":{"version":3,"names":["computed","defineComponent","h","inject","provide","ref","renderArrow","NxScrollbar","NDropdownDivider","NDropdownGroup","NDropdownOption","NDropdownRenderOption","isSubmenuNode","isGroupNode","isDividerNode","isRenderNode","dropdownInjectionKey","dropdownMenuInjectionKey","modalBodyInjectionKey","drawerBodyInjectionKey","popoverBodyInjectionKey","name","props","scrollable","Boolean","showArrow","arrowStyle","String","Object","clsPrefix","type","required","tmNodes","Array","default","parentKey","Number","setup","renderIconRef","childrenFieldRef","showIconRef","renderIcon","value","some","tmNode","_a","isGroup","children","rawNode","rawChild","icon","hasSubmenuRef","childrenField","bodyRef","render","menuOptionsNode","map","show","key","class","contentClass"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/dropdown/src/DropdownMenu.js"],"sourcesContent":["import { computed, defineComponent, h, inject, provide, ref } from 'vue';\nimport { renderArrow } from '../../popover/src/PopoverBody';\nimport { NxScrollbar } from '../../_internal/scrollbar';\nimport NDropdownDivider from './DropdownDivider';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownGroup from './DropdownGroup';\n// eslint-disable-next-line import/no-cycle\nimport NDropdownOption from './DropdownOption';\nimport NDropdownRenderOption from './DropdownRenderOption';\nimport { isSubmenuNode, isGroupNode, isDividerNode, isRenderNode } from './utils';\nimport { dropdownInjectionKey, dropdownMenuInjectionKey } from './context';\nimport { modalBodyInjectionKey } from '../../modal/src/interface';\nimport { drawerBodyInjectionKey } from '../../drawer/src/interface';\nimport { popoverBodyInjectionKey } from '../../popover/src/interface';\nexport default defineComponent({\n    name: 'DropdownMenu',\n    props: {\n        scrollable: Boolean,\n        showArrow: Boolean,\n        arrowStyle: [String, Object],\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        tmNodes: {\n            type: Array,\n            default: () => []\n        },\n        parentKey: {\n            type: [String, Number],\n            default: null\n        }\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { renderIconRef, childrenFieldRef } = inject(dropdownInjectionKey);\n        provide(dropdownMenuInjectionKey, {\n            showIconRef: computed(() => {\n                const renderIcon = renderIconRef.value;\n                return props.tmNodes.some((tmNode) => {\n                    var _a;\n                    if (tmNode.isGroup) {\n                        return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({ rawNode: rawChild }) => renderIcon ? renderIcon(rawChild) : rawChild.icon);\n                    }\n                    const { rawNode } = tmNode;\n                    return renderIcon ? renderIcon(rawNode) : rawNode.icon;\n                });\n            }),\n            hasSubmenuRef: computed(() => {\n                const { value: childrenField } = childrenFieldRef;\n                return props.tmNodes.some((tmNode) => {\n                    var _a;\n                    if (tmNode.isGroup) {\n                        return (_a = tmNode.children) === null || _a === void 0 ? void 0 : _a.some(({ rawNode: rawChild }) => isSubmenuNode(rawChild, childrenField));\n                    }\n                    const { rawNode } = tmNode;\n                    return isSubmenuNode(rawNode, childrenField);\n                });\n            })\n        });\n        const bodyRef = ref(null);\n        provide(modalBodyInjectionKey, null);\n        provide(drawerBodyInjectionKey, null);\n        provide(popoverBodyInjectionKey, bodyRef);\n        return {\n            bodyRef\n        };\n    },\n    render() {\n        const { parentKey, clsPrefix, scrollable } = this;\n        const menuOptionsNode = this.tmNodes.map((tmNode) => {\n            const { rawNode } = tmNode;\n            if (rawNode.show === false)\n                return null;\n            if (isRenderNode(rawNode)) {\n                return (h(NDropdownRenderOption, { tmNode: tmNode, key: tmNode.key }));\n            }\n            if (isDividerNode(rawNode)) {\n                return h(NDropdownDivider, { clsPrefix: clsPrefix, key: tmNode.key });\n            }\n            if (isGroupNode(rawNode)) {\n                return (h(NDropdownGroup, { clsPrefix: clsPrefix, tmNode: tmNode, parentKey: parentKey, key: tmNode.key }));\n            }\n            return (h(NDropdownOption, { clsPrefix: clsPrefix, tmNode: tmNode, parentKey: parentKey, key: tmNode.key, props: rawNode.props, scrollable: scrollable }));\n        });\n        return (h(\"div\", { class: [\n                `${clsPrefix}-dropdown-menu`,\n                scrollable && `${clsPrefix}-dropdown-menu--scrollable`\n            ], ref: \"bodyRef\" },\n            scrollable ? (h(NxScrollbar, { contentClass: `${clsPrefix}-dropdown-menu__content` }, {\n                default: () => menuOptionsNode\n            })) : (menuOptionsNode),\n            this.showArrow\n                ? renderArrow({\n                    clsPrefix,\n                    arrowStyle: this.arrowStyle\n                })\n                : null));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}