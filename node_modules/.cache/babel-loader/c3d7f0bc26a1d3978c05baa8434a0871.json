{"ast":null,"code":"import { h, ref, onMounted, computed, defineComponent, toRef, provide, nextTick, watch, onBeforeUnmount } from 'vue';\nimport { createIndexGetter } from 'treemate';\nimport { VirtualList } from 'vueuc';\nimport { depx, getPadding, happensIn } from 'seemly';\nimport { NEmpty } from '../../../empty';\nimport { NScrollbar } from '../../scrollbar';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../../_utils';\nimport { createKey } from '../../../_utils/cssr';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport NInternalLoading from '../../loading';\nimport NFocusDetector from '../../focus-detector';\nimport { internalSelectMenuLight } from '../styles';\nimport NSelectOption from './SelectOption';\nimport NSelectGroupHeader from './SelectGroupHeader';\nimport { internalSelectionMenuInjectionKey, internalSelectionMenuBodyInjectionKey } from './interface';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n  name: 'InternalSelectMenu',\n  props: Object.assign(Object.assign({}, useTheme.props), {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    scrollable: {\n      type: Boolean,\n      default: true\n    },\n    treeMate: {\n      type: Object,\n      required: true\n    },\n    multiple: Boolean,\n    size: {\n      type: String,\n      default: 'medium'\n    },\n    value: {\n      type: [String, Number, Array],\n      default: null\n    },\n    autoPending: Boolean,\n    virtualScroll: {\n      type: Boolean,\n      default: true\n    },\n    // show is used to toggle pending state initialization\n    show: {\n      type: Boolean,\n      default: true\n    },\n    labelField: {\n      type: String,\n      default: 'label'\n    },\n    valueField: {\n      type: String,\n      default: 'value'\n    },\n    loading: Boolean,\n    focusable: Boolean,\n    renderLabel: Function,\n    renderOption: Function,\n    nodeProps: Function,\n    showCheckmark: {\n      type: Boolean,\n      default: true\n    },\n    onMousedown: Function,\n    onScroll: Function,\n    onFocus: Function,\n    onBlur: Function,\n    onKeyup: Function,\n    onKeydown: Function,\n    onTabOut: Function,\n    onMouseenter: Function,\n    onMouseleave: Function,\n    onResize: Function,\n    resetMenuOnOptionsChange: {\n      type: Boolean,\n      default: true\n    },\n    inlineThemeDisabled: Boolean,\n    // deprecated\n    onToggle: Function\n  }),\n\n  setup(props) {\n    const themeRef = useTheme('InternalSelectMenu', '-internal-select-menu', style, internalSelectMenuLight, props, toRef(props, 'clsPrefix'));\n    const selfRef = ref(null);\n    const virtualListRef = ref(null);\n    const scrollbarRef = ref(null);\n    const flattenedNodesRef = computed(() => props.treeMate.getFlattenedNodes());\n    const fIndexGetterRef = computed(() => createIndexGetter(flattenedNodesRef.value));\n    const pendingNodeRef = ref(null);\n\n    function initPendingNode() {\n      const {\n        treeMate\n      } = props;\n      let defaultPendingNode = null;\n      const {\n        value\n      } = props;\n\n      if (value === null) {\n        defaultPendingNode = treeMate.getFirstAvailableNode();\n      } else {\n        if (props.multiple) {\n          defaultPendingNode = treeMate.getNode((value || [])[(value || []).length - 1]);\n        } else {\n          defaultPendingNode = treeMate.getNode(value);\n        }\n\n        if (!defaultPendingNode || defaultPendingNode.disabled) {\n          defaultPendingNode = treeMate.getFirstAvailableNode();\n        }\n      }\n\n      if (defaultPendingNode) {\n        setPendingTmNode(defaultPendingNode);\n      } else {\n        setPendingTmNode(null);\n      }\n    }\n\n    function clearPendingNodeIfInvalid() {\n      const {\n        value: pendingNode\n      } = pendingNodeRef;\n\n      if (pendingNode && !props.treeMate.getNode(pendingNode.key)) {\n        pendingNodeRef.value = null;\n      }\n    }\n\n    let initPendingNodeWatchStopHandle;\n    watch(() => props.show, show => {\n      if (show) {\n        initPendingNodeWatchStopHandle = watch(() => props.treeMate, () => {\n          if (props.resetMenuOnOptionsChange) {\n            if (props.autoPending) {\n              initPendingNode();\n            } else {\n              clearPendingNodeIfInvalid();\n            }\n\n            void nextTick(scrollToPendingNode);\n          } else {\n            clearPendingNodeIfInvalid();\n          }\n        }, {\n          immediate: true\n        });\n      } else {\n        initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n      }\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(() => {\n      initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n    });\n    const itemSizeRef = computed(() => {\n      return depx(themeRef.value.self[createKey('optionHeight', props.size)]);\n    });\n    const paddingRef = computed(() => {\n      return getPadding(themeRef.value.self[createKey('padding', props.size)]);\n    });\n    const valueSetRef = computed(() => {\n      if (props.multiple && Array.isArray(props.value)) {\n        return new Set(props.value);\n      }\n\n      return new Set();\n    });\n    const emptyRef = computed(() => {\n      const tmNodes = flattenedNodesRef.value;\n      return tmNodes && tmNodes.length === 0;\n    });\n\n    function doToggle(tmNode) {\n      const {\n        onToggle\n      } = props;\n      if (onToggle) onToggle(tmNode);\n    }\n\n    function doScroll(e) {\n      const {\n        onScroll\n      } = props;\n      if (onScroll) onScroll(e);\n    } // required, scroller sync need to be triggered manually\n\n\n    function handleVirtualListScroll(e) {\n      var _a;\n\n      (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n      doScroll(e);\n    }\n\n    function handleVirtualListResize() {\n      var _a;\n\n      (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n    }\n\n    function getPendingTmNode() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n      if (pendingTmNode) return pendingTmNode;\n      return null;\n    }\n\n    function handleOptionMouseEnter(e, tmNode) {\n      if (tmNode.disabled) return;\n      setPendingTmNode(tmNode, false);\n    }\n\n    function handleOptionClick(e, tmNode) {\n      if (tmNode.disabled) return;\n      doToggle(tmNode);\n    } // keyboard related methods\n\n\n    function handleKeyUp(e) {\n      var _a;\n\n      if (happensIn(e, 'action')) return;\n      (_a = props.onKeyup) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n\n    function handleKeyDown(e) {\n      var _a;\n\n      if (happensIn(e, 'action')) return;\n      (_a = props.onKeydown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n\n    function handleMouseDown(e) {\n      var _a;\n\n      (_a = props.onMousedown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.focusable) return;\n      e.preventDefault();\n    }\n\n    function next() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n\n      if (pendingTmNode) {\n        setPendingTmNode(pendingTmNode.getNext({\n          loop: true\n        }), true);\n      }\n    }\n\n    function prev() {\n      const {\n        value: pendingTmNode\n      } = pendingNodeRef;\n\n      if (pendingTmNode) {\n        setPendingTmNode(pendingTmNode.getPrev({\n          loop: true\n        }), true);\n      }\n    }\n\n    function setPendingTmNode(tmNode, doScroll = false) {\n      pendingNodeRef.value = tmNode;\n      if (doScroll) scrollToPendingNode();\n    }\n\n    function scrollToPendingNode() {\n      var _a, _b;\n\n      const tmNode = pendingNodeRef.value;\n      if (!tmNode) return;\n      const fIndex = fIndexGetterRef.value(tmNode.key);\n      if (fIndex === null) return;\n\n      if (props.virtualScroll) {\n        (_a = virtualListRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({\n          index: fIndex\n        });\n      } else {\n        (_b = scrollbarRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo({\n          index: fIndex,\n          elSize: itemSizeRef.value\n        });\n      }\n    }\n\n    function handleFocusin(e) {\n      var _a, _b;\n\n      if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target)) {\n        (_b = props.onFocus) === null || _b === void 0 ? void 0 : _b.call(props, e);\n      }\n    }\n\n    function handleFocusout(e) {\n      var _a, _b;\n\n      if (!((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n        (_b = props.onBlur) === null || _b === void 0 ? void 0 : _b.call(props, e);\n      }\n    }\n\n    provide(internalSelectionMenuInjectionKey, {\n      handleOptionMouseEnter,\n      handleOptionClick,\n      valueSetRef,\n      pendingTmNodeRef: pendingNodeRef,\n      nodePropsRef: toRef(props, 'nodeProps'),\n      showCheckmarkRef: toRef(props, 'showCheckmark'),\n      multipleRef: toRef(props, 'multiple'),\n      valueRef: toRef(props, 'value'),\n      renderLabelRef: toRef(props, 'renderLabel'),\n      renderOptionRef: toRef(props, 'renderOption'),\n      labelFieldRef: toRef(props, 'labelField'),\n      valueFieldRef: toRef(props, 'valueField')\n    });\n    provide(internalSelectionMenuBodyInjectionKey, selfRef);\n    onMounted(() => {\n      const {\n        value\n      } = scrollbarRef;\n      if (value) value.sync();\n    });\n    const cssVarsRef = computed(() => {\n      const {\n        size\n      } = props;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          height,\n          borderRadius,\n          color,\n          groupHeaderTextColor,\n          actionDividerColor,\n          optionTextColorPressed,\n          optionTextColor,\n          optionTextColorDisabled,\n          optionTextColorActive,\n          optionOpacityDisabled,\n          optionCheckColor,\n          actionTextColor,\n          optionColorPending,\n          optionColorActive,\n          loadingColor,\n          loadingSize,\n          optionColorActivePending,\n          [createKey('optionFontSize', size)]: fontSize,\n          [createKey('optionHeight', size)]: optionHeight,\n          [createKey('optionPadding', size)]: optionPadding\n        }\n      } = themeRef.value;\n      return {\n        '--n-height': height,\n        '--n-action-divider-color': actionDividerColor,\n        '--n-action-text-color': actionTextColor,\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border-radius': borderRadius,\n        '--n-color': color,\n        '--n-option-font-size': fontSize,\n        '--n-group-header-text-color': groupHeaderTextColor,\n        '--n-option-check-color': optionCheckColor,\n        '--n-option-color-pending': optionColorPending,\n        '--n-option-color-active': optionColorActive,\n        '--n-option-color-active-pending': optionColorActivePending,\n        '--n-option-height': optionHeight,\n        '--n-option-opacity-disabled': optionOpacityDisabled,\n        '--n-option-text-color': optionTextColor,\n        '--n-option-text-color-active': optionTextColorActive,\n        '--n-option-text-color-disabled': optionTextColorDisabled,\n        '--n-option-text-color-pressed': optionTextColorPressed,\n        '--n-option-padding': optionPadding,\n        '--n-option-padding-left': getPadding(optionPadding, 'left'),\n        '--n-option-padding-right': getPadding(optionPadding, 'right'),\n        '--n-loading-color': loadingColor,\n        '--n-loading-size': loadingSize\n      };\n    });\n    const {\n      inlineThemeDisabled\n    } = props;\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('internal-select-menu', computed(() => props.size[0]), cssVarsRef, props) : undefined;\n    const exposedProps = {\n      selfRef,\n      next,\n      prev,\n      getPendingTmNode\n    };\n    useOnResize(selfRef, props.onResize);\n    return Object.assign({\n      mergedTheme: themeRef,\n      virtualListRef,\n      scrollbarRef,\n      itemSize: itemSizeRef,\n      padding: paddingRef,\n      flattenedNodes: flattenedNodesRef,\n      empty: emptyRef,\n\n      virtualListContainer() {\n        const {\n          value\n        } = virtualListRef;\n        return value === null || value === void 0 ? void 0 : value.listElRef;\n      },\n\n      virtualListContent() {\n        const {\n          value\n        } = virtualListRef;\n        return value === null || value === void 0 ? void 0 : value.itemsElRef;\n      },\n\n      doScroll,\n      handleFocusin,\n      handleFocusout,\n      handleKeyUp,\n      handleKeyDown,\n      handleMouseDown,\n      handleVirtualListResize,\n      handleVirtualListScroll,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    }, exposedProps);\n  },\n\n  render() {\n    const {\n      $slots,\n      virtualScroll,\n      clsPrefix,\n      mergedTheme,\n      themeClass,\n      onRender\n    } = this;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    return h(\"div\", {\n      ref: \"selfRef\",\n      tabindex: this.focusable ? 0 : -1,\n      class: [`${clsPrefix}-base-select-menu`, themeClass, this.multiple && `${clsPrefix}-base-select-menu--multiple`],\n      style: this.cssVars,\n      onFocusin: this.handleFocusin,\n      onFocusout: this.handleFocusout,\n      onKeyup: this.handleKeyUp,\n      onKeydown: this.handleKeyDown,\n      onMousedown: this.handleMouseDown,\n      onMouseenter: this.onMouseenter,\n      onMouseleave: this.onMouseleave\n    }, this.loading ? h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__loading`\n    }, h(NInternalLoading, {\n      clsPrefix: clsPrefix,\n      strokeWidth: 20\n    })) : !this.empty ? h(NScrollbar, {\n      ref: \"scrollbarRef\",\n      theme: mergedTheme.peers.Scrollbar,\n      themeOverrides: mergedTheme.peerOverrides.Scrollbar,\n      scrollable: this.scrollable,\n      container: virtualScroll ? this.virtualListContainer : undefined,\n      content: virtualScroll ? this.virtualListContent : undefined,\n      onScroll: virtualScroll ? undefined : this.doScroll\n    }, {\n      default: () => {\n        return virtualScroll ? h(VirtualList, {\n          ref: \"virtualListRef\",\n          class: `${clsPrefix}-virtual-list`,\n          items: this.flattenedNodes,\n          itemSize: this.itemSize,\n          showScrollbar: false,\n          paddingTop: this.padding.top,\n          paddingBottom: this.padding.bottom,\n          onResize: this.handleVirtualListResize,\n          onScroll: this.handleVirtualListScroll,\n          itemResizable: true\n        }, {\n          default: ({\n            item: tmNode\n          }) => {\n            return tmNode.isGroup ? h(NSelectGroupHeader, {\n              key: tmNode.key,\n              clsPrefix: clsPrefix,\n              tmNode: tmNode\n            }) : tmNode.ignored ? null : h(NSelectOption, {\n              clsPrefix: clsPrefix,\n              key: tmNode.key,\n              tmNode: tmNode\n            });\n          }\n        }) : h(\"div\", {\n          class: `${clsPrefix}-base-select-menu-option-wrapper`,\n          style: {\n            paddingTop: this.padding.top,\n            paddingBottom: this.padding.bottom\n          }\n        }, this.flattenedNodes.map(tmNode => tmNode.isGroup ? h(NSelectGroupHeader, {\n          key: tmNode.key,\n          clsPrefix: clsPrefix,\n          tmNode: tmNode\n        }) : h(NSelectOption, {\n          clsPrefix: clsPrefix,\n          key: tmNode.key,\n          tmNode: tmNode\n        })));\n      }\n    }) : h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__empty`,\n      \"data-empty\": true\n    }, resolveSlot($slots.empty, () => [h(NEmpty, {\n      theme: mergedTheme.peers.Empty,\n      themeOverrides: mergedTheme.peerOverrides.Empty\n    })])), resolveWrappedSlot($slots.action, children => children && [h(\"div\", {\n      class: `${clsPrefix}-base-select-menu__action`,\n      \"data-action\": true,\n      key: \"action\"\n    }, children), h(NFocusDetector, {\n      onFocus: this.onTabOut,\n      key: \"focus-detector\"\n    })]));\n  }\n\n});","map":{"version":3,"names":["h","ref","onMounted","computed","defineComponent","toRef","provide","nextTick","watch","onBeforeUnmount","createIndexGetter","VirtualList","depx","getPadding","happensIn","NEmpty","NScrollbar","resolveSlot","resolveWrappedSlot","useOnResize","createKey","useThemeClass","useTheme","NInternalLoading","NFocusDetector","internalSelectMenuLight","NSelectOption","NSelectGroupHeader","internalSelectionMenuInjectionKey","internalSelectionMenuBodyInjectionKey","style","name","props","Object","assign","clsPrefix","type","String","required","scrollable","Boolean","default","treeMate","multiple","size","value","Number","Array","autoPending","virtualScroll","show","labelField","valueField","loading","focusable","renderLabel","Function","renderOption","nodeProps","showCheckmark","onMousedown","onScroll","onFocus","onBlur","onKeyup","onKeydown","onTabOut","onMouseenter","onMouseleave","onResize","resetMenuOnOptionsChange","inlineThemeDisabled","onToggle","setup","themeRef","selfRef","virtualListRef","scrollbarRef","flattenedNodesRef","getFlattenedNodes","fIndexGetterRef","pendingNodeRef","initPendingNode","defaultPendingNode","getFirstAvailableNode","getNode","length","disabled","setPendingTmNode","clearPendingNodeIfInvalid","pendingNode","key","initPendingNodeWatchStopHandle","scrollToPendingNode","immediate","itemSizeRef","self","paddingRef","valueSetRef","isArray","Set","emptyRef","tmNodes","doToggle","tmNode","doScroll","e","handleVirtualListScroll","_a","sync","handleVirtualListResize","getPendingTmNode","pendingTmNode","handleOptionMouseEnter","handleOptionClick","handleKeyUp","call","handleKeyDown","handleMouseDown","preventDefault","next","getNext","loop","prev","getPrev","_b","fIndex","scrollTo","index","elSize","handleFocusin","contains","target","handleFocusout","relatedTarget","pendingTmNodeRef","nodePropsRef","showCheckmarkRef","multipleRef","valueRef","renderLabelRef","renderOptionRef","labelFieldRef","valueFieldRef","cssVarsRef","common","cubicBezierEaseInOut","height","borderRadius","color","groupHeaderTextColor","actionDividerColor","optionTextColorPressed","optionTextColor","optionTextColorDisabled","optionTextColorActive","optionOpacityDisabled","optionCheckColor","actionTextColor","optionColorPending","optionColorActive","loadingColor","loadingSize","optionColorActivePending","fontSize","optionHeight","optionPadding","themeClassHandle","undefined","exposedProps","mergedTheme","itemSize","padding","flattenedNodes","empty","virtualListContainer","listElRef","virtualListContent","itemsElRef","cssVars","themeClass","onRender","render","$slots","tabindex","class","onFocusin","onFocusout","strokeWidth","theme","peers","Scrollbar","themeOverrides","peerOverrides","container","content","items","showScrollbar","paddingTop","top","paddingBottom","bottom","itemResizable","item","isGroup","ignored","map","Empty","action","children"],"sources":["D:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/_internal/select-menu/src/SelectMenu.js"],"sourcesContent":["import { h, ref, onMounted, computed, defineComponent, toRef, provide, nextTick, watch, onBeforeUnmount } from 'vue';\nimport { createIndexGetter } from 'treemate';\nimport { VirtualList } from 'vueuc';\nimport { depx, getPadding, happensIn } from 'seemly';\nimport { NEmpty } from '../../../empty';\nimport { NScrollbar } from '../../scrollbar';\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from '../../../_utils';\nimport { createKey } from '../../../_utils/cssr';\nimport { useThemeClass, useTheme } from '../../../_mixins';\nimport NInternalLoading from '../../loading';\nimport NFocusDetector from '../../focus-detector';\nimport { internalSelectMenuLight } from '../styles';\nimport NSelectOption from './SelectOption';\nimport NSelectGroupHeader from './SelectGroupHeader';\nimport { internalSelectionMenuInjectionKey, internalSelectionMenuBodyInjectionKey } from './interface';\nimport style from './styles/index.cssr';\nexport default defineComponent({\n    name: 'InternalSelectMenu',\n    props: Object.assign(Object.assign({}, useTheme.props), { clsPrefix: {\n            type: String,\n            required: true\n        }, scrollable: {\n            type: Boolean,\n            default: true\n        }, treeMate: {\n            type: Object,\n            required: true\n        }, multiple: Boolean, size: {\n            type: String,\n            default: 'medium'\n        }, value: {\n            type: [String, Number, Array],\n            default: null\n        }, autoPending: Boolean, virtualScroll: {\n            type: Boolean,\n            default: true\n        }, \n        // show is used to toggle pending state initialization\n        show: {\n            type: Boolean,\n            default: true\n        }, labelField: {\n            type: String,\n            default: 'label'\n        }, valueField: {\n            type: String,\n            default: 'value'\n        }, loading: Boolean, focusable: Boolean, renderLabel: Function, renderOption: Function, nodeProps: Function, showCheckmark: { type: Boolean, default: true }, onMousedown: Function, onScroll: Function, onFocus: Function, onBlur: Function, onKeyup: Function, onKeydown: Function, onTabOut: Function, onMouseenter: Function, onMouseleave: Function, onResize: Function, resetMenuOnOptionsChange: {\n            type: Boolean,\n            default: true\n        }, inlineThemeDisabled: Boolean, \n        // deprecated\n        onToggle: Function }),\n    setup(props) {\n        const themeRef = useTheme('InternalSelectMenu', '-internal-select-menu', style, internalSelectMenuLight, props, toRef(props, 'clsPrefix'));\n        const selfRef = ref(null);\n        const virtualListRef = ref(null);\n        const scrollbarRef = ref(null);\n        const flattenedNodesRef = computed(() => props.treeMate.getFlattenedNodes());\n        const fIndexGetterRef = computed(() => createIndexGetter(flattenedNodesRef.value));\n        const pendingNodeRef = ref(null);\n        function initPendingNode() {\n            const { treeMate } = props;\n            let defaultPendingNode = null;\n            const { value } = props;\n            if (value === null) {\n                defaultPendingNode = treeMate.getFirstAvailableNode();\n            }\n            else {\n                if (props.multiple) {\n                    defaultPendingNode = treeMate.getNode((value || [])[(value || []).length - 1]);\n                }\n                else {\n                    defaultPendingNode = treeMate.getNode(value);\n                }\n                if (!defaultPendingNode || defaultPendingNode.disabled) {\n                    defaultPendingNode = treeMate.getFirstAvailableNode();\n                }\n            }\n            if (defaultPendingNode) {\n                setPendingTmNode(defaultPendingNode);\n            }\n            else {\n                setPendingTmNode(null);\n            }\n        }\n        function clearPendingNodeIfInvalid() {\n            const { value: pendingNode } = pendingNodeRef;\n            if (pendingNode && !props.treeMate.getNode(pendingNode.key)) {\n                pendingNodeRef.value = null;\n            }\n        }\n        let initPendingNodeWatchStopHandle;\n        watch(() => props.show, (show) => {\n            if (show) {\n                initPendingNodeWatchStopHandle = watch(() => props.treeMate, () => {\n                    if (props.resetMenuOnOptionsChange) {\n                        if (props.autoPending) {\n                            initPendingNode();\n                        }\n                        else {\n                            clearPendingNodeIfInvalid();\n                        }\n                        void nextTick(scrollToPendingNode);\n                    }\n                    else {\n                        clearPendingNodeIfInvalid();\n                    }\n                }, {\n                    immediate: true\n                });\n            }\n            else {\n                initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n            }\n        }, {\n            immediate: true\n        });\n        onBeforeUnmount(() => {\n            initPendingNodeWatchStopHandle === null || initPendingNodeWatchStopHandle === void 0 ? void 0 : initPendingNodeWatchStopHandle();\n        });\n        const itemSizeRef = computed(() => {\n            return depx(themeRef.value.self[createKey('optionHeight', props.size)]);\n        });\n        const paddingRef = computed(() => {\n            return getPadding(themeRef.value.self[createKey('padding', props.size)]);\n        });\n        const valueSetRef = computed(() => {\n            if (props.multiple && Array.isArray(props.value)) {\n                return new Set(props.value);\n            }\n            return new Set();\n        });\n        const emptyRef = computed(() => {\n            const tmNodes = flattenedNodesRef.value;\n            return tmNodes && tmNodes.length === 0;\n        });\n        function doToggle(tmNode) {\n            const { onToggle } = props;\n            if (onToggle)\n                onToggle(tmNode);\n        }\n        function doScroll(e) {\n            const { onScroll } = props;\n            if (onScroll)\n                onScroll(e);\n        }\n        // required, scroller sync need to be triggered manually\n        function handleVirtualListScroll(e) {\n            var _a;\n            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n            doScroll(e);\n        }\n        function handleVirtualListResize() {\n            var _a;\n            (_a = scrollbarRef.value) === null || _a === void 0 ? void 0 : _a.sync();\n        }\n        function getPendingTmNode() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode)\n                return pendingTmNode;\n            return null;\n        }\n        function handleOptionMouseEnter(e, tmNode) {\n            if (tmNode.disabled)\n                return;\n            setPendingTmNode(tmNode, false);\n        }\n        function handleOptionClick(e, tmNode) {\n            if (tmNode.disabled)\n                return;\n            doToggle(tmNode);\n        }\n        // keyboard related methods\n        function handleKeyUp(e) {\n            var _a;\n            if (happensIn(e, 'action'))\n                return;\n            (_a = props.onKeyup) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function handleKeyDown(e) {\n            var _a;\n            if (happensIn(e, 'action'))\n                return;\n            (_a = props.onKeydown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n        }\n        function handleMouseDown(e) {\n            var _a;\n            (_a = props.onMousedown) === null || _a === void 0 ? void 0 : _a.call(props, e);\n            if (props.focusable)\n                return;\n            e.preventDefault();\n        }\n        function next() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode) {\n                setPendingTmNode(pendingTmNode.getNext({ loop: true }), true);\n            }\n        }\n        function prev() {\n            const { value: pendingTmNode } = pendingNodeRef;\n            if (pendingTmNode) {\n                setPendingTmNode(pendingTmNode.getPrev({ loop: true }), true);\n            }\n        }\n        function setPendingTmNode(tmNode, doScroll = false) {\n            pendingNodeRef.value = tmNode;\n            if (doScroll)\n                scrollToPendingNode();\n        }\n        function scrollToPendingNode() {\n            var _a, _b;\n            const tmNode = pendingNodeRef.value;\n            if (!tmNode)\n                return;\n            const fIndex = fIndexGetterRef.value(tmNode.key);\n            if (fIndex === null)\n                return;\n            if (props.virtualScroll) {\n                (_a = virtualListRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({ index: fIndex });\n            }\n            else {\n                (_b = scrollbarRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo({\n                    index: fIndex,\n                    elSize: itemSizeRef.value\n                });\n            }\n        }\n        function handleFocusin(e) {\n            var _a, _b;\n            if ((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.target)) {\n                (_b = props.onFocus) === null || _b === void 0 ? void 0 : _b.call(props, e);\n            }\n        }\n        function handleFocusout(e) {\n            var _a, _b;\n            if (!((_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget))) {\n                (_b = props.onBlur) === null || _b === void 0 ? void 0 : _b.call(props, e);\n            }\n        }\n        provide(internalSelectionMenuInjectionKey, {\n            handleOptionMouseEnter,\n            handleOptionClick,\n            valueSetRef,\n            pendingTmNodeRef: pendingNodeRef,\n            nodePropsRef: toRef(props, 'nodeProps'),\n            showCheckmarkRef: toRef(props, 'showCheckmark'),\n            multipleRef: toRef(props, 'multiple'),\n            valueRef: toRef(props, 'value'),\n            renderLabelRef: toRef(props, 'renderLabel'),\n            renderOptionRef: toRef(props, 'renderOption'),\n            labelFieldRef: toRef(props, 'labelField'),\n            valueFieldRef: toRef(props, 'valueField')\n        });\n        provide(internalSelectionMenuBodyInjectionKey, selfRef);\n        onMounted(() => {\n            const { value } = scrollbarRef;\n            if (value)\n                value.sync();\n        });\n        const cssVarsRef = computed(() => {\n            const { size } = props;\n            const { common: { cubicBezierEaseInOut }, self: { height, borderRadius, color, groupHeaderTextColor, actionDividerColor, optionTextColorPressed, optionTextColor, optionTextColorDisabled, optionTextColorActive, optionOpacityDisabled, optionCheckColor, actionTextColor, optionColorPending, optionColorActive, loadingColor, loadingSize, optionColorActivePending, [createKey('optionFontSize', size)]: fontSize, [createKey('optionHeight', size)]: optionHeight, [createKey('optionPadding', size)]: optionPadding } } = themeRef.value;\n            return {\n                '--n-height': height,\n                '--n-action-divider-color': actionDividerColor,\n                '--n-action-text-color': actionTextColor,\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-border-radius': borderRadius,\n                '--n-color': color,\n                '--n-option-font-size': fontSize,\n                '--n-group-header-text-color': groupHeaderTextColor,\n                '--n-option-check-color': optionCheckColor,\n                '--n-option-color-pending': optionColorPending,\n                '--n-option-color-active': optionColorActive,\n                '--n-option-color-active-pending': optionColorActivePending,\n                '--n-option-height': optionHeight,\n                '--n-option-opacity-disabled': optionOpacityDisabled,\n                '--n-option-text-color': optionTextColor,\n                '--n-option-text-color-active': optionTextColorActive,\n                '--n-option-text-color-disabled': optionTextColorDisabled,\n                '--n-option-text-color-pressed': optionTextColorPressed,\n                '--n-option-padding': optionPadding,\n                '--n-option-padding-left': getPadding(optionPadding, 'left'),\n                '--n-option-padding-right': getPadding(optionPadding, 'right'),\n                '--n-loading-color': loadingColor,\n                '--n-loading-size': loadingSize\n            };\n        });\n        const { inlineThemeDisabled } = props;\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('internal-select-menu', computed(() => props.size[0]), cssVarsRef, props)\n            : undefined;\n        const exposedProps = {\n            selfRef,\n            next,\n            prev,\n            getPendingTmNode\n        };\n        useOnResize(selfRef, props.onResize);\n        return Object.assign({ mergedTheme: themeRef, virtualListRef,\n            scrollbarRef, itemSize: itemSizeRef, padding: paddingRef, flattenedNodes: flattenedNodesRef, empty: emptyRef, virtualListContainer() {\n                const { value } = virtualListRef;\n                return value === null || value === void 0 ? void 0 : value.listElRef;\n            },\n            virtualListContent() {\n                const { value } = virtualListRef;\n                return value === null || value === void 0 ? void 0 : value.itemsElRef;\n            },\n            doScroll,\n            handleFocusin,\n            handleFocusout,\n            handleKeyUp,\n            handleKeyDown,\n            handleMouseDown,\n            handleVirtualListResize,\n            handleVirtualListScroll, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender }, exposedProps);\n    },\n    render() {\n        const { $slots, virtualScroll, clsPrefix, mergedTheme, themeClass, onRender } = this;\n        onRender === null || onRender === void 0 ? void 0 : onRender();\n        return (h(\"div\", { ref: \"selfRef\", tabindex: this.focusable ? 0 : -1, class: [\n                `${clsPrefix}-base-select-menu`,\n                themeClass,\n                this.multiple && `${clsPrefix}-base-select-menu--multiple`\n            ], style: this.cssVars, onFocusin: this.handleFocusin, onFocusout: this.handleFocusout, onKeyup: this.handleKeyUp, onKeydown: this.handleKeyDown, onMousedown: this.handleMouseDown, onMouseenter: this.onMouseenter, onMouseleave: this.onMouseleave },\n            this.loading ? (h(\"div\", { class: `${clsPrefix}-base-select-menu__loading` },\n                h(NInternalLoading, { clsPrefix: clsPrefix, strokeWidth: 20 }))) : !this.empty ? (h(NScrollbar, { ref: \"scrollbarRef\", theme: mergedTheme.peers.Scrollbar, themeOverrides: mergedTheme.peerOverrides.Scrollbar, scrollable: this.scrollable, container: virtualScroll ? this.virtualListContainer : undefined, content: virtualScroll ? this.virtualListContent : undefined, onScroll: virtualScroll ? undefined : this.doScroll }, {\n                default: () => {\n                    return virtualScroll ? (h(VirtualList, { ref: \"virtualListRef\", class: `${clsPrefix}-virtual-list`, items: this.flattenedNodes, itemSize: this.itemSize, showScrollbar: false, paddingTop: this.padding.top, paddingBottom: this.padding.bottom, onResize: this.handleVirtualListResize, onScroll: this.handleVirtualListScroll, itemResizable: true }, {\n                        default: ({ item: tmNode }) => {\n                            return tmNode.isGroup ? (h(NSelectGroupHeader, { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : tmNode.ignored ? null : (h(NSelectOption, { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode }));\n                        }\n                    })) : (h(\"div\", { class: `${clsPrefix}-base-select-menu-option-wrapper`, style: {\n                            paddingTop: this.padding.top,\n                            paddingBottom: this.padding.bottom\n                        } }, this.flattenedNodes.map((tmNode) => tmNode.isGroup ? (h(NSelectGroupHeader, { key: tmNode.key, clsPrefix: clsPrefix, tmNode: tmNode })) : (h(NSelectOption, { clsPrefix: clsPrefix, key: tmNode.key, tmNode: tmNode })))));\n                }\n            })) : (h(\"div\", { class: `${clsPrefix}-base-select-menu__empty`, \"data-empty\": true }, resolveSlot($slots.empty, () => [\n                h(NEmpty, { theme: mergedTheme.peers.Empty, themeOverrides: mergedTheme.peerOverrides.Empty })\n            ]))),\n            resolveWrappedSlot($slots.action, (children) => children && [\n                h(\"div\", { class: `${clsPrefix}-base-select-menu__action`, \"data-action\": true, key: \"action\" }, children),\n                h(NFocusDetector, { onFocus: this.onTabOut, key: \"focus-detector\" })\n            ])));\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}