{"ast":null,"code":"import { onBeforeUnmount, onMounted, watch, ref } from 'vue';\nlet lockCount = 0;\nlet originalMarginRight = '';\nlet originalOverflow = '';\nlet originalOverflowX = '';\nlet originalOverflowY = '';\nexport const lockHtmlScrollRightCompensationRef = ref('0px');\nexport function useLockHtmlScroll(lockRef) {\n  // not browser\n  if (typeof document === 'undefined') return;\n  const el = document.documentElement;\n  let watchStopHandle;\n  let activated = false;\n\n  const unlock = () => {\n    el.style.marginRight = originalMarginRight;\n    el.style.overflow = originalOverflow;\n    el.style.overflowX = originalOverflowX;\n    el.style.overflowY = originalOverflowY;\n    lockHtmlScrollRightCompensationRef.value = '0px';\n  };\n\n  onMounted(() => {\n    watchStopHandle = watch(lockRef, value => {\n      if (value) {\n        if (!lockCount) {\n          const scrollbarWidth = window.innerWidth - el.offsetWidth;\n\n          if (scrollbarWidth > 0) {\n            originalMarginRight = el.style.marginRight;\n            el.style.marginRight = `${scrollbarWidth}px`;\n            lockHtmlScrollRightCompensationRef.value = `${scrollbarWidth}px`;\n          }\n\n          originalOverflow = el.style.overflow;\n          originalOverflowX = el.style.overflowX;\n          originalOverflowY = el.style.overflowY;\n          el.style.overflow = 'hidden';\n          el.style.overflowX = 'hidden';\n          el.style.overflowY = 'hidden';\n        }\n\n        activated = true;\n        lockCount++;\n      } else {\n        lockCount--;\n\n        if (!lockCount) {\n          unlock();\n        }\n\n        activated = false;\n      }\n    }, {\n      immediate: true\n    });\n  });\n  onBeforeUnmount(() => {\n    watchStopHandle === null || watchStopHandle === void 0 ? void 0 : watchStopHandle();\n\n    if (activated) {\n      lockCount--;\n\n      if (!lockCount) {\n        unlock();\n      }\n\n      activated = false;\n    }\n  });\n}","map":{"version":3,"names":["onBeforeUnmount","onMounted","watch","ref","lockCount","originalMarginRight","originalOverflow","originalOverflowX","originalOverflowY","lockHtmlScrollRightCompensationRef","useLockHtmlScroll","lockRef","document","el","documentElement","watchStopHandle","activated","unlock","style","marginRight","overflow","overflowX","overflowY","value","scrollbarWidth","window","innerWidth","offsetWidth","immediate"],"sources":["E:/VCode/SHC社区管理系统/shc_community_manager_system/node_modules/naive-ui/es/_utils/composable/use-lock-html-scroll.js"],"sourcesContent":["import { onBeforeUnmount, onMounted, watch, ref } from 'vue';\nlet lockCount = 0;\nlet originalMarginRight = '';\nlet originalOverflow = '';\nlet originalOverflowX = '';\nlet originalOverflowY = '';\nexport const lockHtmlScrollRightCompensationRef = ref('0px');\nexport function useLockHtmlScroll(lockRef) {\n    // not browser\n    if (typeof document === 'undefined')\n        return;\n    const el = document.documentElement;\n    let watchStopHandle;\n    let activated = false;\n    const unlock = () => {\n        el.style.marginRight = originalMarginRight;\n        el.style.overflow = originalOverflow;\n        el.style.overflowX = originalOverflowX;\n        el.style.overflowY = originalOverflowY;\n        lockHtmlScrollRightCompensationRef.value = '0px';\n    };\n    onMounted(() => {\n        watchStopHandle = watch(lockRef, (value) => {\n            if (value) {\n                if (!lockCount) {\n                    const scrollbarWidth = window.innerWidth - el.offsetWidth;\n                    if (scrollbarWidth > 0) {\n                        originalMarginRight = el.style.marginRight;\n                        el.style.marginRight = `${scrollbarWidth}px`;\n                        lockHtmlScrollRightCompensationRef.value = `${scrollbarWidth}px`;\n                    }\n                    originalOverflow = el.style.overflow;\n                    originalOverflowX = el.style.overflowX;\n                    originalOverflowY = el.style.overflowY;\n                    el.style.overflow = 'hidden';\n                    el.style.overflowX = 'hidden';\n                    el.style.overflowY = 'hidden';\n                }\n                activated = true;\n                lockCount++;\n            }\n            else {\n                lockCount--;\n                if (!lockCount) {\n                    unlock();\n                }\n                activated = false;\n            }\n        }, {\n            immediate: true\n        });\n    });\n    onBeforeUnmount(() => {\n        watchStopHandle === null || watchStopHandle === void 0 ? void 0 : watchStopHandle();\n        if (activated) {\n            lockCount--;\n            if (!lockCount) {\n                unlock();\n            }\n            activated = false;\n        }\n    });\n}\n"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,SAA1B,EAAqCC,KAArC,EAA4CC,GAA5C,QAAuD,KAAvD;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,mBAAmB,GAAG,EAA1B;AACA,IAAIC,gBAAgB,GAAG,EAAvB;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,IAAIC,iBAAiB,GAAG,EAAxB;AACA,OAAO,MAAMC,kCAAkC,GAAGN,GAAG,CAAC,KAAD,CAA9C;AACP,OAAO,SAASO,iBAAT,CAA2BC,OAA3B,EAAoC;EACvC;EACA,IAAI,OAAOC,QAAP,KAAoB,WAAxB,EACI;EACJ,MAAMC,EAAE,GAAGD,QAAQ,CAACE,eAApB;EACA,IAAIC,eAAJ;EACA,IAAIC,SAAS,GAAG,KAAhB;;EACA,MAAMC,MAAM,GAAG,MAAM;IACjBJ,EAAE,CAACK,KAAH,CAASC,WAAT,GAAuBd,mBAAvB;IACAQ,EAAE,CAACK,KAAH,CAASE,QAAT,GAAoBd,gBAApB;IACAO,EAAE,CAACK,KAAH,CAASG,SAAT,GAAqBd,iBAArB;IACAM,EAAE,CAACK,KAAH,CAASI,SAAT,GAAqBd,iBAArB;IACAC,kCAAkC,CAACc,KAAnC,GAA2C,KAA3C;EACH,CAND;;EAOAtB,SAAS,CAAC,MAAM;IACZc,eAAe,GAAGb,KAAK,CAACS,OAAD,EAAWY,KAAD,IAAW;MACxC,IAAIA,KAAJ,EAAW;QACP,IAAI,CAACnB,SAAL,EAAgB;UACZ,MAAMoB,cAAc,GAAGC,MAAM,CAACC,UAAP,GAAoBb,EAAE,CAACc,WAA9C;;UACA,IAAIH,cAAc,GAAG,CAArB,EAAwB;YACpBnB,mBAAmB,GAAGQ,EAAE,CAACK,KAAH,CAASC,WAA/B;YACAN,EAAE,CAACK,KAAH,CAASC,WAAT,GAAwB,GAAEK,cAAe,IAAzC;YACAf,kCAAkC,CAACc,KAAnC,GAA4C,GAAEC,cAAe,IAA7D;UACH;;UACDlB,gBAAgB,GAAGO,EAAE,CAACK,KAAH,CAASE,QAA5B;UACAb,iBAAiB,GAAGM,EAAE,CAACK,KAAH,CAASG,SAA7B;UACAb,iBAAiB,GAAGK,EAAE,CAACK,KAAH,CAASI,SAA7B;UACAT,EAAE,CAACK,KAAH,CAASE,QAAT,GAAoB,QAApB;UACAP,EAAE,CAACK,KAAH,CAASG,SAAT,GAAqB,QAArB;UACAR,EAAE,CAACK,KAAH,CAASI,SAAT,GAAqB,QAArB;QACH;;QACDN,SAAS,GAAG,IAAZ;QACAZ,SAAS;MACZ,CAjBD,MAkBK;QACDA,SAAS;;QACT,IAAI,CAACA,SAAL,EAAgB;UACZa,MAAM;QACT;;QACDD,SAAS,GAAG,KAAZ;MACH;IACJ,CA1BsB,EA0BpB;MACCY,SAAS,EAAE;IADZ,CA1BoB,CAAvB;EA6BH,CA9BQ,CAAT;EA+BA5B,eAAe,CAAC,MAAM;IAClBe,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,EAAjF;;IACA,IAAIC,SAAJ,EAAe;MACXZ,SAAS;;MACT,IAAI,CAACA,SAAL,EAAgB;QACZa,MAAM;MACT;;MACDD,SAAS,GAAG,KAAZ;IACH;EACJ,CATc,CAAf;AAUH"},"metadata":{},"sourceType":"module"}